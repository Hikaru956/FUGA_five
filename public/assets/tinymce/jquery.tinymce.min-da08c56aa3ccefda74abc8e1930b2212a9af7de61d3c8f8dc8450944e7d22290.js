!function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var n=r(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinymce.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function i(e){var n,i=this;if(null!=e)t.call(i),i.each(function(t,n){var i;(i=tinymce.get(n.id))&&i.setContent(e)});else if(i.length>0&&(n=tinymce.get(i[0].id)))return n.getContent()}function r(e){var t=null;return e&&e.id&&c.tinymce&&(t=tinymce.get(e.id)),t}function a(e){return!!(e&&e.length&&c.tinymce&&e.is(":tinymce"))}var o={};e.each(["text","html","val"],function(t,c){var l=o[c]=e.fn[c],u="text"===c;e.fn[c]=function(t){var c=this;if(!a(c))return l.apply(c,arguments);if(t!==n)return i.call(c.filter(":tinymce"),t),l.apply(c.not(":tinymce"),arguments),c;var o="",s=arguments;return(u?c:c.eq(0)).each(function(t,n){var i=r(n);o+=i?u?i.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):i.getContent({save:!0}):l.apply(e(n),s)}),o}}),e.each(["append","prepend"],function(t,i){var c=o[i]=e.fn[i],l="prepend"===i;e.fn[i]=function(e){var t=this;return a(t)?e!==n?(t.filter(":tinymce").each(function(t,n){var i=r(n);i&&i.setContent(l?e+i.getContent():i.getContent()+e)}),c.apply(t.not(":tinymce"),arguments),t):void 0:c.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(n,i){var r=o[i]=e.fn[i];e.fn[i]=function(){return t.call(this,i),r.apply(this,arguments)}}),o.attr=e.fn.attr,e.fn.attr=function(t,c){var l=this,u=arguments;if(!t||"value"!==t||!a(l))return o.attr.apply(l,u);if(c!==n)return i.call(l.filter(":tinymce"),c),o.attr.apply(l.not(":tinymce"),u),l;var s=l[0],f=r(s);return f?f.getContent({save:!0}):o.attr.apply(e(s),u)}}var n,i,r=[],c=window;e.fn.tinymce=function(n){function a(){var i=[],r=0;t&&(t(),t=null),s.each(function(e,t){var c,a=t.id,o=n.oninit;a||(t.id=a=tinymce.DOM.uniqueId()),tinymce.get(a)||(c=new tinymce.Editor(a,n,tinymce.EditorManager),i.push(c),c.on("init",function(){var e,t=o;s.css("visibility",""),o&&++r==i.length&&("string"==typeof t&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,i))}))}),e.each(i,function(e,t){t.render()})}var o,l,u,s=this,f="";if(!s.length)return s;if(!n)return tinymce.get(s[0].id);if(s.css("visibility","hidden"),c.tinymce||i||!(o=n.script_url))1===i?r.push(a):a();else{i=1,l=o.substring(0,o.lastIndexOf("/")),-1!=o.indexOf(".min")&&(f=".min"),c.tinymce=c.tinyMCEPreInit||{base:l,suffix:f},-1!=o.indexOf("gzip")&&(u=n.language||"en",o=o+(/\?/.test(o)?"&":"?")+"js=true&core=true&suffix="+escape(f)+"&themes="+escape(n.theme||"modern")+"&plugins="+escape(n.plugins||"")+"&languages="+(u||""),c.tinyMCE_GZ||(c.tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(e))}t("langs/"+u+".js"),t("themes/"+n.theme+"/theme"+f+".js"),t("themes/"+n.theme+"/langs/"+u+".js"),e.each(n.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+f+".js"),t("plugins/"+n+"/langs/"+u+".js"))})},end:function(){}}));var p=document.createElement("script");p.type="text/javascript",p.onload=p.onreadystatechange=function(t){t=t||event,2===i||"load"!=t.type&&!/complete|loaded/.test(p.readyState)||(tinymce.dom.Event.domLoaded=1,i=2,n.script_loaded&&n.script_loaded(),a(),e.each(r,function(e,t){t()}))},p.src=o,document.body.appendChild(p)}return s},e.extend(e.expr[":"],{tinymce:function(e){return!!(e.id&&"tinymce"in window&&tinymce.get(e.id))}})}(jQuery);