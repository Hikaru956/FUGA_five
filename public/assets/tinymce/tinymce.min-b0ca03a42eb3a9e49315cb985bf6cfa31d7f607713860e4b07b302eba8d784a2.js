!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(!(n=a[e[o]]||i(e[o])))throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,o=n[r],s=o.split(/[.\/]/),l=0;l<s.length-1;++l)i[s[l]]===t&&(i[s[l]]={}),i=i[s[l]];i[s[s.length-1]]=a[o]}}var a={},s="tinymce/dom/Sizzle",l="tinymce/html/Styles",c="tinymce/dom/EventUtils",d="tinymce/dom/TreeWalker",u="tinymce/util/Tools",f="tinymce/dom/Range",m="tinymce/html/Entities",p="tinymce/Env",h="tinymce/dom/DOMUtils",g="tinymce/dom/ScriptLoader",v="tinymce/AddOnManager",y="tinymce/html/Node",b="tinymce/html/Schema",C="tinymce/html/SaxParser",x="tinymce/html/DomParser",_="tinymce/html/Writer",w="tinymce/html/Serializer",k="tinymce/dom/Serializer",E="tinymce/dom/TridentSelection",N="tinymce/util/VK",S="tinymce/dom/ControlSelection",T="tinymce/dom/Selection",R="tinymce/dom/RangeUtils",A="tinymce/Formatter",B="tinymce/UndoManager",H="tinymce/EnterKey",L="tinymce/ForceBlocks",M="tinymce/EditorCommands",D="tinymce/util/URI",P="tinymce/util/Class",O="tinymce/ui/Selector",I="tinymce/ui/Collection",F="tinymce/ui/DomUtils",z="tinymce/ui/Control",W="tinymce/ui/Factory",V="tinymce/ui/Container",U="tinymce/ui/DragHelper",q="tinymce/ui/Scrollable",j="tinymce/ui/Panel",$="tinymce/ui/Movable",K="tinymce/ui/Resizable",Y="tinymce/ui/FloatPanel",G="tinymce/ui/KeyboardNavigation",X="tinymce/ui/Window",J="tinymce/ui/MessageBox",Q="tinymce/WindowManager",Z="tinymce/util/Quirks",ee="tinymce/util/Observable",te="tinymce/Shortcuts",ne="tinymce/Editor",re="tinymce/util/I18n",ie="tinymce/FocusManager",oe="tinymce/EditorManager",ae="tinymce/LegacyInput",se="tinymce/util/XHR",le="tinymce/util/JSON",ce="tinymce/util/JSONRequest",de="tinymce/util/JSONP",ue="tinymce/util/LocalStorage",fe="tinymce/Compat",me="tinymce/ui/Layout",pe="tinymce/ui/AbsoluteLayout",he="tinymce/ui/Tooltip",ge="tinymce/ui/Widget",ve="tinymce/ui/Button",ye="tinymce/ui/ButtonGroup",be="tinymce/ui/Checkbox",Ce="tinymce/ui/PanelButton",xe="tinymce/ui/ColorButton",_e="tinymce/ui/ComboBox",we="tinymce/ui/Path",ke="tinymce/ui/ElementPath",Ee="tinymce/ui/FormItem",Ne="tinymce/ui/Form",Se="tinymce/ui/FieldSet",Te="tinymce/ui/FilePicker",Re="tinymce/ui/FitLayout",Ae="tinymce/ui/FlexLayout",Be="tinymce/ui/FlowLayout",He="tinymce/ui/FormatControls",Le="tinymce/ui/GridLayout",Me="tinymce/ui/Iframe",De="tinymce/ui/Label",Pe="tinymce/ui/Toolbar",Oe="tinymce/ui/MenuBar",Ie="tinymce/ui/MenuButton",Fe="tinymce/ui/ListBox",ze="tinymce/ui/MenuItem",We="tinymce/ui/Menu",Ve="tinymce/ui/Radio",Ue="tinymce/ui/ResizeHandle",qe="tinymce/ui/Spacer",je="tinymce/ui/SplitButton",$e="tinymce/ui/StackLayout",Ke="tinymce/ui/TabPanel",Ye="tinymce/ui/TextBox",Ge="tinymce/ui/Throbber";r(s,[],function(){if(!window.jQuery)throw new Error("Load jQuery first");return jQuery.find}),r(l,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,d={},u="\ufeff";for(e=e||{},o=("\\\" \\' \\; \\: ; : "+u).split(" "),i=0;i<o.length;i++)d[o[i]]=u+i,d[u+i]=o[i];return{toHex:function(e){return e.replace(a,n)},parse:function(t){function r(e,t,n){var r,o,a,s;if((r=b[e+"-top"+t])&&((o=b[e+"-right"+t])&&((a=b[e+"-bottom"+t])&&(s=b[e+"-left"+t])))){var l=[r,o,a,s];for(i=l.length-1;i--&&l[i]===l[i+1];);i>-1&&n||(b[e+t]=-1==i?l[0]:l.join(" "),delete b[e+"-top"+t],delete b[e+"-right"+t],delete b[e+"-bottom"+t],delete b[e+"-left"+t])}}function o(e){var t,n=b[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return b[e]=n[0],!0}}function u(e,t,n,r){o(t)&&o(n)&&o(r)&&(b[e]=b[t]+" "+b[n]+" "+b[r],delete b[t],delete b[n],delete b[r])}function f(e){return y=!0,d[e]}function m(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return d[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(t,n,r,i,o,a){return(o=o||a)?"'"+(o=m(o)).replace(/\'/g,"\\'")+"'":(n=m(n||r||i),!e.allow_script_urls&&/(java|vb)script:/i.test(n.replace(/[\s\r\n]+/,""))?"":(C&&(n=C.call(x,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"))}var h,g,v,y,b={},C=e.url_converter,x=e.url_converter_scope||this;if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,f)});h=l.exec(t);){if(g=h[1].replace(c,"").toLowerCase(),v=h[2].replace(c,""),g&&v.length>0){if(!e.allow_script_urls&&("behavior"==g||/expression\s*\(/.test(v)))continue;"font-weight"===g&&"700"===v?v="bold":("color"===g||"background-color"===g)&&(v=v.toLowerCase()),v=(v=v.replace(a,n)).replace(s,p),b[g]=y?m(v,!0):v}l.lastIndex=h.index+h[0].length}r("border","",!0),r("border","-width"),r("border","-color"),r("border","-style"),r("padding",""),r("margin",""),u("border","border-width","border-style","border-color"),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(e,n){function i(n){var i,o,a,l;if(i=t.styles[n])for(o=0,a=i.length;a>o;o++)n=i[o],(l=e[n])!==r&&l.length>0&&(s+=(s.length>0?" ":"")+n+": "+l+";")}var o,a,s="";if(n&&t&&t.styles)i("*"),i(n);else for(o in e)(a=e[o])!==r&&a.length>0&&(s+=(s.length>0?" ":"")+o+": "+a+";");return s}}}}),r(c,[],function(){function e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function r(){return!0}var i,o,l=t||{};for(i in e)s[i]||(l[i]=e[i]);if(l.target||(l.target=l.srcElement||document),e&&a.test(e.type)&&e.pageX===o&&e.clientX!==o){var c=l.target.ownerDocument||document,d=c.documentElement,u=c.body;l.pageX=e.clientX+(d&&d.scrollLeft||u&&u.scrollLeft||0)-(d&&d.clientLeft||u&&u.clientLeft||0),l.pageY=e.clientY+(d&&d.scrollTop||u&&u.scrollTop||0)-(d&&d.clientTop||u&&u.clientTop||0)}return l.preventDefault=function(){l.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=r,l.stopPropagation()},l.isDefaultPrevented||(l.isDefaultPrevented=n,l.isPropagationStopped=n,l.isImmediatePropagationStopped=n),l}function r(n,r,i){function o(){i.domLoaded||(i.domLoaded=!0,r(c))}function a(){"complete"===l.readyState&&(t(l,"readystatechange",a),o())}function s(){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(s,0)}o()}var l=n.document,c={type:"ready"};return i.domLoaded?void r(c):(l.addEventListener?"complete"===l.readyState?o():e(n,"DOMContentLoaded",o):(e(l,"readystatechange",a),l.documentElement.doScroll&&n===n.top&&s()),void e(n,"load",o))}function i(){function i(e,t){var n,r,i,o,a=f[t];if(n=a&&a[e.type])for(r=0,i=n.length;i>r;r++)if((o=n[r])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}var a,s,l,c,d,u=this,f={};s=o+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,u.domLoaded=!1,u.events=f,u.bind=function(t,o,m,p){function h(e){i(n(e||w.event),g)}var g,v,y,b,C,x,_,w=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[s]?g=t[s]:(g=a++,t[s]=g,f[g]={}),p=p||t,y=(o=o.split(" ")).length;y--;)x=h,C=_=!1,"DOMContentLoaded"===(b=o[y])&&(b="ready"),u.domLoaded&&"ready"===b&&"complete"==t.readyState?m.call(p,n({type:b})):(c||(C=d[b])&&(x=function(e){var t,r;if(t=e.currentTarget,(r=e.relatedTarget)&&t.contains)r=t.contains(r);else for(;r&&r!==t;)r=r.parentNode;r||((e=n(e||w.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,i(e,g))}),l||"focusin"!==b&&"focusout"!==b||(_=!0,C="focusin"===b?"focus":"blur",x=function(e){(e=n(e||w.event)).type="focus"===e.type?"focusin":"focusout",i(e,g)}),(v=f[g][b])?"ready"===b&&u.domLoaded?m({type:b}):v.push({func:m,scope:p}):(f[g][b]=v=[{func:m,scope:p}],v.fakeName=C,v.capture=_,v.nativeHandler=x,"ready"===b?r(t,x,u):e(t,C||b,x,_)));return t=v=0,m}},u.unbind=function(e,n,r){var i,o,a,l,c,d;if(!e||3===e.nodeType||8===e.nodeType)return u;if(i=e[s]){if(d=f[i],n){for(a=(n=n.split(" ")).length;a--;)if(o=d[c=n[a]]){if(r)for(l=o.length;l--;)if(o[l].func===r){var p=o.nativeHandler;(o=o.slice(0,l).concat(o.slice(l+1))).nativeHandler=p,d[c]=o}r&&0!==o.length||(delete d[c],t(e,o.fakeName||c,o.nativeHandler,o.capture))}}else{for(c in d)t(e,(o=d[c]).fakeName||c,o.nativeHandler,o.capture);d={}}for(c in d)return u;delete f[i];try{delete e[s]}catch(m){e[s]=null}}return u},u.fire=function(e,t,r){var o;if(!e||3===e.nodeType||8===e.nodeType)return u;(r=n(null,r)).type=t,r.target=e;do{(o=e[s])&&i(r,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return u},u.clean=function(e){var t,n,r=u.unbind;if(!e||3===e.nodeType||8===e.nodeType)return u;if(e[s]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[s]&&r(e);return u},u.destroy=function(){f={}},u.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var o="mce-data-",a=/^(?:mouse|contextmenu)|click/,s={keyLocation:1,layerX:1,layerY:1,returnValue:1};return i.Event=new i,i.Event.bind(window,"ready",function(){}),i}),r(d,[],function(){return function(e,t){function n(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!=t){if(o=e[r])return o;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(o=a[r])return o}}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}}}),r(u,[],function(){function e(e,n){return n?!("array"!=n||!g(e))||typeof e==n:e!==t}function n(e){var t,n,r=[];for(t=0,n=e.length;n>t;t++)r[t]=e[t];return r}function r(e,t,n){var r;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function i(e,n,r){var i,o;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,o=e.length;o>i;i++)if(!1===n.call(r,e[i],i,e))return 0}else for(i in e)if(e.hasOwnProperty(i)&&!1===n.call(r,e[i],i,e))return 0;return 1}function o(e,t){var n=[];return i(e,function(e){n.push(t(e))}),n}function a(e,t){var n=[];return i(e,function(e){(!t||t(e))&&n.push(e)}),n}function s(e,t,n){var r,i,o,a,s,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=l.createNS(e[3].replace(/\.\w+$/,""),n))[o]){if("static"==e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},c=1),i[o]=t[o],l.extend(i[o].prototype,t),e[5]&&(r=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=c?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],l.each(r,function(e,t){i[o].prototype[t]=r[t]}),l.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!=o&&(i[o].prototype[t]=e)})),l.each(t["static"],function(e,t){i[o][t]=e})}}function l(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function c(e,n){var r,i,o,a,s=arguments;for(r=1,i=s.length;i>r;r++)for(o in n=s[r])n.hasOwnProperty(o)&&((a=n[o])!==t&&(e[o]=a));return e}function d(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),i(e,function(e,i){return!1!==t.call(r,e,i,n)&&void d(e,t,n,r)}))}function u(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t}function f(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;r>n&&(t=t[e[n]]);n++);return t}function m(t,n){return!t||e(t,"array")?t:o(t.split(n||","),h)}var p=/^\s*|\s*$/g,h=function(e){return null===e||e===t?"":(""+e).replace(p,"")},g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:h,isArray:g,is:e,toArray:n,makeMap:r,each:i,map:o,grep:a,inArray:l,extend:c,create:s,walk:d,createNS:u,resolve:f,explode:m}}),r(f,[u],function(e){function t(n){function r(){return D.createDocumentFragment()}function i(e,t){w(F,e,t)}function o(e,t){w(z,e,t)}function a(e){i(e.parentNode,$(e))}function s(e){i(e.parentNode,$(e)+1)}function l(e){o(e.parentNode,$(e))}function c(e){o(e.parentNode,$(e)+1)}function d(e){e?(M[U]=M[V],M[q]=M[W]):(M[V]=M[U],M[W]=M[q]),M.collapsed=F}function u(e){a(e),c(e)}function f(e){i(e,0),o(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function m(e,t){var n=M[V],r=M[W],i=M[U],o=M[q],a=t.startContainer,s=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?_(n,r,a,s):1===e?_(i,o,a,s):2===e?_(i,o,l,c):3===e?_(n,r,l,c):void 0}function p(){k(I)}function h(){return k(P)}function g(){return k(O)}function v(e){var t,r,i=this[V],o=this[W];3!==i.nodeType&&4!==i.nodeType||!i.nodeValue?(i.childNodes.length>0&&(r=i.childNodes[o]),r?i.insertBefore(e,r):3==i.nodeType?n.insertAfter(e,i):i.appendChild(e)):o?o>=i.nodeValue.length?n.insertAfter(e,i):(t=i.splitText(o),i.parentNode.insertBefore(e,t)):i.parentNode.insertBefore(e,i)}function y(e){var t=M.extractContents();M.insertNode(e),e.appendChild(t),M.selectNode(e)}function b(){return j(new t(n),{startContainer:M[V],startOffset:M[W],endContainer:M[U],endOffset:M[q],collapsed:M.collapsed,commonAncestorContainer:M.commonAncestorContainer})}function C(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n||e}function x(){return M[V]==M[U]&&M[W]==M[q]}function _(e,t,r,i){var o,a,s,l,c,d;if(e==r)return t==i?0:i>t?-1:1;for(o=r;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(a=0,s=e.firstChild;s!=o&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(o=e;o&&o.parentNode!=r;)o=o.parentNode;if(o){for(a=0,s=r.firstChild;s!=o&&i>a;)a++,s=s.nextSibling;return i>a?-1:1}for(l=n.findCommonAncestor(e,r),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),d=r;d&&d.parentNode!=l;)d=d.parentNode;if(d||(d=l),c==d)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==d)return 1;s=s.nextSibling}}function w(e,t,r){var i,o;for(e?(M[V]=t,M[W]=r):(M[U]=t,M[q]=r),i=M[U];i.parentNode;)i=i.parentNode;for(o=M[V];o.parentNode;)o=o.parentNode;o==i?_(M[V],M[W],M[U],M[q])>0&&M.collapse(e):M.collapse(e),M.collapsed=x(),M.commonAncestorContainer=n.findCommonAncestor(M[V],M[U])}function k(e){var t,n,r,i,o,a,s,l=0,c=0;if(M[V]==M[U])return E(e);for(n=(t=M[U]).parentNode;n;t=n,n=n.parentNode){if(n==M[V])return N(t,e);++l}for(n=(t=M[V]).parentNode;n;t=n,n=n.parentNode){if(n==M[U])return S(t,e);++c}for(r=c-l,i=M[V];r>0;)i=i.parentNode,r--;for(o=M[U];0>r;)o=o.parentNode,r++;for(a=i.parentNode,s=o.parentNode;a!=s;a=a.parentNode,s=s.parentNode)i=a,o=s;return T(i,o,e)}function E(e){var t,n,i,o,a,s,l,c;if(e!=I&&(t=r()),M[W]==M[q])return t;if(3==M[V].nodeType){if(n=M[V].nodeValue.substring(M[W],M[q]),e!=O&&(i=M[V],l=M[W],c=M[q]-M[W],0===l&&c>=i.nodeValue.length-1?i.parentNode.removeChild(i):i.deleteData(l,c),M.collapse(F)),e==I)return;return n.length>0&&t.appendChild(D.createTextNode(n)),t}for(i=C(M[V],M[W]),o=M[q]-M[W];i&&o>0;)a=i.nextSibling,s=H(i,e),t&&t.appendChild(s),--o,i=a;return e!=O&&M.collapse(F),t}function N(e,t){var n,i,o,a,s;if(t!=I&&(n=r()),i=R(e,t),n&&n.appendChild(i),0>=(o=$(e)-M[W]))return t!=O&&(M.setEndBefore(e),M.collapse(z)),n;for(i=e.previousSibling;o>0;)a=i.previousSibling,s=H(i,t),n&&n.insertBefore(s,n.firstChild),--o,i=a;return t!=O&&(M.setEndBefore(e),M.collapse(z)),n}function S(e,t){var n,i,o,a,s,l;for(t!=I&&(n=r()),o=A(e,t),n&&n.appendChild(o),i=$(e),++i,a=M[q]-i,o=e.nextSibling;o&&a>0;)s=o.nextSibling,l=H(o,t),n&&n.appendChild(l),--a,o=s;return t!=O&&(M.setStartAfter(e),M.collapse(F)),n}function T(e,t,n){var i,o,a,s,l,c;for(n!=I&&(o=r()),i=A(e,n),o&&o.appendChild(i),e.parentNode,a=$(e),s=$(t)-++a,l=e.nextSibling;s>0;)c=l.nextSibling,i=H(l,n),o&&o.appendChild(i),l=c,--s;return i=R(t,n),o&&o.appendChild(i),n!=O&&(M.setStartAfter(e),M.collapse(F)),o}function R(e,t){var n,r,i,o,a,s=C(M[U],M[q]-1),l=s!=M[U];if(s==e)return B(s,l,z,t);for(r=B(n=s.parentNode,z,z,t);n;){for(;s;)i=s.previousSibling,o=B(s,l,z,t),t!=I&&r.insertBefore(o,r.firstChild),l=F,s=i;if(n==e)return r;s=n.previousSibling,a=B(n=n.parentNode,z,z,t),t!=I&&a.appendChild(r),r=a}}function A(e,t){var n,r,i,o,a,s=C(M[V],M[W]),l=s!=M[V];if(s==e)return B(s,l,F,t);for(r=B(n=s.parentNode,z,F,t);n;){for(;s;)i=s.nextSibling,o=B(s,l,F,t),t!=I&&r.appendChild(o),l=F,s=i;if(n==e)return r;s=n.nextSibling,a=B(n=n.parentNode,z,F,t),t!=I&&a.appendChild(r),r=a}}function B(e,t,r,i){var o,a,s,l,c;if(t)return H(e,i);if(3==e.nodeType){if(o=e.nodeValue,r?(l=M[W],a=o.substring(l),s=o.substring(0,l)):(l=M[q],a=o.substring(0,l),s=o.substring(l)),i!=O&&(e.nodeValue=s),i==I)return;return(c=n.clone(e,z)).nodeValue=a,c}return i!=I?n.clone(e,z):void 0}function H(e,t){return t!=I?t==O?n.clone(e,F):e:void e.parentNode.removeChild(e)}function L(){return n.create("body",null,g()).outerText}var M=this,D=n.doc,P=0,O=1,I=2,F=!0,z=!1,W="startOffset",V="startContainer",U="endContainer",q="endOffset",j=e.extend,$=n.nodeIndex;return j(M,{startContainer:D,startOffset:0,endContainer:D,endOffset:0,collapsed:F,commonAncestorContainer:D,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:o,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:c,collapse:d,selectNode:u,selectNodeContents:f,compareBoundaryPoints:m,deleteContents:p,extractContents:h,cloneContents:g,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:L}),M}return t.prototype.toString=function(){return this.toStringIE()},t}),r(m,[u],function(e){function t(e){var t;return(t=document.createElement("div")).innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,o,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),i[r]||(o="&"+e[n+1]+";",a[r]=o,a[o]=r);return a}}var r,i,o,a=e.makeMap,s=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,d=/&(#x|#)?([\w]+);/g,u={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},r=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||r,e.replace(t?s:l,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?s:l,function(e){return i[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||r,(e=a(e.replace(/\+/g,","))).named&&e.numeric?o:e.named?t?c:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(d,function(e,n,i){return n?(i=parseInt(i,2===n.length?16:10))>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):u[i]||String.fromCharCode(i):o[e]||r[e]||t(e)})}};return f}),r(p,[],function(){var e,t,n,r,i,o=navigator,a=o.userAgent;return e=window.opera&&window.opera.buildNumber,n=(n=!(t=/WebKit/.test(a))&&!e&&/MSIE/gi.test(a)&&/Explorer/gi.test(o.appName))&&/MSIE (\w+)\./.exec(a)[1],r=-1!=a.indexOf("Trident/")&&(-1!=a.indexOf("rv:")||-1!=o.appName.indexOf("Netscape"))&&11,{opera:e,webkit:t,ie:n=n||r,gecko:!t&&!r&&/Gecko/.test(a),mac:-1!=a.indexOf("Mac"),iOS:i=/(iPad|iPhone)/.test(a),contentEditable:!i||a.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:window.getSelection&&"Range"in window,documentMode:n?document.documentMode||7:10}}),r(h,[s,l,c,d,f,m,p,u],function(e,n,r,i,o,a,s,l){function c(e,t){var i,o=this;o.doc=e,o.win=window,o.files={},o.counter=0,o.stdMode=!g||e.documentMode>=8,o.boxModel=!g||"CSS1Compat"==e.compatMode||o.stdMode,o.hasOuterHTML="outerHTML"in e.createElement("a"),this.boundEvents=[],o.settings=t=p({keep_values:!1,hex_colors:1},t),o.schema=t.schema,o.styles=new n({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),o.fixDoc(e),o.events=t.ownEvents?new r(t.proxy):r.Event,i=t.schema?t.schema.getBlockElements():{},o.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!i[e.nodeName]):!!i[e]}}var d=l.each,u=l.is,f=l.grep,m=l.trim,p=l.extend,h=s.webkit,g=s.ie,v=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/,b=l.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");return c.prototype={root:null,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},fixDoc:function(e){var t,n=this.settings;if(g&&n.schema)for(t in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)}),n.schema.getCustomElements())e.createElement(t)},clone:function(e,t){var n,r,i=this;return!g||1!==e.nodeType||t?e.cloneNode(t):(r=i.doc,t?n.firstChild:(n=r.createElement(e.nodeName),d(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return t=(e=e||this.win).document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,r=this;return e=r.get(e),t=r.getPos(e),n=r.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,r=this;return e=r.get(e),t=r.getStyle(e,"width"),n=r.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var o,a=this,s=[];for(e=a.get(e),i=i===t,r=r||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),u(n,"string")&&(o=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return a.is(e,o)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;s.push(e)}e=e.parentNode}return i?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(v.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}return(!n.nodeType||1==n.nodeType)&&e.matches(r,n.nodeType?[n]:n).length>0},add:function(e,t,n,r,i){var o=this;return this.run(e,function(e){var a;return a=u(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):o.setHTML(a,r)),i?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r,i="";for(r in i+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&(i+=" "+r+'="'+this.encode(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(e){var t,n,r,i=this.doc;for(r=i.createElement("div"),t=i.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},remove:function(e,t){return this.run(e,function(e){var n,r=e.parentNode;if(!r)return null;if(t)for(;n=e.firstChild;)!g||3!==n.nodeType||n.nodeValue?r.insertBefore(n,e):e.removeChild(n);return r.removeChild(e)})},setStyle:function(e,t,n){return this.run(e,function(e){var r,i,o=this;if(t)if("string"==typeof t){r=e.style,t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"number"!=typeof n||b[t]||(n+="px"),"opacity"===t&&e.runtimeStyle&&"undefined"==typeof e.runtimeStyle.opacity&&(r.filter=""===n?"":"alpha(opacity="+100*n+")"),"float"==t&&(t="cssFloat"in e.style?"cssFloat":"styleFloat");try{r[t]=n}catch(a){}o.settings.update_styles&&e.removeAttribute("data-mce-style")}else for(i in t)o.setStyle(e,i,t[i])})},getStyle:function(e,n,r){if(e=this.get(e)){if(this.doc.defaultView&&r){n=n.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(n)}catch(i){return null}}return"float"==(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(n=g?"styleFloat":"cssFloat"),e.currentStyle&&r?e.currentStyle[n]:e.style?e.style[n]:t}},setStyles:function(e,t){this.setStyle(e,t)},css:function(e,t,n){this.setStyle(e,t,n)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this;if(e&&t)return this.run(e,function(e){var i=r.settings,o=e.getAttribute(t);if(null!==n)switch(t){case"style":if(!u(n,"string"))return void d(n,function(t,n){r.setStyle(e,n,t)});i.keep_values&&(n?e.setAttribute("data-mce-style",n,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=n;break;case"class":e.className=n||"";break;case"src":case"href":i.keep_values&&(i.url_converter&&(n=i.url_converter.call(i.url_converter_scope||r,n,t,e)),r.setAttrib(e,"data-mce-"+t,n,2));break;case"shape":e.setAttribute("data-mce-style",n)}u(n)&&null!==n&&0!==n.length?e.setAttribute(t,""+n,2):e.removeAttribute(t,2),o!=n&&i.onSetAttrib&&i.onSetAttrib({attrElm:e,attrName:t,attrValue:n})})},setAttribs:function(e,t){var n=this;return this.run(e,function(e){d(t,function(t,r){n.setAttrib(e,r,t)})})},getAttrib:function(e,t,n){var r,i,o=this;if(!(e=o.get(e))||1!==e.nodeType)return n!==i&&n;if(u(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(r=e.getAttribute("data-mce-"+t)))return r;if(g&&o.props[t]&&(r=(r=e[o.props[t]])&&r.nodeValue?r.nodeValue:r),r||(r=e.getAttribute(t,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(t))return!0===e[o.props[t]]&&""===r?t:r?t:"";if("FORM"===e.nodeName&&e.getAttributeNode(t))return e.getAttributeNode(t).nodeValue;if("style"===t&&((r=r||e.style.cssText)&&(r=o.serializeStyle(o.parseStyle(r),e.nodeName),o.settings.keep_values&&e.setAttribute("data-mce-style",r))),h&&"class"===t&&r&&(r=r.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),g)switch(t){case"rowspan":case"colspan":1===r&&(r="");break;case"size":("+0"===r||20===r||0===r)&&(r="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===r&&(r="");break;case"hspace":-1===r&&(r="");break;case"maxlength":case"tabindex":(32768===r||2147483647===r||"32768"===r)&&(r="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===r?t:n;case"shape":r=r.toLowerCase();break;default:0===t.indexOf("on")&&r&&(r=(""+r).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return r!==i&&null!==r&&""!==r?""+r:n},getPos:function(e,t){var n,r,i=this,o=0,a=0,s=i.doc;if(e=i.get(e),t=t||s.body,e){if(t===s.body&&e.getBoundingClientRect)return r=e.getBoundingClientRect(),t=i.boxModel?s.documentElement:s.body,{x:o=r.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-t.clientTop,y:a=r.top+(s.documentElement.scrollTop||s.body.scrollTop)-t.clientLeft};for(n=e;n&&n!=t&&n.nodeType;)o+=n.offsetLeft||0,a+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)o-=n.scrollLeft||0,a-=n.scrollTop||0,n=n.parentNode}return{x:o,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,r=this,i=r.doc;if(r!==c.DOM&&i===document){var o=c.DOM.addedStyles;if((o=o||[])[e])return;o[e]=!0,c.DOM.addedStyles=o}(n=i.getElementById("mceDefaultStyles"))||((n=i.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=i.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(i.createTextNode(e))},loadCSS:function(e){var t,n=this,r=n.doc;return n!==c.DOM&&r===document?void c.DOM.loadCSS(e):(e||(e=""),t=r.getElementsByTagName("head")[0],void d(e.split(","),function(e){var i;n.files[e]||(n.files[e]=!0,i=n.create("link",{rel:"stylesheet",href:e}),g&&r.documentMode&&r.recalc&&(i.onload=function(){r.recalc&&r.recalc(),i.onload=null}),t.appendChild(i))}))},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=n=(""!==n?n+" ":"")+t,n):0})},removeClass:function(e,t){var n,r=this;return r.run(e,function(e){var i;return r.hasClass(e,t)?(n||(n=new RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),i=e.className.replace(n," "),i=m(" "!=i?i:""),e.className=i,i||(e.removeAttribute("class"),e.removeAttribute("className")),i):e.className})},hasClass:function(e,t){return!(!(e=this.get(e))||!t)&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},toggleClass:function(e,n,r){r=r===t?!this.hasClass(e,n):r,this.hasClass(e,n)!==r&&(r?this.addClass(e,n):this.removeClass(e,n))},show:function(e){return this.setStyle(e,"display","block")
},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return!(e=this.get(e))||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,t){var n=this;return n.run(e,function(e){if(g){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(r){var i=n.create("div");i.innerHTML="<br />"+t,d(f(i.childNodes),function(t,n){n&&e.canHaveHTML&&e.appendChild(t)})}}else e.innerHTML=t;return t})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:((t=(e.ownerDocument||n.doc).createElement("body")).appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var r=this;return r.run(e,function(e){function i(){var i,o;for((o=n.createElement("body")).innerHTML=t,i=o.lastChild;i;)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}if(1==e.nodeType)if(n=n||e.ownerDocument||r.doc,g)try{1==e.nodeType&&r.hasOuterHTML?e.outerHTML=t:i()}catch(o){i()}else i()})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,(r=t.nextSibling)?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){return this.run(t,function(t){return u(t,"array")&&(e=e.cloneNode(!0)),n&&d(f(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,r=this;return e.nodeName!=t.toUpperCase()&&(n=r.create(t),d(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!=n;)n=n.parentNode;if(r==n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return this.styles.toHex(l.trim(e))},run:function(e,t,n){var r,i=this;return"string"==typeof e&&(e=i.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(r=[],d(e,function(e,o){e&&("string"==typeof e&&(e=i.get(e)),r.push(t.call(n,e,o)))}),r))},getAttribs:function(e){var t;if(!(e=this.get(e)))return[];if(g){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,r,o,a,s=this,l=0;if(e=e.firstChild){o=new i(e,e.parentNode),t=t||s.schema?s.schema.getNonEmptyElements():null;do{if(1===(r=e.nodeType)){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"===a){l++;continue}return!1}for(s.getAttribs(e),n=e.attributes.length;n--;)if("name"===(a=e.attributes[n].nodeName)||"data-mce-bookmark"===a)return!1}if(8==r)return!1;if(3===r&&!y.test(e.nodeValue))return!1}while(e=o.next())}return 1>=l},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new o(this)},nodeIndex:function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=n&&e.nodeValue.length)&&(i++,n=r);return i},split:function(e,t,n){function r(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,i=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=i.length-1;n>=0;n--)r(i[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var a=m(e.nodeValue).length;if(!s.isBlock(e.parentNode)||a>0||0===a&&t(e))return}else if(1==o&&(1==(i=e.childNodes).length&&i[0]&&1==i[0].nodeType&&"bookmark"==i[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(i[0],e),i.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var i,o,a,s=this,l=s.createRng();return e&&t?(l.setStart(e.parentNode,s.nodeIndex(e)),l.setEnd(t.parentNode,s.nodeIndex(t)),i=l.extractContents(),(l=s.createRng()).setStart(t.parentNode,s.nodeIndex(t)+1),l.setEnd(e.parentNode,s.nodeIndex(e)+1),o=l.extractContents(),(a=e.parentNode).insertBefore(r(i),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(r(o),e),s.remove(e),n||t):void 0},bind:function(e,t,n,r){var i=this;if(l.isArray(e)){for(var o=e.length;o--;)e[o]=i.bind(e[o],t,n,r);return e}return!i.settings.collect||e!==i.doc&&e!==i.win||i.boundEvents.push([e,t,n,r]),i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r,i=this;if(l.isArray(e)){for(r=e.length;r--;)e[r]=i.unbind(e[r],t,n);return e}if(i.boundEvents&&(e===i.doc||e===i.win))for(r=i.boundEvents.length;r--;){var o=i.boundEvents[r];e!=o[0]||t&&t!=o[1]||n&&n!=o[2]||this.events.unbind(o[0],o[1],o[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var r=t.boundEvents[n];this.events.unbind(r[0],r[1],r[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},c.DOM=new c(document),c}),r(g,[h,u],function(e,t){function n(){function e(e,t){function n(){s.remove(a),o&&(o.onreadystatechange=o.onload=o=null),t()}function i(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var o,a,s=r;a=s.uniqueId(),(o=document.createElement("script")).id=a,o.type="text/javascript",o.src=e,"onreadystatechange"in o?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()}:o.onload=n,o.onerror=i,(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}var t,n=0,a=1,s=2,l={},c=[],d={},u=[],f=0;this.isDone=function(e){return l[e]==s},this.markDone=function(e){l[e]=s},this.add=this.load=function(e,r,i){l[e]==t&&(c.push(e),l[e]=n),r&&(d[e]||(d[e]=[]),d[e].push({func:r,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(c,e,t)},this.loadScripts=function(n,r,c){function m(e){i(d[e],function(e){e.func.call(e.scope)}),d[e]=t}var p;u.push({func:r,scope:c||this}),(p=function(){var t=o(n);n.length=0,i(t,function(t){return l[t]==s?void m(t):void(l[t]!=a&&(l[t]=a,f++,e(t,function(){l[t]=s,f--,m(t),p()})))}),f||(i(u,function(e){e.func.call(e.scope)}),u.length=0)})()}}var r=e.DOM,i=t.each,o=t.grep;return n.ScriptLoader=new n,n}),r(v,[g,u],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){if(r.language&&!1!==r.languageLoad){if(n&&!1===new RegExp("([, ]|\\b)"+r.language+"([, ]|\\b)").test(n))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+r.language+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,o,a,s){function l(){var r=c.dependencies(n);i(r,function(e){var n=c.createUrl(o,e);c.load(n.resource,n,t,t)}),a&&(s?a.call(s):a.call(e))}var c=this,d=o;c.urls[n]||("object"==typeof o&&(d=o.prefix+o.resource+o.suffix),0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=r.baseURL+"/"+d),c.urls[n]=d.substring(0,d.lastIndexOf("/")),c.lookup[n]?l():e.ScriptLoader.add(d,l,s))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(y,[],function(){function e(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,r,i,o=this;if("string"!=typeof e){for(r in e)o.attr(r,e[r]);return o}if(n=o.attributes){if(t!==i){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),o;return o}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,o}return n.map[e]}},clone:function(){var e,n,r,i,o,a=this,s=new t(a.name,a.type);if(r=a.attributes){for((o=[]).map={},e=0,n=r.length;n>e;e++)"id"!==(i=r[e]).name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),(t=n.lastChild)?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n,r=this,i=[];for(n=r.firstChild;n;n=e(n,r))n.name===t&&i.push(n);return i},empty:function(){var t,n,r,i=this;if(i.firstChild){for(t=[],r=i.firstChild;r;r=e(r,i))t.push(r);for(n=t.length;n--;)(r=t[n]).parent=r.firstChild=r.lastChild=r.next=r.prev=null}return i.firstChild=i.lastChild=null,i},isEmpty:function(t){var r,i,o=this,a=o.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(r=a.attributes.length;r--;)if("name"===(i=a.attributes[r].name)||0===i.indexOf("data-mce-"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1}while(a=e(a,o));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,o;if(i=new t(e,r[e]||1),n)for(o in n)i.attr(o,n[o]);return i},t}),r(b,[u],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,r){function i(e){var t,n,r={};for(t=0,n=e.length;n>t;t++)r[e[t]]={};return r}var o,s,l,c=arguments;for(n=n||"","string"==typeof(r=r||[])&&(r=t(r)),s=3;s<c.length;s++)"string"==typeof c[s]&&(c[s]=t(c[s])),r.push.apply(r,c[s]);for(o=(e=t(e)).length;o--;)l=[].concat(a,t(n)),f[e[o]]={attributes:i(l),attributesOrder:l,children:i(r)}}function i(e,n){var r,i,o,a;for(r=(e=t(e)).length,n=t(n);r--;)for(i=f[e[r]],o=0,a=n.length;a>o;o++)i.attributes[n[o]]={},i.attributesOrder.push(n[o])}var a,s,l,c,d,u,f={};return r[e]?r[e]:(a=t("id accesskey class dir lang style tabindex title"),t("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting"),s=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),l=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(a.push.apply(a,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),s.push.apply(s,t("article aside details dialog figure header footer hgroup section nav")),l.push.apply(l,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(a.push("xml:lang"),u=t("acronym applet basefont big font strike tt"),l.push.apply(l,u),o(u,function(e){n(e,"",l)}),d=t("center dir isindex noframes"),s.push.apply(s,d),c=[].concat(s,l),o(d,function(e){n(e,"",c)})),c=c||[].concat(s,l),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),n("address dt dd div caption","",c),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),n("blockquote","cite",c),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",c),n("dl","","dt dd"),n("a","href target rel media hreflang type",l),n("q","cite",l),n("ins del","cite datetime",c),n("img","src alt usemap ismap width height"),n("iframe","src name width height",c),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",c,"param"),n("param","name value"),n("map","name",c,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",c),n("th","colspan rowspan headers scope abbr",c),n("form","accept-charset action autocomplete enctype method name novalidate target",c),n("fieldset","disabled form name",c,"legend"),n("label","form for",l),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?c:l),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",c,"li"),n("noscript","",c),"html4"!=e&&(n("wbr"),n("ruby","",l,"rt rp"),n("figcaption","",c),n("mark rt rp summary bdi","",l),n("canvas","width height",c),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height",c,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls",c,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",l,"option"),n("article section nav aside header footer","",c),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",c,"figcaption"),n("time","datetime",l),n("dialog","open",c),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",l),n("progress","value max",l),n("meter","value min max low high optimum",l),n("details","open",c,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid codebase codetype archive standby align border hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","srcdoc sandbox seamless allowfullscreen")),o(t("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,r[e]=f,f)}var r={},i=e.makeMap,o=e.each,a=e.extend,s=e.explode,l=e.inArray;return function(e){function c(t,n,o){var s=e[t];return s?s=i(s,",",i(s.toUpperCase()," ")):(s=r[t])||(s=i(n," ",i(n.toUpperCase()," ")),s=a(s,o),r[t]=s),s}function d(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function u(e){var n,r,o,a,s,c,u,f,m,p,h,g,v,y,b,C,x,_,w,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,E=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e)for(e=t(e,","),N["@"]&&(C=N["@"].attributes,x=N["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(s=k.exec(e[n])){if(y=s[1],m=s[2],b=s[3],f=s[5],c={attributes:g={},attributesOrder:v=[]},"#"===y&&(c.paddEmpty=!0),"-"===y&&(c.removeEmpty=!0),"!"===s[4]&&(c.removeEmptyAttrs=!0),C){for(_ in C)g[_]=C[_];v.push.apply(v,x)}if(f)for(o=0,a=(f=t(f,"|")).length;a>o;o++)if(s=E.exec(f[o])){if(u={},h=s[1],p=s[2].replace(/::/g,":"),y=s[3],w=s[4],"!"===h&&(c.attributesRequired=c.attributesRequired||[],c.attributesRequired.push(p),u.required=!0),"-"===h){delete g[p],v.splice(l(v,p),1);continue}y&&("="===y&&(c.attributesDefault=c.attributesDefault||[],c.attributesDefault.push({name:p,value:w}),u.defaultValue=w),":"===y&&(c.attributesForced=c.attributesForced||[],c.attributesForced.push({name:p,value:w}),u.forcedValue=w),"<"===y&&(u.validValues=i(w,"?"))),S.test(p)?(c.attributePatterns=c.attributePatterns||[],u.pattern=d(p),c.attributePatterns.push(u)):(g[p]||v.push(p),g[p]=u)}C||"@"!=m||(C=g,x=v),b&&(c.outputName=m,N[b]=c),S.test(m)?(c.pattern=d(m),T.push(c)):N[m]=c}}function f(e){N={},T=[],u(e),o(v,function(e,t){S[t]=e.children})}function m(e){var n=/^(~)?(.+)$/;e&&o(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",s=t[2];if(S[s]=S[i],R[s]=i,r||(_[s.toUpperCase()]={},_[s]={}),!N[s]){var l=N[i];delete(l=a({},l)).removeEmptyAttrs,delete l.removeEmpty,N[s]=l}o(S,function(e){e[i]&&(e[s]=e[i])})})}function p(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&o(t(e,","),function(e){var r,i,a=n.exec(e);a&&(i=a[1],r=i?S[a[2]]:S[a[2]]={"#comment":{}},r=S[a[2]],o(t(a[3],"|"),function(e){"-"===i?delete r[e]:r[e]={}}))})}function h(e){var t,n=N[e];if(n)return n;for(t=T.length;t--;)if((n=T[t]).pattern.test(e))return n}var g,v,y,b,C,x,_,w,k,E=this,N={},S={},T=[],R={},A={};v=n((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),e.valid_styles&&(g={},o(e.valid_styles,function(e,t){g[t]=s(e)})),y=c("whitespace_elements","pre script noscript style textarea video audio iframe object"),b=c("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=c("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=c("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),w=c("non_empty_elements","td th iframe video audio object script",C),k=c("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),_=c("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",k),o((e.special||"script noscript style textarea").split(" "),function(e){A[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?f(e.valid_elements):(o(v,function(e,t){N[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},S[t]=e.children}),"html5"!=e.schema&&o(t("strong/b em/i"),function(e){e=t(e,"/"),N[e[1]].outputName=e[0]}),N.img.attributesDefault=[{name:"alt",value:""}],o(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){N[e]&&(N[e].removeEmpty=!0)}),o(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){N[e].paddEmpty=!0}),o(t("span"),function(e){N[e].removeEmptyAttrs=!0})),m(e.custom_elements),p(e.valid_children),u(e.extended_valid_elements),p("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&o(s(e.invalid_elements),function(e){N[e]&&delete N[e]}),h("span")||u("span[!data-mce-type|*]"),E.children=S,E.styles=g,E.getBoolAttrs=function(){return x},E.getBlockElements=function(){return _},E.getTextBlockElements=function(){return k},E.getShortEndedElements=function(){return C},E.getSelfClosingElements=function(){return b},E.getNonEmptyElements=function(){return w},E.getWhiteSpaceElements=function(){return y},E.getSpecialElements=function(){return A},E.isValidChild=function(e,t){var n=S[e];return!(!n||!n[t])},E.isValid=function(e,t){var n,r,i=h(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},E.getElementRule=h,E.getCustomElements=function(){return R},E.addValidElements=u,E.setValidElements=f,E.addCustomElements=m,E.addValidChildren=p,E.elements=N}}),r(C,[b,m,u],function(e,t,n){var r=n.each;return function(i,o){var a=this,s=function(){};i=i||{},a.schema=o=o||new e,!1!==i.fix_self_closing&&(i.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(a[e]=i[e]||s)}),a.parse=function(e){function r(e){var t,n;for(t=O.length;t--&&O[t].name!==e;);if(t>=0){for(n=O.length-1;n>=t;n--)(e=O[n]).valid&&D.end(e.name);O.length=t}}function a(e,t,n,r,o){var a,s,c=/[\s\u0000-\u001F]+/g;if(n=(t=t.toLowerCase())in v?t:F(n||r||o||""),b&&!p&&0!==t.indexOf("data-")){if(!(a=k[t])&&E){for(s=E.length;s--&&!(a=E[s]).pattern.test(t););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(z[t]&&!i.allow_script_urls){var u=n.replace(c,"");try{if(u=decodeURIComponent(u),W.test(u))return}catch(l){if(u=unescape(u),W.test(u))return}}d.map[t]=n,d.push({name:t,value:n})}var s,l,c,d,u,f,m,p,h,g,v,y,b,C,x,_,w,k,E,N,S,T,R,A,B,H,L,M,D=this,P=0,O=[],I=0,F=t.decode,z=n.makeMap("src,href"),W=/(java|vb)script:/i;for(A=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),B=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,g=o.getShortEndedElements(),R=i.self_closing_elements||o.getSelfClosingElements(),v=o.getBoolAttrs(),b=i.validate,h=i.remove_internals,M=i.fix_self_closing,H=o.getSpecialElements();s=A.exec(e);){if(P<s.index&&D.text(F(e.substr(P,s.index-P))),l=s[6])":"===(l=l.toLowerCase()).charAt(0)&&(l=l.substr(1)),r(l);else if(l=s[7]){if(":"===(l=l.toLowerCase()).charAt(0)&&(l=l.substr(1)),y=l in g,M&&R[l]&&O.length>0&&O[O.length-1].name===l&&r(l),!b||(C=o.getElementRule(l))){if(x=!0,b&&(k=C.attributes,E=C.attributePatterns),(w=s[8])?((p=-1!==w.indexOf("data-mce-type"))&&h&&(x=!1),(d=[]).map={},w.replace(B,a)):(d=[]).map={},b&&!p){if(N=C.attributesRequired,S=C.attributesDefault,T=C.attributesForced,C.removeEmptyAttrs&&!d.length&&(x=!1),T)for(u=T.length;u--;)m=(_=T[u]).name,"{$uid}"===(L=_.value)&&(L="mce_"+I++),d.map[m]=L,d.push({name:m,value:L});if(S)for(u=S.length;u--;)(m=(_=S[u]).name)in d.map||("{$uid}"===(L=_.value)&&(L="mce_"+I++),d.map[m]=L,d.push({name:m,value:L}));if(N){for(u=N.length;u--&&!(N[u]in d.map););-1===u&&(x=!1)}d.map["data-mce-bogus"]&&(x=!1)}x&&D.start(l,d,y)}else x=!1;if(c=H[l]){c.lastIndex=P=s.index+s[0].length,(s=c.exec(e))?(x&&(f=e.substr(P,s.index-P)),P=s.index+s[0].length):(f=e.substr(P),P=e.length),x&&(f.length>0&&D.text(f,!0),D.end(l)),A.lastIndex=P;continue}y||(w&&w.indexOf("/")==w.length-1?x&&D.end(l):O.push({name:l,valid:x}))}else(l=s[1])?(">"===l.charAt(0)&&(l=" "+l),i.allow_conditional_comments||"[if"!==l.substr(0,3)||(l=" "+l),D.comment(l)):(l=s[2])?D.cdata(l):(l=s[3])?D.doctype(l):(l=s[4])&&D.pi(l,s[5]);P=s.index+s[0].length}for(P<e.length&&D.text(F(e.substr(P))),u=O.length-1;u>=0;u--)(l=O[u]).valid&&D.end(l.name)}}}),r(x,[y,b,C,u],function(e,t,n,r){var i=r.makeMap,o=r.each,a=r.explode,s=r.extend;return function(r,l){function c(t){var n,r,o,a,s,c,u,f,m,p,h,g,v,y;for(h=i("tr,td,th,tbody,thead,tfoot,table"),p=l.getNonEmptyElements(),g=l.getTextBlockElements(),n=0;n<t.length;n++)if((r=t[n]).parent&&!r.fixed)if(g[r.name]&&"li"==r.parent.name){for(v=r.next;v&&g[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(a=[r],o=r.parent;o&&!l.isValidChild(o.name,r.name)&&!h[o.name];o=o.parent)a.push(o);if(o&&a.length>1){for(a.reverse(),s=c=d.filterNode(a[0].clone()),m=0;m<a.length-1;m++){for(l.isValidChild(c.name,a[m].name)?(u=d.filterNode(a[m].clone()),c.append(u)):u=c,f=a[m].firstChild;f&&f!=a[m+1];)y=f.next,u.append(f),f=y;c=u}s.isEmpty(p)?o.insert(r,a[0],!0):(o.insert(s,a[0],!0),o.insert(r,s)),((o=a[0]).isEmpty(p)||o.firstChild===o.lastChild&&"br"===o.firstChild.name)&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(d.filterNode(new e("ul",1)));continue}l.isValidChild(r.parent.name,"div")&&l.isValidChild("div",r.name)?r.wrap(d.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var d=this,u={},f=[],m={},p={};(r=r||{}).validate=!("validate"in r)||r.validate,r.root_name=r.root_name||"body",d.schema=l=l||new t,d.filterNode=function(e){var t,n,r;n in u&&((r=m[n])?r.push(e):m[n]=[e]),t=f.length;for(;t--;)(n=f[t].name)in e.attributes.map&&((r=p[n])?r.push(e):p[n]=[e]);return e},d.addNodeFilter=function(e,t){o(a(e),function(e){var n=u[e];n||(u[e]=n=[]),n.push(t)})},d.addAttributeFilter=function(e,t){o(a(e),function(e){var n;for(n=0;n<f.length;n++)if(f[n].name===e)return void f[n].callbacks.push(t);f.push({name:e,callbacks:[t]})})},d.parse=function(t,o){function a(){function e(e){e&&((i=e.firstChild)&&3==i.type&&(i.value=i.value.replace(R,"")),(i=e.lastChild)&&3==i.type&&(i.value=i.value.replace(B,"")))}var t,n,i=y.firstChild;if(l.isValidChild(y.name,O.toLowerCase())){for(;i;)t=i.next,3==i.type||1==i.type&&"p"!==i.name&&!T[i.name]&&!i.attr("data-mce-type")?n?n.append(i):((n=d(O,1)).attr(r.forced_root_block_attrs),y.insert(n,i),n.append(i)):(e(n),n=null),i=t;e(n)}}function d(t,n){var r,i=new e(t,n);return t in u&&((r=m[t])?r.push(i):m[t]=[i]),i}function h(e){var t,n,r;for(t=e.prev;t&&3===t.type;)(n=t.value.replace(B,"")).length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function g(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var v,y,b,C,x,_,w,k,E,N,S,T,R,A,B,H,L,M,D,P,O,I=[];if(o=o||{},m={},p={},T=s(i("script,style,head,html,body,title,meta,param"),l.getBlockElements()),P=l.getNonEmptyElements(),D=l.children,S=r.validate,O="forced_root_block"in o?o.forced_root_block:r.forced_root_block,M=l.getWhiteSpaceElements(),R=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,H=/[ \t\r\n]+/g,L=/^[ \t\r\n]+$/,v=new n({validate:S,allow_script_urls:r.allow_script_urls,allow_conditional_comments:r.allow_conditional_comments,self_closing_elements:g(l.getSelfClosingElements()),cdata:function(e){b.append(d("#cdata",4)).value=e},text:function(e,t){var n;A||(e=e.replace(H," "),b.lastChild&&T[b.lastChild.name]&&(e=e.replace(R,""))),0!==e.length&&((n=d("#text",3)).raw=!!t,b.append(n).value=e)},comment:function(e){b.append(d("#comment",8)).value=e},pi:function(e,t){b.append(d(e,7)).value=t,h(b)},doctype:function(e){b.append(d("#doctype",10)).value=e,h(b)},start:function(e,t,n){var r,i,o,a,s;if(o=S?l.getElementRule(e):{}){for((r=d(o.outputName||e,1)).attributes=t,r.shortEnded=n,b.append(r),(s=D[b.name])&&D[r.name]&&!s[r.name]&&I.push(r),i=f.length;i--;)(a=f[i].name)in t.map&&((E=p[a])?E.push(r):p[a]=[r]);T[e]&&h(r),n||(b=r),!A&&M[e]&&(A=!0)}},end:function(t){var n,r,i,o,a;if(r=S?l.getElementRule(t):{}){if(T[t]&&!A){if((n=b.firstChild)&&3===n.type)if((i=n.value.replace(R,"")).length>0)n.value=i,n=n.next;else for(o=n.next,n.remove(),n=o;n&&3===n.type;)i=n.value,o=n.next,(0===i.length||L.test(i))&&(n.remove(),n=o),n=o;if((n=b.lastChild)&&3===n.type)if((i=n.value.replace(B,"")).length>0)n.value=i,n=n.prev;else for(o=n.prev,n.remove(),n=o;n&&3===n.type;)i=n.value,o=n.prev,(0===i.length||L.test(i))&&(n.remove(),n=o),n=o}if(A&&M[t]&&(A=!1),(r.removeEmpty||r.paddEmpty)&&b.isEmpty(P))if(r.paddEmpty)b.empty().append(new e("#text","3")).value="\xa0";else if(!b.attributes.map.name&&!b.attributes.map.id)return a=b.parent,b.empty().remove(),void(b=a);b=b.parent}}},l),y=b=new e(o.context||r.root_name,11),v.parse(t),S&&I.length&&(o.context?o.invalid=!0:c(I)),O&&("body"==y.name||o.isRootContent)&&a(),!o.invalid){for(N in m){for(E=u[N],w=(C=m[N]).length;w--;)C[w].parent||C.splice(w,1);for(x=0,_=E.length;_>x;x++)E[x](C,N,o)}for(x=0,_=f.length;_>x;x++)if((E=f[x]).name in p){for(w=(C=p[E.name]).length;w--;)C[w].parent||C.splice(w,1);for(w=0,k=E.callbacks.length;k>w;w++)E.callbacks[w](C,E.name,o)}}return y},r.remove_trailing_brs&&d.addNodeFilter("br",function(t){var n,r,i,o,a,c,d,u,f=t.length,m=s({},l.getBlockElements()),p=l.getNonEmptyElements();for(m.body=1,n=0;f>n;n++)if(i=(r=t[n]).parent,m[r.parent.name]&&r===i.lastChild){for(a=r.prev;a;){if("span"!==(c=a.name)||"bookmark"!==a.attr("data-mce-type")){if("br"!==c)break;if("br"===c){r=null;break}}a=a.prev}r&&(r.remove(),i.isEmpty(p)&&((d=l.getElementRule(i.name))&&(d.removeEmpty?i.remove():d.paddEmpty&&(i.empty().append(new e("#text",3)).value="\xa0"))))}else{for(o=r;i&&i.firstChild===o&&i.lastChild===o&&(o=i,!m[i.name]);)i=i.parent;o===i&&((u=new e("#text",3)).value="\xa0",r.replace(u))}}),r.allow_html_in_named_anchor||d.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do{n=t.prev,r.insert(t,i),t=n}while(t)}})}}),r(_,[m,u],function(e,t){var n=t.makeMap;return function(t){var r,i,o,a,s,l=[];return r=(t=t||{}).indent,i=n(t.indent_before||""),o=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var c,d,u,f;if(r&&i[e]&&l.length>0&&((f=l[l.length-1]).length>0&&"\n"!==f&&l.push("\n")),l.push("<",e),t)for(c=0,d=t.length;d>c;c++)u=t[c],l.push(" ",u.name,'="',a(u.value,!0),'"');l[l.length]=!n||s?">":" />",n&&r&&o[e]&&l.length>0&&((f=l[l.length-1]).length>0&&"\n"!==f&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),r&&o[e]&&l.length>0&&((t=l[l.length-1]).length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>"),r&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",r?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),r(w,[_,b],function(e,t){return function(n,r){var i=this,o=new e(n);(n=n||{}).validate=!("validate"in n)||n.validate,i.schema=r=r||new t,i.writer=o,i.serialize=function(e){function t(e){var n,s,l,c,d,u,f,m,p,h=i[e.type];if(h)h(e);else{if(n=e.name,s=e.shortEnded,l=e.attributes,a&&l&&l.length>1){for((u=[]).map={},f=0,m=(p=r.getElementRule(e.name)).attributesOrder.length;m>f;f++)(c=p.attributesOrder[f])in l.map&&(d=l.map[c],
u.map[c]=d,u.push({name:c,value:d}));for(f=0,m=l.length;m>f;f++)(c=l[f].name)in u.map||(d=l.map[c],u.map[c]=d,u.push({name:c,value:d}));l=u}if(o.start(e.name,l,s),!s){if(e=e.firstChild)do{t(e)}while(e=e.next);o.end(n)}}}var i,a;return a=n.validate,i={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do{t(e)}while(e=e.next)}},o.reset(),1!=e.type||n.inner?i[11](e):t(e),o.getContent()}}}),r(k,[h,x,m,w,y,b,p,u],function(e,t,n,r,i,o,a,s){var l=s.each,c=s.trim,d=e.DOM;return function(e,i){var s,u,f;return i&&(s=i.dom,u=i.schema),s=s||d,u=u||new o(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,(f=new t(e,u)).addAttributeFilter("src,href,style",function(t,n){for(var r,i,o,a=t.length,l="data-mce-"+n,c=e.url_converter,d=e.url_converter_scope;a--;)(i=(r=t[a]).attributes.map[l])!==o?(r.attr(n,i.length>0?i:null),r.attr(l,null)):(i=r.attributes.map[n],"style"===n?i=s.serializeStyle(s.parseStyle(i),r.name):c&&(i=c.call(d,i,n,r.name)),r.attr(n,i.length>0?i:null))}),f.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null)}),f.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),f.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),f.addNodeFilter("noscript",function(e){for(var t,r=e.length;r--;)(t=e[r].firstChild)&&(t.value=n.decode(t.value))}),f.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r,i,o=e.length;o--;)if(i=(r=e[o]).firstChild?r.firstChild.value:"","script"===t){var a=(r.attr("type")||"text/javascript").replace(/^mce\-/,"");r.attr("type","text/javascript"===a?null:a),i.length>0&&(r.firstChild.value="// <![CDATA[\n"+n(i)+"\n// ]]>")}else i.length>0&&(r.firstChild.value="<!--\n"+n(i)+"\n-->")}),f.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),f.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:function(t,n){var i,o,d,m,p,h=this;return a.ie&&s.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),s.setHTML(t,p)):t=t.cloneNode(!0),(i=t.ownerDocument.implementation).createHTMLDocument&&(o=i.createHTMLDocument(""),l("BODY"==t.nodeName?t.childNodes:[t],function(e){o.body.appendChild(o.importNode(e,!0))}),t="BODY"!=t.nodeName?o.body.firstChild:o.body,d=s.doc,s.doc=o),(n=n||{}).format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,h.onPreProcess(n)),m=new r(e,u),n.content=m.serialize(f.parse(c(n.getInner?t.innerHTML:s.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||h.onPostProcess(n),d&&(s.doc=d),n.node=null,n.content},addRules:function(e){u.addValidElements(e)},setRules:function(e){u.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),r(E,[],function(){function e(e){function t(t,n){var r,i,o,a,s,l,c,d,u=0,f=-1;if((r=t.duplicate()).collapse(n),(d=r.parentElement()).ownerDocument===e.dom.doc){for(;"false"===d.contentEditable;)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};for(i=(a=d.children).length-1;i>=u;)if(s=a[c=Math.floor((u+i)/2)],r.moveToElementText(s),(f=r.compareEndPoints(n?"StartToStart":"EndToEnd",t))>0)i=c-1;else{if(!(0>f))return{node:s};u=c+1}if(0>f)for(s?r.collapse(!1):(r.moveToElementText(d),r.collapse(!0),s=d,o=!0),l=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&d==r.parentElement();)l++;else for(r.collapse(!0),l=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&d==r.parentElement();)l++;return{node:s,position:f,offset:l,inside:o}}}function n(){function n(e){var n,r,i,o,a,s=t(d,e),l=0;if(n=s.node,r=s.offset,!s.inside||n.hasChildNodes())if(r!==o){if(s.position<0){if(!(i=s.inside?n.firstChild:n.nextSibling))return void f[e?"setStartAfter":"setEndAfter"](n);if(!r)return void(3==i.nodeType?f[e?"setStart":"setEnd"](i,0):f[e?"setStartBefore":"setEndBefore"](i));for(;i;){if((l+=(a=i.nodeValue).length)>=r){n=i,l-=r,l=a.length-l;break}i=i.nextSibling}}else{if(!(i=n.previousSibling))return f[e?"setStartBefore":"setEndBefore"](n);if(!r)return void(3==n.nodeType?f[e?"setStart":"setEnd"](i,n.nodeValue.length):f[e?"setStartAfter":"setEndAfter"](i));for(;i;){if((l+=i.nodeValue.length)>=r){n=i,l-=r;break}i=i.previousSibling}}f[e?"setStart":"setEnd"](n,l)}else f[e?"setStartBefore":"setEndAfter"](n);else f[e?"setStart":"setEnd"](n,0)}var o,a,s,l,c,d=e.getRng(),f=i.createRng();if((o=d.item?d.item(0):d.parentElement()).ownerDocument!=i.doc)return f;if(a=e.isCollapsed(),d.item)return f.setStart(o.parentNode,i.nodeIndex(o)),f.setEnd(f.startContainer,f.startOffset+1),f;try{n(!0),a||n()}catch(u){if(-2147024809!=u.number)throw u;c=r.getBookmark(2),(s=d.duplicate()).collapse(!0),o=s.parentElement(),a||((s=d.duplicate()).collapse(!1),(l=s.parentElement()).innerHTML=l.innerHTML),o.innerHTML=o.innerHTML,r.moveToBookmark(c),d=e.getRng(),n(!0),a||n()}return f}var r=this,i=e.dom,o=!1;this.getBookmark=function(n){function r(e){var t,n,r,o,a=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(o=(r=t.children).length;o--;)if(e===r[o]){a.push(o);break}e=t,t=t.parentNode}return a}function o(e){var n;return(n=t(a,e))?{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:r(a.item(0))}:(s.start=o(!0),e.isCollapsed()||(s.end=o()))),s},this.moveToBookmark=function(e){function t(e){var t,n,r,o;for(t=i.getRoot(),n=e.length-1;n>=0;n--)o=t.children,(r=e[n])<=o.length-1&&(t=o[r]);return t}function n(n){var i,a,s,l,c=e[n?"start":"end"];c&&(i=c.position>0,(a=o.createTextRange()).moveToElementText(t(c.indexes)),(l=c.offset)!==s?(a.collapse(c.inside||i),a.moveStart("character",i?-l:l)):a.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",a),n&&r.collapse(!0))}var r,o=i.doc.body;e.start&&(e.start.ctrl?((r=o.createControlRange()).addElement(t(e.start.indexes)),r.select()):(r=o.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(t){function n(e){var t,n,a,u,f;a=i.create("a"),t=e?s:c,n=e?l:d,u=r.duplicate(),(t==p||t==p.documentElement)&&(t=g,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),u.moveToElementText(a),u.moveStart("character",n),i.remove(a),r.setEndPoint(e?"StartToStart":"EndToEnd",u)):((f=t.childNodes).length?(n>=f.length?i.insertAfter(a,f[f.length-1]):t.insertBefore(a,f[n]),u.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,u.moveToElementText(a),u.collapse(o)),r.setEndPoint(e?"StartToStart":"EndToEnd",u),i.remove(a))}var r,a,s,l,c,d,u,f,m,p=e.dom.doc,g=p.body;if(s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset,r=g.createTextRange(),s==c&&1==s.nodeType){if(l==d&&!s.hasChildNodes()){if(s.canHaveHTML)return(u=s.previousSibling)&&!u.hasChildNodes()&&i.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(s.lastChild),r.select(),i.doc.selection.clear(),s.innerHTML="",void(u&&(u.innerHTML=""));l=i.nodeIndex(s),s=s.parentNode}if(l==d-1)try{if(m=s.childNodes[l],(a=g.createControlRange()).addElement(m),a.select(),(f=e.getRng()).item&&m===f.item(0))return}catch(h){}}n(!0),n(),r.select()},this.getRangeAt=n}return e}),r(N,[p],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return(e.mac?t.metaKey:t.ctrlKey)&&!t.altKey}}}),r(S,[N,u,p],function(e,t,n){return function(r,i){function o(e){return!1!==i.settings.object_resizing&&(!!/TABLE|IMG|DIV/.test(e.nodeName)&&"false"!==e.getAttribute("data-mce-resize"))}function a(t){var n,r;n=t.screenX-k,r=t.screenY-E,H=n*_[2]+T,L=r*_[3]+R,H=5>H?5:H,L=5>L?5:L,(e.modifierPressed(t)||"IMG"==b.nodeName&&_[2]*_[3]!=0)&&(H=Math.round(L/A),L=Math.round(H*A)),M.setStyles(C,{width:H,height:L}),_[2]<0&&C.clientWidth<=H&&M.setStyle(C,"left",N+(T-H)),_[3]<0&&C.clientHeight<=L&&M.setStyle(C,"top",S+(R-L)),B||(i.fire("ObjectResizeStart",{target:b,width:T,height:R}),B=!0)}function s(){function e(e,t){t&&(b.style[e]||!i.schema.isValid(b.nodeName.toLowerCase(),e)?M.setStyle(b,e,t):M.setAttrib(b,e,t))}B=!1,e("width",H),e("height",L),M.unbind(P,"mousemove",a),M.unbind(P,"mouseup",s),O!=P&&(M.unbind(O,"mousemove",a),M.unbind(O,"mouseup",s)),M.remove(C),I&&"TABLE"!=b.nodeName||l(b),i.fire("ObjectResized",{target:b,width:H,height:L}),i.nodeChanged()}function l(e,t,n){var r,l,d,u,f,m=i.getBody();r=M.getPos(e,m),N=r.x,S=r.y,f=e.getBoundingClientRect(),l=f.width||f.right-f.left,d=f.height||f.bottom-f.top,b!=e&&(h(),b=e,H=L=0),u=i.fire("ObjectSelected",{target:e}),o(e)&&!u.isDefaultPrevented()?D(x,function(e,r){function o(t){B=!0,k=t.screenX,E=t.screenY,T=b.clientWidth,R=b.clientHeight,A=R/T,_=e,C=b.cloneNode(!0),M.addClass(C,"mce-clonedresizable"),C.contentEditable=!1,C.unSelectabe=!0,M.setStyles(C,{left:N,top:S,margin:0}),C.removeAttribute("data-mce-selected"),i.getBody().appendChild(C),M.bind(P,"mousemove",a),M.bind(P,"mouseup",s),O!=P&&(M.bind(O,"mousemove",a),M.bind(O,"mouseup",s))}var c,u;return t?void(r==t&&o(n)):((c=M.get("mceResizeHandle"+r))?M.show(c):(u=i.getBody(),c=M.add(u,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":!0,"class":"mce-resizehandle",contentEditable:!1,unSelectabe:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),M.bind(c,"mousedown",function(e){e.preventDefault(),o(e)})),void M.setStyles(c,{left:l*e[0]+N-c.offsetWidth/2,top:d*e[1]+S-c.offsetHeight/2}))}):c(),b.setAttribute("data-mce-selected","1")}function c(){var e,t;for(e in b&&b.removeAttribute("data-mce-selected"),x)(t=M.get("mceResizeHandle"+e))&&(M.unbind(t),M.remove(t))}function d(e){function t(e,t){do{if(e===t)return!0}while(e=e.parentNode)}var n;return D(M.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:r.getNode(),(n=M.getParent(n,I?"table":"table,img,hr"))&&(g(),t(r.getStart(),n)&&t(r.getEnd(),n)&&(!I||n!=r.getStart()&&"IMG"!==r.getStart().nodeName))?void l(n):void c()}function u(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function f(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function m(e){var t,n,r,o,a,s,c,d=e.srcElement;for(n in t=d.getBoundingClientRect(),s=w.clientX-t.left,c=w.clientY-t.top,x)if(r=x[n],o=d.offsetWidth*r[0],a=d.offsetHeight*r[1],Math.abs(o-s)<8&&Math.abs(a-c)<8){_=r;break}B=!0,i.getDoc().selection.empty(),l(d,n,w)}function p(e){var t=e.srcElement;if(t!=b){if(h(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(c(),b=t,u(t,"resizestart",m))}}function h(){f(b,"resizestart",m)}function g(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function v(e){var t;if(I){t=P.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function y(){b=C=null,I&&(h(),f(i.getBody(),"controlselect",p))}var b,C,x,_,w,k,E,N,S,T,R,A,B,H,L,M=i.dom,D=t.each,P=i.getDoc(),O=document,I=n.ie&&n.ie<11;x={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var F=".mce-content-body";return i.contentStyles.push(F+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+F+" .mce-resizehandle:hover {background: #000}"+F+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+F+" .mce-clonedresizable {position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"),i.on("init",function(){I?(i.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(c(),v(e.target))}),u(i.getBody(),"controlselect",p),i.on("mousedown",function(e){w=e})):(g(),n.ie>=11&&(i.on("mouseup",function(e){var t=e.target.nodeName;/^(TABLE|IMG|HR)$/.test(t)&&(i.selection.select(e.target,"TABLE"==t),i.nodeChanged())}),i.dom.bind(i.getBody(),"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&e.preventDefault()}))),i.on("nodechange mousedown mouseup ResizeEditor",d),i.on("keydown keyup",function(e){b&&"TABLE"==b.nodeName&&d(e)})}),{controlSelect:v,destroy:y}}}),r(T,[d,E,S,p,u],function(e,n,r,i,o){function a(e,t,i,o){var a=this;a.dom=e,a.win=t,a.serializer=i,a.editor=o,a.controlSelection=new r(a,o),a.win.getSelection||(a.tridentSel=new n(a))}var s=o.each,l=o.grep,c=o.trim,d=i.ie,u=i.opera;return a.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();e?(r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)):(n._moveEndPoint(r,n.editor.getBody(),!0),n.setRng(r))},getContent:function(e){var n,r,i,o=this,a=o.getRng(),s=o.dom.create("body"),l=o.getSel();return n=r="",(e=e||{}).get=!0,e.format=e.format||"html",e.selection=!0,o.editor.fire("BeforeGetContent",e),"text"==e.format?o.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(i=a.cloneContents())&&s.appendChild(i):a.item!==t||a.htmlText!==t?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(r=" "),e.getInner=!0,e.content=o.isCollapsed()?"":n+o.serializer.serialize(s,e)+r,o.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,r,i,o=this,a=o.getRng(),s=o.win.document;if((t=t||{format:"html"}).set=!0,t.selection=!0,e=t.content=e,t.no_events||o.editor.fire("BeforeSetContent",t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(r=s.createDocumentFragment(),i=s.createElement("div"),r.appendChild(i),i.outerHTML=e,a.insertNode(r))),n=o.dom.get("__caret"),(a=s.createRange()).setStartBefore(n),a.setEndBefore(n),o.setRng(a),o.dom.remove("__caret");try{o.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=o.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),o.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||o.editor.fire("SetContent",t)},getStart:function(){var e,t,n,r,i=this,o=i.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);for((n=o.duplicate()).collapse(1),(e=n.parentElement()).ownerDocument!==i.dom.doc&&(e=i.dom.getRoot()),t=r=o.parentElement();r=r.parentNode;)if(r==e){e=t;break}return e}return 1==(e=o.startContainer).nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,o.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,r=n.getRng();return r.duplicate||r.item?r.item?r.item(0):((r=r.duplicate()).collapse(0),(e=r.parentElement()).ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName&&e.lastChild||e):(e=r.endContainer,t=r.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){function n(e,t){var n=0;return s(p.select(e),function(e,r){e==t&&(n=r)}),n}function r(e){function t(t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&((n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function i(){function e(e,n){var i,o,a=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],l=[],c=0;if(3==a.nodeType){if(t)for(i=a.previousSibling;i&&3==i.nodeType;i=i.previousSibling)s+=i.nodeValue.length;l.push(s)}else s>=(o=a.childNodes).length&&o.length&&(c=1,s=Math.max(0,o.length-1)),l.push(m.dom.nodeIndex(o[s],t)+c);for(;a&&a!=r;a=a.parentNode)l.push(m.dom.nodeIndex(a,t));return l}var n=m.getRng(!0),r=p.getRoot(),i={};return i.start=e(n,!0),m.isCollapsed()||(i.end=e(n)),i}var o,a,l,c,d,u,f,m=this,p=m.dom,g="&#xFEFF;";if(2==e)return"IMG"==(d=(u=m.getNode()).nodeName)?{name:d,index:n(d,u)}:m.tridentSel?m.tridentSel.getBookmark(e):i();if(e)return{rng:m.getRng()};if(o=m.getRng(),l=p.uniqueId(),c=m.isCollapsed(),f="overflow:hidden;line-height:0px",o.duplicate||o.item){if(o.item)return{name:d=(u=o.item(0)).nodeName,index:n(d,u)};a=o.duplicate();try{o.collapse(),o.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+f+'">'+g+"</span>"),c||(a.collapse(!1),o.moveToElementText(a.parentElement()),0===o.compareEndPoints("StartToEnd",a)&&a.move("character",-1),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+f+'">'+g+"</span>"))}catch(h){return null}}else{if("IMG"==(d=(u=m.getNode()).nodeName))return{name:d,index:n(d,u)};a=r(o.cloneRange()),c||(a.collapse(!1),a.insertNode(p.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:f},g))),(o=r(o)).collapse(!0),o.insertNode(p.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:f},g))}return m.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(e){function t(t){var n,r,a,s,l=e[t?"start":"end"];if(l){for(a=l[0],r=o,n=l.length-1;n>=1;n--){if(s=r.childNodes,l[n]>s.length-1)return;r=s[l[n]]}3===r.nodeType&&(a=Math.min(l[0],r.nodeValue.length)),1===r.nodeType&&(a=Math.min(l[0],r.childNodes.length)),t?i.setStart(r,a):i.setEnd(r,a)}return!0}function n(t){var n,r,i,o,d=h.get(e.id+"_"+t),p=e.keep;if(d&&(n=d.parentNode,"start"==t?(p?(n=d.firstChild,r=1):r=h.nodeIndex(d),a=c=n,f=m=r):(p?(n=d.firstChild,r=1):r=h.nodeIndex(d),c=n,m=r),!p)){for(o=d.previousSibling,i=d.nextSibling,s(l(d.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});d=h.get(e.id+"_"+t);)h.remove(d,1);o&&i&&o.nodeType==i.nodeType&&3==o.nodeType&&!u&&(r=o.nodeValue.length,o.appendData(i.nodeValue),h.remove(i),"start"==t?(a=c=o,f=m=r):(c=o,m=r))}}function r(e){return!h.isBlock(e)||e.innerHTML||d||(e.innerHTML='<br data-mce-bogus="1" />'),e}var i,o,a,c,f,m,p=this,h=p.dom;if(e)if(e.start){if(i=h.createRng(),o=h.getRoot(),p.tridentSel)return p.tridentSel.moveToBookmark(e);t(!0)&&t()&&p.setRng(i)}else e.id?(n("start"),n("end"),a&&((i=h.createRng()).setStart(r(a),f),i.setEnd(r(c),m),p.setRng(i))):e.name?p.select(h.select(e.name)[e.index]):e.rng&&p.setRng(e.rng)},select:function(e,t){var n,r=this,i=r.dom,o=i.createRng();if(r.lastFocusBookmark=null,e){if(!t&&r.controlSelection.controlSelect(e))return;n=i.nodeIndex(e),o.setStart(e.parentNode,n),o.setEnd(e.parentNode,n+1),t&&(r._moveEndPoint(o,e,!0),r._moveEndPoint(o,e)),r.setRng(o)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t,n=this,r=n.getRng();r.item&&(t=r.item(0),(r=n.win.document.body.createTextRange()).moveToElementText(t)),r.collapse(!!e),n.setRng(r)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t,n,r,i,o=this,a=o.win.document;if(!e&&o.lastFocusBookmark){var s=o.lastFocusBookmark;return s.startContainer?((n=a.createRange()).setStart(s.startContainer,s.startOffset),n.setEnd(s.endContainer,s.endOffset)):n=s,n}if(e&&o.tridentSel)return o.tridentSel.getRangeAt(0);try{(t=o.getSel())&&(n=t.rangeCount>0?t.getRangeAt(0):t.createRange?t.createRange():a.createRange())}catch(l){}if(d&&n&&n.setStart){try{i=a.selection.createRange()}catch(l){}i&&i.item&&(r=i.item(0),(n=a.createRange()).setStartBefore(r),n.setEndAfter(r))}return n||(n=a.createRange?a.createRange():a.body.createTextRange()),n.setStart&&9===n.startContainer.nodeType&&n.collapsed&&(r=o.dom.getRoot(),n.setStart(r,0),n.setEnd(r,0)),o.selectedRange&&o.explicitRange&&(0===n.compareBoundaryPoints(n.START_TO_START,o.selectedRange)&&0===n.compareBoundaryPoints(n.END_TO_END,o.selectedRange)?n=o.explicitRange:(o.selectedRange=null,o.explicitRange=null)),n},setRng:function(e,t){var n,r=this;if(e.select)try{e.select()}catch(i){}else if(r.tridentSel){if(e.cloneRange)try{return void r.tridentSel.addRange(e)}catch(i){}}else if(n=r.getSel()){r.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(i){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),r.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,r=n.getRng(),i=r.startContainer,o=r.endContainer,a=r.startOffset,s=r.endOffset,l=n.dom.getRoot();return r?r.setStart?(t=r.commonAncestorContainer,!r.collapsed&&(i==o&&2>s-a&&i.hasChildNodes()&&(t=i.childNodes[a]),3===i.nodeType&&3===o.nodeType&&(i=i.length===a?e(i.nextSibling,!0):i.parentNode,o=0===s?e(o.previousSibling,!1):o.parentNode,i&&i===o))?i:t&&3==t.nodeType?t.parentNode:t):((t=r.item?r.item(0):r.parentElement()).ownerDocument!==n.win.document&&(t=l),t):l},getSelectedBlocks:function(t,n){var r,i,o=this,a=o.dom,s=[];if(i=a.getRoot(),t=a.getParent(t||o.getStart(),a.isBlock),n=a.getParent(n||o.getEnd(),a.isBlock),t&&t!=i&&s.push(t),t&&n&&t!=n){r=t;for(var l=new e(t,i);(r=l.next())&&r!=n;)a.isBlock(r)&&s.push(r)}return n&&t!=n&&n!=i&&s.push(n),s},isForward:function(){var e,t,n=this.dom,r=this.getSel();return!(r&&r.anchorNode&&r.focusNode)||((e=n.createRng()).setStart(r.anchorNode,r.anchorOffset),e.collapse(!0),(t=n.createRng()).setStart(r.focusNode,r.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){function t(t){function a(t,n){for(var r=new e(t,h.getParent(t.parentNode,h.isBlock)||g);t=r[n?"prev":"next"]();)if("BR"===t.nodeName)return!0}function s(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function l(t,n){var o,a;for(o=new e(n=n||c,h.getParent(n.parentNode,h.isBlock)||g);f=o[t?"prev":"next"]();){if(3===f.nodeType&&f.nodeValue.length>0)return c=f,d=t?f.nodeValue.length:0,void(r=!0);if(h.isBlock(f)||m[f.nodeName.toLowerCase()])return;a=f}i&&a&&(c=a,r=!0,d=0)}var c,d,u,f,m,p,h=o.dom,g=h.getRoot();if(c=n[(t?"start":"end")+"Container"],d=n[(t?"start":"end")+"Offset"],m=h.schema.getNonEmptyElements(),p=t,1==c.nodeType&&d>c.childNodes.length-1&&(p=!1),9===c.nodeType&&(c=h.getRoot(),d=0),c===g){if(p&&((f=c.childNodes[d>0?d-1:0])&&(f.nodeName.toLowerCase(),m[f.nodeName]||"TABLE"==f.nodeName)))return;if(c.hasChildNodes()&&(d=Math.min(!p&&d>0?d-1:d,c.childNodes.length-1),c=c.childNodes[d],d=0,c.hasChildNodes()&&!/TABLE/.test(c.nodeName))){f=c,u=new e(c,g);do{if(3===f.nodeType&&f.nodeValue.length>0){d=p?0:f.nodeValue.length,c=f,r=!0;break}if(m[f.nodeName.toLowerCase()]){d=h.nodeIndex(f),c=f.parentNode,"IMG"!=f.nodeName||p||d++,r=!0;break}}while(f=p?u.next():u.prev())}}i&&(3===c.nodeType&&0===d&&l(!0),1===c.nodeType&&(!(f=c.childNodes[d])||"BR"!==f.nodeName||s(f,"A")||a(f)||a(f,!0)||l(!0,c.childNodes[d]))),p&&!i&&3===c.nodeType&&d===c.nodeValue.length&&l(!1),r&&n["set"+(t?"Start":"End")](c,d)}var n,r,i,o=this;d||(n=o.getRng(),i=n.collapsed,t(!0),i||t(),r&&(i&&n.collapse(!0),o.setRng(n,o.isForward())))},selectorChanged:function(e,t){var n,r=this;return r.selectorChangedData||(r.selectorChangedData={},n={},r.editor.on("NodeChange",function(e){var t=e.element,i=r.dom,o=i.getParents(t,null,i.getRoot()),a={};s(r.selectorChangedData,function(e,t){s(o,function(r){return i.is(r,t)?(n[t]||(s(e,function(e){e(!0,{node:r,selector:t,parents:o})}),n[t]=e),a[t]=e,!1):void 0})}),s(n,function(e,r){a[r]||(delete n[r],s(e,function(e){e(!1,{node:t,selector:r,parents:o})}))})})),r.selectorChangedData[e]||(r.selectorChangedData[e]=[]),r.selectorChangedData[e].push(t),r},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function t(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}}var n,r,i,o,a=this,s=a.dom;if("BODY"!=s.getRoot().nodeName){var l=a.getScrollContainer();if(l)return n=t(e).y-t(l).y,o=l.clientHeight,void(((i=l.scrollTop)>n||n+25>i+o)&&(l.scrollTop=i>n?n:n-o+25))}r=s.getViewPort(a.editor.getWin()),n=s.getPos(e).y,i=r.y,o=r.h,(n<r.y||n+25>i+o)&&a.editor.getWin().scrollTo(0,i>n?n:n-o+25)},_moveEndPoint:function(t,n,r){var o=n,a=new e(n,o),s=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==c(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(s[n.nodeName])return void(r?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(i.ie&&i.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?a.next():a.prev());"BODY"==o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},a}),r(R,[u],function(e){function t(e){this.walk=function(t,r){function i(e){var t;return 3===(t=e[0]).nodeType&&t===h&&g>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===y&&e.length>0&&t===v&&3===t.nodeType&&e.splice(e.length-1,1),e}function o(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function s(e,t,n){var a=n?"nextSibling":"previousSibling";for(f=(u=e).parentNode;u&&u!=t;u=f)f=u.parentNode,(m=o(u==e?u:u[a],a)).length&&(n||m.reverse(),r(i(m)))}var l,c,d,u,f,m,p,h=t.startContainer,g=t.startOffset,v=t.endContainer,y=t.endOffset;if((p=e.select("td.mce-item-selected,th.mce-item-selected")).length>0)n(p,function(e){r([e])});else{if(1==h.nodeType&&h.hasChildNodes()&&(h=h.childNodes[g]),1==v.nodeType&&v.hasChildNodes()&&(v=v.childNodes[Math.min(y-1,v.childNodes.length-1)]),h==v)return r(i([h]));for(l=e.findCommonAncestor(h,v),u=h;u;u=u.parentNode){if(u===v)return s(h,l,!0);if(u===l)break}for(u=v;u;u=u.parentNode){if(u===h)return s(v,l);if(u===l)break}c=a(h,l)||h,d=a(v,l)||v,s(h,c,!0),(m=o(c==h?c:c.nextSibling,"nextSibling",d==v?d.nextSibling:d)).length&&r(i(m)),s(v,d)}},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset;return n==i&&3==n.nodeType?r>0&&r<n.nodeValue.length&&(n=(i=t(n,r)).previousSibling,o>r?(n=i=t(i,o-=r).previousSibling,o=i.nodeValue.length,r=0):o=0):(3==n.nodeType&&r>0&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==i.nodeType&&o>0&&o<i.nodeValue.length&&(o=(i=t(i,o).previousSibling).nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:o}}}var n=e.each;return t.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},t}),r(A,[d,R,u],function(e,t,n){return function(r){function i(e){return e.nodeType&&(e=e.nodeName),!!r.schema.getTextBlockElements()[e.toLowerCase()]}function o(e,t){return V.getParents(e,t,V.getRoot())}function a(e){return 1===e.nodeType&&"_mce_caret"===e.id}function s(){d({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){ee(n,function(t,n){V.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),ee("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){d(e,{block:e,remove:"all"})}),d(r.settings.formats)}function l(){r.addShortcut("ctrl+b","bold_desc","Bold"),r.addShortcut("ctrl+i","italic_desc","Italic"),r.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)r.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);r.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),r.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),r.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function c(e){return e?W[e]:W}function d(e,t){e&&("string"!=typeof e?ee(e,function(e,t){d(t,e)}):(t=t.length?t:[t],ee(t,function(e){e.deep===I&&(e.deep=!e.selector),e.split===I&&(e.split=!e.selector||e.inline),e.remove===I&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),W[e]=t))}function u(e){var t;return r.dom.getParent(e,function(e){return(t=r.dom.getStyle(e,"text-decoration"))&&"none"!==t}),t}function f(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=u(e.parentNode),r.dom.getStyle(e,"color")&&t?r.dom.setStyle(e,"text-decoration",t):r.dom.getStyle(e,"textdecoration")===t&&r.dom.setStyle(e,"text-decoration",null))}function m(t,n,o){function s(e,t){t=t||y,e&&(t.onformat&&t.onformat(e,t,n,o),ee(t.styles,function(t,r){V.setStyle(e,r,E(t,n))}),ee(t.attributes,function(t,r){V.setAttrib(e,r,E(t,n))}),ee(t.classes,function(t){t=E(t,n),V.hasClass(e,t)||V.addClass(e,t)}))}function l(){function t(t,n){var r=new e(n);for(o=r.current();o;o=r.prev())if(o.childNodes.length>1||o==t||"BR"==o.tagName)return o}var n=r.selection.getRng(),i=n.startContainer,a=n.endContainer;if(i!=a&&0===n.endOffset){var s=t(i,a),l=3==s.nodeType?s.length:s.childNodes.length;n.setEnd(s,l)}return n}function d(e,t,n,r,i){var o,a,s=[],l=-1,c=-1,d=-1;return ee(e.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(l=t,o=e,!1):void 0}),ee(e.childNodes,function(e,n){"SPAN"===e.nodeName&&"bookmark"==V.getAttrib(e,"data-mce-type")&&(e.id==t.id+"_start"?c=n:e.id==t.id+"_end"&&(d=n))}),0>=l||l>c&&d>l?(ee(te(e.childNodes),i),0):(a=V.clone(n,J),ee(te(e.childNodes),function(e,t){
(l>c&&l>t||c>l&&t>l)&&(s.push(e),e.parentNode.removeChild(e))}),l>c?e.insertBefore(a,o):c>l&&e.insertBefore(a,o.nextSibling),r.push(a),ee(s,function(e){a.appendChild(e)}),a)}function u(e,r,o){var l,c,u=[],f=!0;l=y.inline||y.block,s(c=V.create(l)),q.walk(e,function(e){function m(e){var h,C,x,w,k;return k=f,h=e.nodeName.toLowerCase(),C=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&Z(e)&&(k=f,f="true"===Z(e),w=!0),_(h,"br")?(p=0,void(y.block&&V.remove(e))):y.wrapper&&g(e,t,n)?void(p=0):f&&!w&&y.block&&!y.wrapper&&i(h)&&j(C,l)?(s(e=V.rename(e,l)),u.push(e),void(p=0)):y.selector&&(ee(v,function(t){"collapsed"in t&&t.collapsed!==b||V.is(e,t.selector)&&!a(e)&&(s(e,t),x=!0)}),!y.inline||x)?void(p=0):void(!f||w||!j(l,h)||!j(C,l)||!o&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||a(e)||y.inline&&$(e)?"li"==h&&r?p=d(e,r,c,u,m):(p=0,ee(te(e.childNodes),m),w&&(f=k),p=0):(p||(p=V.clone(c,J),e.parentNode.insertBefore(p,e),u.push(p)),p.appendChild(e)))}var p;ee(e,m)}),!1===y.wrap_links&&ee(u,function(e){function t(e){var n,r,i;if("A"===e.nodeName){for(r=V.clone(c,J),u.push(r),i=te(e.childNodes),n=0;n<i.length;n++)r.appendChild(i[n]);e.appendChild(r)}ee(te(e.childNodes),t)}t(e)}),ee(u,function(e){function r(e){var t=0;return ee(e.childNodes,function(e){N(e)||H(e)||t++}),t}function i(e){var t,n;return ee(e.childNodes,function(e){return 1!=e.nodeType||H(e)||a(e)?void 0:(t=e,J)}),t&&x(t,y)&&(s(n=V.clone(t,J)),V.replace(n,e,Q),V.remove(t,1)),n||e}var o;if(o=r(e),!(u.length>1)&&$(e)||0!==o){if(y.inline||y.wrapper){if(y.exact||1!==o||(e=i(e)),ee(v,function(t){ee(V.select(t.inline,e),function(e){var r;if(!1===t.wrap_links){r=e.parentNode;do{if("A"===r.nodeName)return}while(r=r.parentNode)}R(t,n,e,t.exact?e:null)})}),g(e.parentNode,t,n))return V.remove(e,1),e=0,Q;y.merge_with_parents&&V.getParent(e.parentNode,function(r){return g(r,t,n)?(V.remove(e,1),e=0,Q):void 0}),e&&!1!==y.merge_siblings&&(e=L(e=L(B(e),e),B(e,Q)))}}else V.remove(e,1)})}var p,h,v=c(t),y=v[0],b=!o&&U.isCollapsed();if(y)if(o)o.nodeType?((h=V.createRng()).setStartBefore(o),h.setEndAfter(o),u(T(h,v),null,!0)):u(o,null,!0);else if(b&&y.inline&&!V.select("td.mce-item-selected,th.mce-item-selected").length)D("apply",t,n);else{var C=r.selection.getNode();K||!v[0].defaultBlock||V.getParent(C,V.isBlock)||m(v[0].defaultBlock),r.selection.setRng(l()),p=U.getBookmark(),u(T(U.getRng(Q),v),p),y.styles&&(y.styles.color||y.styles.textDecoration)&&(ne(C,f,"childNodes"),f(C)),U.moveToBookmark(p),P(U.getRng(Q)),r.nodeChanged()}}function p(e,t,n){function i(e){var n,r,o,a,s;if(1===e.nodeType&&Z(e)&&(a=b,b="true"===Z(e),s=!0),n=te(e.childNodes),b&&!s)for(r=0,o=h.length;o>r&&!R(h[r],t,e,e);r++);if(y.deep&&n.length){for(r=0,o=n.length;o>r;r++)i(n[r]);s&&(b=a)}}function a(n){var r;return ee(o(n.parentNode).reverse(),function(n){var i;r||"_start"==n.id||"_end"==n.id||(i=g(n,e,t))&&!1!==i.split&&(r=n)}),r}function s(e,n,r,i){var o,a,s,l,c,d;if(e){for(d=e.parentNode,o=n.parentNode;o&&o!=d;o=o.parentNode){for(a=V.clone(o,J),c=0;c<h.length;c++)if(R(h[c],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!i||y.mixed&&$(e)||(n=V.split(e,n)),s&&(r.parentNode.insertBefore(s,r),l.appendChild(r))}return n}function l(e){return s(a(e),e,e,!0)}function d(e){var t=V.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return H(n)&&(n=n[e?"firstChild":"lastChild"]),V.remove(t,!0),n}function f(e){var t,n,o=e.commonAncestorContainer;e=T(e,h,Q),y.split&&((t=M(e,Q))!=(n=M(e))?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n),t=S(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=S(n,"span",{id:"_end","data-mce-type":"bookmark"}),l(t),l(n),t=d(Q),n=d()):t=n=l(t),e.startContainer=t.parentNode,e.startOffset=Y(t),e.endContainer=n.parentNode,e.endOffset=Y(n)+1),q.walk(e,function(e){ee(e,function(e){i(e),1===e.nodeType&&"underline"===r.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===u(e.parentNode)&&R({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var m,p,h=c(e),y=h[0],b=!0;return n?void(n.nodeType?(p=V.createRng(),p.setStartBefore(n),p.setEndAfter(n),f(p)):f(n)):void(U.isCollapsed()&&y.inline&&!V.select("td.mce-item-selected,th.mce-item-selected").length?D("remove",e,t):(m=U.getBookmark(),f(U.getRng(Q)),U.moveToBookmark(m),y.inline&&v(e,t,U.getStart())&&P(U.getRng(!0)),r.nodeChanged()))}function h(e,t,n){var r=c(e);!v(e,t,n)||"toggle"in r[0]&&!r[0].toggle?m(e,t,n):p(e,t,n)}function g(e,t,n,r){function i(e,t,i){var o,a,s,l=t[i];if(t.onmatch)return t.onmatch(e,t,i);if(l)if(l.length===I){for(o in l)if(l.hasOwnProperty(o)){if(a="attributes"===i?V.getAttrib(e,o):w(e,o),r&&!a&&!t.exact)return;if((!r||t.exact)&&!_(a,k(E(l[o],n),o)))return}}else for(s=0;s<l.length;s++)if("attributes"===i?V.getAttrib(e,l[s]):w(e,l[s]))return t;return t}var o,a,s,l=c(t);if(l&&e)for(a=0;a<l.length;a++)if(x(e,o=l[a])&&i(e,o,"attributes")&&i(e,o,"styles")){if(s=o.classes)for(a=0;a<s.length;a++)if(!V.hasClass(e,s[a]))return;return o}}function v(e,t,n){function r(n){var r=V.getRoot();return n!==r&&g(n=V.getParent(n,function(n){return n.parentNode===r||!!g(n,e,t,!0)}),e,t)}var i;return n?r(n):r(n=U.getNode())?Q:(i=U.getStart())!=n&&r(i)?Q:J}function y(e,t){var n,r=[],i={};return n=U.getStart(),V.getParent(n,function(n){var o,a;for(o=0;o<e.length;o++)a=e[o],!i[a]&&g(n,a,t)&&(i[a]=!0,r.push(a))},V.getRoot()),r}function b(e){var t,n,r,i,a=c(e);if(a)for(t=o(U.getStart()),r=a.length-1;r>=0;r--){if(!(i=a[r].selector)||a[r].defaultBlock)return Q;for(n=t.length-1;n>=0;n--)if(V.is(t[n],i))return Q}return J}function C(e,t,n){var i;return O||(O={},i={},r.on("NodeChange",function(e){var t=o(e.element),n={};ee(O,function(e,r){ee(t,function(o){return g(o,r,{},e.similar)?(i[r]||(ee(e,function(e){e(!0,{node:o,format:r,parents:t})}),i[r]=e),n[r]=e,!1):void 0})}),ee(i,function(r,o){n[o]||(delete i[o],ee(r,function(n){n(!1,{node:e.element,format:o,parents:t})}))})})),ee(e.split(","),function(e){O[e]||(O[e]=[],O[e].similar=n),O[e].push(t)}),this}function x(e,t){return _(e,t.inline)?Q:_(e,t.block)?Q:t.selector?1==e.nodeType&&V.is(e,t.selector):void 0}function _(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function w(e,t){return k(V.getStyle(e,t),t)}function k(e,t){return("color"==t||"backgroundColor"==t)&&(e=V.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function E(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function N(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function S(e,t,n){var r=V.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function T(t,n,a){function s(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var r,i,o,a,s;if(r=i=e?g:y,a=e?"previousSibling":"nextSibling",s=V.getRoot(),3==r.nodeType&&!N(r)&&(e?v>0:b<r.nodeValue.length))return r;for(;;){if(!n[0].block_expand&&$(i))return i;for(o=i[a];o;o=o[a])if(!H(o)&&!N(o)&&!t(o))return i;if(i.parentNode==s){r=i;break}i=i.parentNode}return r}function l(e,t){for(t===I&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function c(e){for(var t=e;t;){if(1===t.nodeType&&Z(t))return"false"===Z(t)?t:e;t=t.parentNode}return e}function d(t,n,i){function o(e,t){var n,r,o=e.nodeValue;return void 0===t&&(t=i?o.length:0),i?-1===(n=(n=o.lastIndexOf(" ",t))>(r=o.lastIndexOf("\xa0",t))?n:r)||a||n++:(n=o.indexOf(" ",t),r=o.indexOf("\xa0",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var s,l,c,d;if(3===t.nodeType){if(-1!==(c=o(t,n)))return{container:t,offset:c};d=t}for(s=new e(t,V.getParent(t,$)||r.getBody());l=s[i?"prev":"next"]();)if(3===l.nodeType){if(d=l,-1!==(c=o(l)))return{container:l,offset:c}}else if($(l))break;return d?{container:d,offset:n=i?0:d.length}:void 0}function u(e,r){var i,a,s,l;for(3==e.nodeType&&0===e.nodeValue.length&&e[r]&&(e=e[r]),i=o(e),a=0;a<i.length;a++)for(s=0;s<n.length;s++)if(!("collapsed"in(l=n[s])&&l.collapsed!==t.collapsed)&&V.is(i[a],l.selector))return i[a];return e}function f(e,t){var r,a=V.getRoot();if(n[0].wrapper||(r=V.getParent(e,n[0].block,a)),r||(r=V.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=a&&i(e)})),r&&n[0].wrapper&&(r=o(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!$(r[t])&&!_(r=r[t],"br"););return r||e}var m,p,h,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(m=g.childNodes.length-1,3==(g=g.childNodes[v>m?m:v]).nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(m=y.childNodes.length-1,3==(y=y.childNodes[b>m?m:b-1]).nodeType&&(b=y.nodeValue.length)),g=c(g),y=c(y),(H(g.parentNode)||H(g))&&(3==(g=(g=H(g)?g:g.parentNode).nextSibling||g).nodeType&&(v=0)),(H(y.parentNode)||H(y))&&(3==(y=(y=H(y)?y:y.parentNode).previousSibling||y).nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&((h=d(g,v,!0))&&(g=h.container,v=h.offset),(h=d(y,b))&&(y=h.container,b=h.offset)),(p=l(y,b)).node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=l(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(y=p.node).splitText(p.offset-1)}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==g.nodeType&&0!==v||(g=s(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=s())),n[0].selector&&n[0].expand!==J&&!n[0].inline&&(g=u(g,"previousSibling"),y=u(y,"nextSibling")),(n[0].block||n[0].selector)&&(g=f(g,"previousSibling"),y=f(y,"nextSibling"),n[0].block&&($(g)||(g=s(!0)),$(y)||(y=s()))),1==g.nodeType&&(v=Y(g),g=g.parentNode),1==y.nodeType&&(b=Y(y)+1,y=y.parentNode),{startContainer:g,startOffset:v,endContainer:y,endOffset:b}}function R(e,t,n,r){var i,o,a;if(!x(n,e))return J;if("all"!=e.remove)for(ee(e.styles,function(e,i){e=k(E(e,t),i),"number"==typeof i&&(i=e,r=0),(!r||_(w(r,i),e))&&V.setStyle(n,i,""),a=1}),a&&""===V.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),ee(e.attributes,function(e,i){var o;if(e=E(e,t),"number"==typeof i&&(i=e,r=0),!r||_(V.getAttrib(r,i),e)){if("class"==i&&((e=V.getAttrib(n,i))&&(o="",ee(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return void V.setAttrib(n,i,o);"class"==i&&n.removeAttribute("className"),X.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),ee(e.classes,function(e){e=E(e,t),(!r||V.hasClass(r,e))&&V.removeClass(n,e)}),o=V.getAttribs(n),i=0;i<o.length;i++)if(0!==o[i].nodeName.indexOf("_"))return J;return"none"!=e.remove?(A(n,e),Q):void 0}function A(e,t){function n(e,t,n){return!(e=B(e,t,n))||"BR"==e.nodeName||$(e)}var i,o=e.parentNode;t.block&&(K?o==V.getRoot()&&(t.list_block&&_(e,t.list_block)||ee(te(e.childNodes),function(e){j(K,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=S(e,K),V.setAttribs(i,r.settings.forced_root_block_attrs)):i=0})):$(e)&&!$(o)&&(n(e,J)||n(e.firstChild,Q,1)||e.insertBefore(V.create("br"),e.firstChild),n(e,Q)||n(e.lastChild,J,1)||e.appendChild(V.create("br")))),t.selector&&t.inline&&!_(t.inline,e)||V.remove(e,1)}function B(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!N(e))return e}function H(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function L(e,t){function n(e,t){function n(e){var t={};return ee(V.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&(t[r]=V.getAttrib(e,r))}),t}function r(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if((n=t[r])===I)return J;if(e[r]!=n)return J;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return J;return Q}return e.nodeName!=t.nodeName?J:r(n(e),n(t))&&r(V.parseStyle(V.getAttrib(e,"style")),V.parseStyle(V.getAttrib(t,"style")))?Q:J}function r(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!H(i))return i}return e}var i,o;if(e&&t&&(e=r(e,"previousSibling"),t=r(t,"nextSibling"),n(e,t))){for(i=e.nextSibling;i&&i!=t;)o=i,i=i.nextSibling,e.appendChild(o);return V.remove(t),ee(te(t.childNodes),function(t){e.appendChild(t)}),e}return t}function M(t,n){var i,o,a;return i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1==i.nodeType&&(a=i.childNodes.length-1,!n&&o&&o--,i=i.childNodes[o>a?a:o]),3===i.nodeType&&n&&o>=i.nodeValue.length&&(i=new e(i,r.getBody()).next()||i),3!==i.nodeType||n||0!==o||(i=new e(i,r.getBody()).prev()||i),i}function D(t,n,o){function a(e){var t=V.create("span",{id:y,"data-mce-bogus":!0,style:b?"color:red":""});return e&&t.appendChild(r.getDoc().createTextNode(G)),t}function s(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==G||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function l(e){for(;e;){if(e.id===y)return e;e=e.parentNode}}function d(t){var n;if(t)for(t=(n=new e(t,t)).current();t;t=n.next())if(3===t.nodeType)return t}function u(e,t){var n,r;if(e)r=U.getRng(!0),s(e)?(!1!==t&&(r.setStartBefore(e),r.setEndBefore(e)),V.remove(e)):((n=d(e)).nodeValue.charAt(0)===G&&(n=n.deleteData(0,1)),V.remove(e,1)),U.setRng(r);else if(!(e=l(U.getStart())))for(;e=V.get(y);)u(e,!1)}function f(){var e,t,r,i,s,u;i=(e=U.getRng(!0)).startOffset,u=e.startContainer.nodeValue,(t=l(U.getStart()))&&(r=d(t)),u&&i>0&&i<u.length&&/\w/.test(u.charAt(i))&&/\w/.test(u.charAt(i-1))?(s=U.getBookmark(),e.collapse(!0),e=T(e,c(n)),e=q.split(e),m(n,o,e),U.moveToBookmark(s)):(t&&r.nodeValue===G?m(n,o,t):(r=(t=a(!0)).firstChild,e.insertNode(t),i=1,m(n,o,t)),U.setCursorLocation(r,i))}function h(){var e,t,r,s,l,d,u,f,m=U.getRng(!0),h=[];for(e=m.startContainer,t=m.startOffset,l=e,3==e.nodeType&&((t!=e.nodeValue.length||e.nodeValue===G)&&(s=!0),l=l.parentNode);l;){if(g(l,n,o)){d=l;break}l.nextSibling&&(s=!0),h.push(l),l=l.parentNode}if(d)if(s)r=U.getBookmark(),m.collapse(!0),m=T(m,c(n),!0),m=q.split(m),p(n,o,m),U.moveToBookmark(r);else{for(l=f=a(),u=h.length-1;u>=0;u--)l.appendChild(V.clone(h[u],!1)),l=l.firstChild;l.appendChild(V.doc.createTextNode(G)),l=l.firstChild;var v=V.getParent(d,i);v&&V.isEmpty(v)?d.parentNode.replaceChild(f,d):V.insertAfter(f,d),U.setCursorLocation(l,1),V.isEmpty(d)&&V.remove(d)}}function v(){var e;(e=l(U.getStart()))&&!V.isEmpty(e)&&ne(e,function(e){1!=e.nodeType||e.id===y||V.isEmpty(e)||V.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",b=r.settings.caret_debug;r._hasCaretEvents||(z=function(){var e,t=[];if(s(l(U.getStart()),t))for(e=t.length;e--;)V.setAttrib(t[e],"data-mce-bogus","1")},F=function(e){var t=e.keyCode;u(),(8==t||37==t||39==t)&&u(l(U.getStart())),v()},r.on("SetContent",function(e){e.selection&&v()}),r._hasCaretEvents=!0),"apply"==t?f():h()}function P(t){var n,r,i,o,a,s=t.startContainer,l=t.startOffset;if(3==s.nodeType&&l>=s.nodeValue.length&&(l=Y(s),s=s.parentNode,n=!0),1==s.nodeType)for(s=(o=s.childNodes)[Math.min(l,o.length-1)],r=new e(s,V.getParent(s,V.isBlock)),(l>o.length-1||n)&&r.next(),i=r.current();i;i=r.next())if(3==i.nodeType&&!N(i))return a=V.create("a",null,G),i.parentNode.insertBefore(a,i),t.setStart(i,0),U.setRng(t),void V.remove(a)}var O,I,F,z,W={},V=r.dom,U=r.selection,q=new t(V),j=r.schema.isValidChild,$=V.isBlock,K=r.settings.forced_root_block,Y=V.nodeIndex,G="\ufeff",X=/^(src|href|style)$/,J=!1,Q=!0,Z=V.getContentEditable,ee=n.each,te=n.grep,ne=n.walk;(0,n.extend)(this,{get:c,register:d,apply:m,remove:p,toggle:h,match:v,matchAll:y,matchNode:g,canApply:b,formatChanged:C}),s(),l(),r.on("BeforeGetContent",function(){z&&z()}),r.on("mouseup keydown",function(e){F&&F(e)})}}),r(B,[p,u],function(e,t){var n,r=t.trim;return n=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[\u200b\ufeff]+<\\/span>","<div[^>]+data-mce-bogus[^>]+><\\/div>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function i(){return r(t.getContent({format:"raw",no_events:1}).replace(n,""))}function o(){a.typing=!1,a.add()}var a,s,l,c,d=0,u=[];return t.on("init",function(){a.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&a.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&a.add()}),t.on("ObjectResizeStart",function(){a.beforeChange()}),t.on("SaveContent ObjectResized",o),t.dom.bind(t.dom.getRoot(),"dragend",o),t.dom.bind(t.getBody(),"focusout",function(){!t.removed&&a.typing&&o()}),t.on("KeyUp",function(n){var r=n.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||n.ctrlKey)&&(o(),t.nodeChanged()),(46==r||8==r||e.mac&&(91==r||93==r))&&t.nodeChanged(),l&&a.typing&&(t.isDirty()||(t.isNotDirty=!u[0]||i()==u[0].content,t.isNotDirty||t.fire("change",{level:u[0],lastLevel:null})),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void(a.typing&&o()):void((16>t||t>20)&&224!=t&&91!=t&&!a.typing&&(a.beforeChange(),a.typing=!0,a.add(),l=!0))}),t.on("MouseDown",function(){a.typing&&o()}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos MouseUp",function(e){e.isDefaultPrevented()||t.nodeChanged()}),a={data:u,typing:!1,beforeChange:function(){c||(s=t.selection.getBookmark(2,!0))},add:function(e){var n,r,o=t.settings;if((e=e||{}).content=i(),c||t.fire("BeforeAddUndo",{level:e}).isDefaultPrevented())return null;if((r=u[d])&&r.content==e.content)return null;if(u[d]&&(u[d].beforeBookmark=s),o.custom_undo_redo_levels&&u.length>o.custom_undo_redo_levels){for(n=0;n<u.length-1;n++)u[n]=u[n+1];u.length--,d=u.length}e.bookmark=t.selection.getBookmark(2,!0),d<u.length-1&&(u.length=d+1),u.push(e),d=u.length-1;var a={level:e,lastLevel:r};return t.fire("AddUndo",a),d>0&&(t.fire("change",a),t.isNotDirty=!1),e},undo:function(){var e;return a.typing&&(a.add(),a.typing=!1),d>0&&(e=u[--d],0===d&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return d<u.length-1&&(e=u[++d],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){u=[],d=0,a.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return d>0||a.typing&&u[0]&&i()!=u[0].content},hasRedo:function(){return d<u.length-1&&!this.typing},transact:function(e){a.beforeChange(),c=!0,e(),c=!1,a.add()}}}}),r(H,[d,p],function(e,t){var n=t.ie&&t.ie<11;return function(r){function i(i){function u(e){return e&&o.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==o.getContentEditable(e)}function f(e){var t;o.isBlock(e)&&(t=a.getRng(),e.appendChild(o.create("span",null,"\xa0")),a.select(e),e.lastChild.outerHTML="",a.setRng(t))}function m(e){for(var t,n=e,r=[];n=n.firstChild;){if(o.isBlock(n))return;1!=n.nodeType||d[n.nodeName.toLowerCase()]||r.push(n)}for(t=r.length;t--;)!(n=r[t]).hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?o.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&o.remove(n)}function p(n){function r(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var i,s,l,c,u=n;if(t.ie&&t.ie<9&&R&&R.firstChild&&R.firstChild==R.lastChild&&"BR"==R.firstChild.tagName&&o.remove(R.firstChild),"LI"==n.nodeName){var f=r(n.firstChild);f&&/^(UL|OL)$/.test(f.nodeName)&&n.insertBefore(o.doc.createTextNode("\xa0"),n.firstChild)}if(l=o.createRng(),n.hasChildNodes()){for(i=new e(n,n);s=i.current();){if(3==s.nodeType){l.setStart(s,0),l.setEnd(s,0);break}if(d[s.nodeName.toLowerCase()]){l.setStartBefore(s),l.setEndBefore(s);break}u=s,s=i.next()}s||(l.setStart(u,0),l.setEnd(u,0))}else"BR"==n.nodeName?n.nextSibling&&o.isBlock(n.nextSibling)?((!A||9>A)&&(c=o.create("br"),n.parentNode.insertBefore(c,n)),l.setStartBefore(n),l.setEndBefore(n)):(l.setStartAfter(n),l.setEndAfter(n)):(l.setStart(n,0),l.setEnd(n,0));a.setRng(l),o.remove(c),a.scrollIntoView(n)}function h(e){var t=s.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&o.setAttribs(e,s.forced_root_block_attrs)}function g(e){var t,r,i,a=S;if(e||"TABLE"==D?h(t=o.create(e||O)):t=R.cloneNode(!1),i=t,!1!==s.keep_styles)do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)){if("_mce_caret"==a.id)continue;r=a.cloneNode(!1),o.setAttrib(r,"id",""),t.hasChildNodes()?(r.appendChild(t.firstChild),t.appendChild(r)):(i=r,t.appendChild(r))}}while(a=a.parentNode);return n||(i.innerHTML='<br data-mce-bogus="1">'),t}function v(t){var n,r,i;if(3==S.nodeType&&(t?T>0:T<S.nodeValue.length))return!1;if(S.parentNode==R&&I&&!t)return!0;if(t&&1==S.nodeType&&S==R.firstChild)return!0;if("TABLE"===S.nodeName||S.previousSibling&&"TABLE"==S.previousSibling.nodeName)return I&&!t||!I&&t;for(n=new e(S,R),3==S.nodeType&&(t&&0===T?n.prev():t||T!=S.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),d[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function y(e,t){var n,i,a,s,l,d,f=O||"P";if(i=o.getParent(e,o.isBlock),d=r.getBody().nodeName.toLowerCase(),!i||!u(i)){if(!(i=i||N).hasChildNodes())return h(n=o.create(f)),i.appendChild(n),F.setStart(n,0),F.setEnd(n,0),n;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!o.isBlock(s);)a=s,s=s.previousSibling;if(a&&c.isValidChild(d,f.toLowerCase())){for(h(n=o.create(f)),a.parentNode.insertBefore(n,a),s=a;s&&!o.isBlock(s);)l=s.nextSibling,n.appendChild(s),s=l;F.setStart(e,t),F.setEnd(e,t)}}return e}function b(){function e(e){for(var t=M[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===R}function t(){var e=M.parentNode;return"LI"==e.nodeName?e:M}var n=M.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(O="LI"),H=O?g(O):o.create("BR"),e(!0)&&e()?"LI"==n?o.insertAfter(H,t()):o.replace(H,M):e(!0)?"LI"==n?(o.insertAfter(H,t()),H.appendChild(o.doc.createTextNode(" ")),H.appendChild(M)):M.parentNode.insertBefore(H,M):e()?(o.insertAfter(H,t()),f(H)):(M=t(),(E=F.cloneRange()).setStartAfter(R),E.setEndAfter(M),L=E.extractContents(),"LI"==O&&"LI"==L.firstChild.nodeName?(H=L.firstChild,o.insertAfter(L,M)):(o.insertAfter(L,M),o.insertAfter(H,M))),o.remove(R),p(H),l.add()}function C(){for(var t,n=new e(S,R);t=n.next();)if(d[t.nodeName.toLowerCase()]||t.length>0)return!0}function x(){var e,t,r;S&&3==S.nodeType&&T>=S.nodeValue.length&&(n||C()||(e=o.create("br"),F.insertNode(e),F.setStartAfter(e),F.setEndAfter(e),t=!0)),e=o.create("br"),F.insertNode(e),n&&"PRE"==D&&(!A||8>A)&&e.parentNode.insertBefore(o.doc.createTextNode("\r"),e),r=o.create("span",{},"&nbsp;"),e.parentNode.insertBefore(r,e),a.scrollIntoView(r),o.remove(r),t?(F.setStartBefore(e),F.setEndBefore(e)):(F.setStartAfter(e),F.setEndAfter(e)),a.setRng(F),l.add()}function _(e){do{3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}function w(e){var t,n,r=o.getRoot();for(t=e;t!==r&&"false"!==o.getContentEditable(t);)"true"===o.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==r?n:r}function k(e){var t;n||(e.normalize(),(!(t=e.lastChild)||/^(left|right)$/gi.test(o.getStyle(t,"float",!0)))&&o.add(e,"br"))}var E,N,S,T,R,A,B,H,L,M,D,P,O,I,F=a.getRng(!0);if(F.collapsed){if(!i.isDefaultPrevented()&&(S=F.startContainer,T=F.startOffset,O=(O=(s.force_p_newlines?"p":"")||s.forced_root_block)?O.toUpperCase():"",A=o.doc.documentMode,B=i.shiftKey,1==S.nodeType&&S.hasChildNodes()&&(I=T>S.childNodes.length-1,S=S.childNodes[Math.min(T,S.childNodes.length-1)]||S,T=I&&3==S.nodeType?S.nodeValue.length:0),N=w(S))){if(l.beforeChange(),!o.isBlock(N)&&N!=o.getRoot())return void((!O||B)&&x());if((O&&!B||!O&&B)&&(S=y(S,T)),R=o.getParent(S,o.isBlock),M=R?o.getParent(R.parentNode,o.isBlock):null,D=R?R.nodeName.toUpperCase():"","LI"!=(P=M?M.nodeName.toUpperCase():"")||i.ctrlKey||(R=M,D=P),"LI"==D){if(!O&&B)return void x();if(o.isEmpty(R))return void b()}if("PRE"==D&&!1!==s.br_in_pre){if(!B)return void x()}else if(!O&&!B&&"LI"!=D||O&&B)return void x();O&&R===r.getBody()||(O=O||"P",v()?(H=/^(H[1-6]|PRE|FIGURE)$/.test(D)&&"HGROUP"!=P?g(O):g(),s.end_container_on_empty_block&&u(M)&&o.isEmpty(R)?H=o.split(M,R):o.insertAfter(H,R),p(H)):v(!0)?(f(H=R.parentNode.insertBefore(g(),R)),p(R)):((E=F.cloneRange()).setEndAfter(R),_(L=E.extractContents()),H=L.firstChild,o.insertAfter(L,R),m(H),k(R),p(H)),o.setAttrib(H,"id",""),r.fire("NewBlock",{newBlock:H}),l.add())}}else r.execCommand("Delete")}var o=r.dom,a=r.selection,s=r.settings,l=r.undoManager,c=r.schema,d=c.getNonEmptyElements();r.on("keydown",function(e){13==e.keyCode&&!1!==i(e)&&e.preventDefault()})}}),r(L,[],function(){return function(e){function t(){var t,s,l,c,d,u,f,m,p,h,g,v,y=i.getStart(),b=e.getBody(),x=-16777215;if(v=n.forced_root_block,y&&1===y.nodeType&&v){for(;y&&y!=b;){if(a[y.nodeName])return;y=y.parentNode}if((t=i.getRng()).setStart){s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset;try{p=e.getDoc().activeElement===b}catch(C){}}else t.item&&(y=t.item(0),(t=e.getDoc().body.createTextRange()).moveToElementText(y)),p=t.parentElement().ownerDocument===e.getDoc(),(h=t.duplicate()).collapse(!0),l=-1*h.move("character",x),h.collapsed||((h=t.duplicate()).collapse(!1),d=-1*h.move("character",x)-l);for(y=b.firstChild,g=b.nodeName.toLowerCase();y;)if((3===y.nodeType||1==y.nodeType&&!a[y.nodeName])&&o.isValidChild(g,v.toLowerCase())){if(3===y.nodeType&&0===y.nodeValue.length){f=y,y=y.nextSibling,r.remove(f);continue}u||(u=r.create(v,e.settings.forced_root_block_attrs),y.parentNode.insertBefore(u,y),m=!0),f=y,y=y.nextSibling,u.appendChild(f)}else u=null,y=y.nextSibling;if(m&&p){if(t.setStart)t.setStart(s,l),t.setEnd(c,d),i.setRng(t);else try{(t=e.getDoc().body.createTextRange()).moveToElementText(b),t.collapse(!0),t.moveStart("character",l),d>0&&t.moveEnd("character",d),t.select()}catch(C){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,o=e.schema,a=o.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),r(M,[w,p,u],function(e,n,r){var i=r.each,o=r.extend,a=r.map,s=r.inArray,l=r.explode,c=n.gecko,d=n.ie,u=!0,f=!1;return function(r){function m(e,t,n){var r;return e=e.toLowerCase(),(r=E.exec[e])?(r(e,t,n),u):f}function p(e){var t;return e=e.toLowerCase(),(t=E.state[e])?t(e):-1}function h(e){var t;return e=e.toLowerCase(),(t=E.value[e])?t(e):f}function g(e,t){t=t||"exec",i(e,function(e,n){i(n.toLowerCase().split(","),function(n){E[t][n]=e})})}function v(e,n,i){return n===t&&(n=f),i===t&&(i=null),r.getDoc().execCommand(e,n,i)}function y(e){return S.match(e)}function b(e,n){S.toggle(e,n?{value:n}:t),r.nodeChanged()}function C(e){_=k.getBookmark(e)}function x(){k.moveToBookmark(_)}var _,w=r.dom,k=r.selection,E={state:{},exec:{},value:{}},N=r.settings,S=r.formatter;o(this,{execCommand:m,queryCommandState:p,queryCommandValue:h,addCommands:g}),g({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(e){var t,i=r.getDoc();try{v(e)}catch(o){t=u}if(t||!i.queryCommandSupported(e)){var a=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(a=a.replace(/Ctrl\+/g,"\u2318+")),r.windowManager.alert(a)}},unlink:function(){if(k.isCollapsed()){var e=k.getNode();"A"==e.tagName&&r.dom.remove(e,!0)}else S.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),i("left,center,right,justify".split(","),function(e){t!=e&&S.remove("align"+e)}),b("align"+t),m("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;v(e),(t=w.getParent(k.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(C(),w.split(n,t),x()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){b(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){b(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=l(N.font_size_style_values),n=(r=l(N.font_size_classes))?r[n-1]||n:i[n-1]||n),b(e,n)},RemoveFormat:function(e){S.remove(e)},mceBlockQuote:function(){b("blockquote")},FormatBlock:function(e,t,n){return b(n||"p")},mceCleanup:function(){var e=k.getBookmark();r.setContent(r.getContent({cleanup:u}),{cleanup:u}),k.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||k.getNode();i!=r.getBody()&&(C(),r.dom.remove(i,u),x())},mceSelectNodeDepth:function(e,t,n){var i=0;w.getParent(k.getNode(),function(e){return 1==e.nodeType&&i++==n?(k.select(e),f):void 0},r.getBody())},mceSelectNode:function(e,t,n){k.select(n)},mceInsertContent:function(t,n,i){function o(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=k.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),i<r.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}var a,s,l,c,u,f,m,p,h,g,v;/^ | $/.test(i)&&(i=o(i)),a=r.parser,s=new e({},r.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#200B;</span>',f={content:i,format:"html",selection:!0},r.fire("BeforeSetContent",f),-1==(i=f.content).indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,v);var y=(p=k.getRng()).startContainer||(p.parentElement?p.parentElement():null),b=r.getBody();y===b&&k.isCollapsed()&&w.isBlock(b.firstChild)&&w.isEmpty(b.firstChild)&&((p=w.createRng()).setStart(b.firstChild,0),p.setEnd(b.firstChild,0),k.setRng(p)),k.isCollapsed()||r.getDoc().execCommand("Delete",!1,null);var C={context:(l=k.getNode()).nodeName.toLowerCase()};if("mce_marker"==(h=(u=a.parse(i,C)).lastChild).attr("id"))for(m=h,h=h.prev;h;h=h.walk(!0))if(3==h.type||!w.isBlock(h.name)){h.parent.insert(m,h,"br"===h.name);break}if(C.invalid){for(k.setContent(v),l=k.getNode(),c=r.getBody(),9==l.nodeType?l=h=c:h=l;h!==c;)l=h,h=h.parentNode;i=l==c?c.innerHTML:w.getOuterHTML(l),i=s.serialize(a.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return s.serialize(u)}))),l==c?w.setHTML(c,i):w.setOuterHTML(l,i)}else i=s.serialize(u),h=l.firstChild,g=l.lastChild,!h||h===g&&"BR"===h.nodeName?w.setHTML(l,i):k.setContent(i);m=w.get("mce_marker"),k.scrollIntoView(m),p=w.createRng(),(h=m.previousSibling)&&3==h.nodeType?(p.setStart(h,h.nodeValue.length),d||(g=m.nextSibling)&&3==g.nodeType&&(h.appendData(g.data),g.parentNode.removeChild(g))):(p.setStartBefore(m),p.setEndBefore(m)),w.remove(m),k.setRng(p),r.fire("SetContent",f),r.addVisual()},mceInsertRawHTML:function(e,t,n){k.setContent("tiny_mce_marker"),r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){b(n)},mceSetContent:function(e,t,n){r.setContent(n)},"Indent,Outdent":function(e){var t,n,r;t=N.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),p("InsertUnorderedList")||p("InsertOrderedList")?v(e):(N.forced_root_block||w.getParent(k.getNode(),w.isBlock)||S.apply("div"),i(k.getSelectedBlocks(),function(i){var o;"LI"!=i.nodeName&&(o="rtl"==w.getStyle(i,"direction",!0)?"paddingRight":"paddingLeft","outdent"==e?(r=Math.max(0,parseInt(i.style[o]||0,10)-t),w.setStyle(i,o,r?r+n:"")):(r=parseInt(i.style[o]||0,10)+t+n,w.setStyle(i,o,r)))}))},mceRepaint:function(){if(c)try{C(u),k.getSel()&&k.getSel().selectAllChildren(r.getBody()),k.collapse(u),x()}catch(e){}},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(e,t,n){r.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,k.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=w.getParent(k.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||S.remove("link"),n.href&&S.apply("link",n,r)},selectAll:function(){var e,t=w.getRoot();k.getRng().setStart?((e=w.createRng()).setStart(t,0),e.setEnd(t,t.childNodes.length),k.setRng(e)):(e=k.getRng()).item||(e.moveToElementText(t),e.select())},"delete":function(){v("Delete");var e=r.getBody();w.isEmpty(e)&&(r.setContent(""),e.firstChild&&w.isBlock(e.firstChild)?r.selection.setCursorLocation(e.firstChild,0):r.selection.setCursorLocation(e,0))},mceNewDocument:function(){r.setContent("")}}),g({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=k.isCollapsed()?[w.getParent(k.getNode(),w.isBlock)]:k.getSelectedBlocks(),r=a(n,function(e){return!!S.matchNode(e,t)})
;return-1!==s(r,u)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return y(e)},mceBlockQuote:function(){return y("blockquote")},Outdent:function(){var e;if(N.inline_styles){if((e=w.getParent(k.getStart(),w.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return u;if((e=w.getParent(k.getEnd(),w.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return u}return p("InsertUnorderedList")||p("InsertOrderedList")||!N.inline_styles&&!!w.getParent(k.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=w.getParent(k.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),g({"FontSize,FontName":function(e){var t,n=0;return(t=w.getParent(k.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),g({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}}),r(D,[u],function(e){function t(e,i){var o,a,s=this;if(e=r(e),i=s.settings=i||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))s.source=e;else{var l=0===e.indexOf("//");0!==e.indexOf("/")||l||(e=(i.base_uri&&i.base_uri.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(a=i.base_uri?i.base_uri.path:new t(location.href).directory,e=""===i.base_uri.protocol?"//mce_host"+s.toAbsPath(a,e):(i.base_uri&&i.base_uri.protocol||"http")+"://mce_host"+s.toAbsPath(a,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),s[t]=r}),(o=i.base_uri)&&(s.protocol||(s.protocol=o.protocol),s.userInfo||(s.userInfo=o.userInfo),s.port||"mce_host"!==s.host||(s.port=o.port),s.host&&"mce_host"!==s.host||(s.host=o.host),s.source=""),l&&(s.protocol="")}}var n=e.each,r=e.trim;return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n,r=this;if("./"===e)return e;if("mce_host"!=(e=new t(e,{base_uri:r})).host&&r.host!=e.host&&e.host||r.port!=e.port||r.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var i=r.getURI(),o=e.getURI();return i==o||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==o?i:(n=r.toRelPath(r.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,n){return(e=new t(e,{base_uri:this})).getURI(this.host==e.host&&this.protocol==e.protocol?n:0)},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;i>r;r++)if(r>=n.length||e[r]!=n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;i>r;r++)if(r>=e.length||e[r]!=n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);i>r;r++)a+="../";for(r=o-1,i=n.length;i>r;r++)a+=r!=o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var r,i,o,a=0,s=[];for(i=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,r=t.length-1,s=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?a>0?a--:s.push(t[r]):a++);return 0!==(o=0>=(r=e.length-a)?s.reverse().join("/"):e.slice(0,r).join("/")+"/"+s.reverse().join("/")).indexOf("/")&&(o="/"+o),i&&o.lastIndexOf("/")!==o.length-1&&(o+=i),o},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),r(P,[u],function(e){function t(){}var n,r,i=e.each,o=e.extend;return t.extend=n=function(e){function t(){var e,t,n,i;if(!r&&((i=this).init&&i.init.apply(i,arguments),t=i.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(i,arguments)}function a(){return this}function s(e,t){return function(){var n,r=this,i=r._super;return r._super=f[e],n=t.apply(r,arguments),r._super=i,n}}var l,c,d,u=this,f=u.prototype;for(c in r=!0,l=new u,r=!1,e.Mixins&&(i(e.Mixins,function(t){for(var n in t=t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&i(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&i(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,r=this;return e!==t?(r[n]=e,r):r[n]}}),e.Statics&&i(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=o({},f.Defaults,e.Defaults)),e)d=e[c],l[c]="function"==typeof d&&f[c]?s(c,d):d;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),r(O,[P],function(e){function t(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}var n,r=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,a=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function n(e){return e?function(t){return t._name===e}:void 0}function a(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function s(e,t,n){return e?function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!=n:"^="===t?0===i.indexOf(n):"$="===t&&i.substr(i.length-n.length)===n:!!n}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(t=d(e[1],[]),function(e){return!u(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()}):void 0}function c(e,i,c){function d(e){e&&i.push(e)}var u;return d(t((u=r.exec(e.replace(o,"")))[1])),d(n(u[2])),d(a(u[3])),d(s(u[4],u[5],u[6])),d(l(u[7])),i.psuedo=!!u[7],i.direct=c,i}function d(e,t){var n,r,o,a=[];do{if(i.exec(""),(r=i.exec(e))&&(e=r[3],a.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&d(n,t),e=[],o=0;o<a.length;o++)">"!=a[o]&&e.push(c(a[o],[],">"===a[o-1]));return t.push(e),t}var u=this.match;this._selectors=d(e,[])},match:function(e,t){var n,r,i,o,a,s,l,c,d,u,f,m,p;for(n=0,r=(t=t||this._selectors).length;r>n;n++){for(p=e,m=0,i=(o=(a=t[n]).length)-1;i>=0;i--)for(c=a[i];p;){if(c.psuedo)for(d=u=(f=p.parent().items()).length;d--&&f[d]!==p;);for(s=0,l=c.length;l>s;s++)if(!c[s](p,d,u)){s=l+1;break}if(s===l){m++;break}if(i===o-1)break;p=p.parent()}if(m===o)return!0}return!1},find:function(e){function r(e,t,n){var i,o,a,l,c,d=t[n];for(i=0,o=e.length;o>i;i++){for(c=e[i],a=0,l=d.length;l>a;a++)if(!d[a](c,i,o)){a=l+1;break}if(a===l)n==t.length-1?s.push(c):c.items&&r(c.items(),t,n+1);else if(d.direct)return;c.items&&r(c.items(),t,n)}}var i,o,s=[],l=this._selectors;if(e.items){for(i=0,o=l.length;o>i;i++)r(e.items(),l[i],0);o>1&&(s=t(s))}return n||(n=a.Collection),new n(s)}});return a}),r(I,[u,O,P],function(e,t,n){var r,i,o=Array.prototype.push,a=Array.prototype.slice;return i={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?o.apply(n,t):t instanceof r?n.add(t.toArray()):o.call(n,t),n},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;r>t;t++)delete n[t];return n},filter:function(e){var n,i,o,a,s=this,l=[];for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,n=0,i=s.length;i>n;n++)a(o=s[n])&&l.push(o);return new r(l)},slice:function(){return new r(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].hasClass(e)},prop:function(e,t){var n,r,i=this;return t!==n?(i.each(function(n){n[e]&&n[e](t)}),i):(r=i[0])&&r[e]?r[e]():void 0},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){i[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){i[e]=function(t){return this.prop(e,t)}}),r=n.extend(i),t.Collection=r,r}),r(F,[u,h],function(e,t){return{id:function(){return t.DOM.uniqueId()},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),r(z,[P,u,I,F],function(e,t,n,r){var i=t.makeMap("focusin focusout scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave wheel keydown keypress keyup contextmenu"," "),o={},a="onmousewheel"in document,s=!1,l=e.extend({Statics:{controlIdLookup:{},elementIdCache:o},isRtl:function(){return l.rtl},classPrefix:"mce-",init:function(e){var n,i,o=this;if(o.settings=e=t.extend({},o.Defaults,e),o._id=r.id(),o._text=o._name="",o._width=o._height=0,o._aria={role:e.role},n=e.classes)for((n=n.split(" ")).map={},i=n.length;i--;)n.map[n[i]]=!0;o._classes=n||[],o.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var n,r=e[t];r!==n?o[t](r):o["_"+t]===n&&(o["_"+t]=!1)}),o.on("click",function(){return!o.disabled()&&void 0}),e.classes&&t.each(e.classes.split(" "),function(e){o.addClass(e)}),o.settings=e,o._borderBox=o.parseBox(e.border),o._paddingBox=o.parseBox(e.padding),o._marginBox=o.parseBox(e.margin),e.hidden&&o.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t;e&&!(t=l.controlIdLookup[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e,t,n,i,o,a,s,l,c,d,u=this,f=u.settings,m=u.getEl();e=u._borderBox=u._borderBox||u.measureBox(m,"border"),u._paddingBox=u._paddingBox||u.measureBox(m,"padding"),u._marginBox=u._marginBox||u.measureBox(m,"margin"),d=r.getSize(m),l=f.minWidth,c=f.minHeight,o=l||d.width,a=c||d.height,n=f.width,i=f.height,s=void 0!==(s=f.autoResize)?s:!n&&!i,n=n||o,i=i||a;var p=e.left+e.right,h=e.top+e.bottom,g=f.maxWidth||65535,v=f.maxHeight||65535;return u._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:i,deltaW:p,deltaH:h,contentW:n-p,contentH:i-h,innerW:n-p,innerH:i-h,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(o,g),minH:Math.min(a,v),maxW:g,maxH:v,autoResize:s,scrollW:0},u._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,i,o,a,s=this,c=s._layoutRect;return c||(c=s.initLayoutRect()),e?(r=c.deltaW,i=c.deltaH,e.x!==o&&(c.x=e.x),e.y!==o&&(c.y=e.y),e.minW!==o&&(c.minW=e.minW),e.minH!==o&&(c.minH=e.minH),(n=e.w)!==o&&(n=(n=n<c.minW?c.minW:n)>c.maxW?c.maxW:n,c.w=n,c.innerW=n-r),(n=e.h)!==o&&(n=(n=n<c.minH?c.minH:n)>c.maxH?c.maxH:n,c.h=n,c.innerH=n-i),(n=e.innerW)!==o&&(n=(n=n<c.minW-r?c.minW-r:n)>c.maxW-r?c.maxW-r:n,c.innerW=n,c.w=n+r),(n=e.innerH)!==o&&(n=(n=n<c.minH-i?c.minH-i:n)>c.maxH-i?c.maxH-i:n,c.innerH=n,c.h=n+i),e.contentW!==o&&(c.contentW=e.contentW),e.contentH!==o&&(c.contentH=e.contentH),((t=s._lastLayoutRect).x!==c.x||t.y!==c.y||t.w!==c.w||t.h!==c.h)&&((a=l.repaintControls)&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),t.x=c.x,t.y=c.y,t.w=c.w,t.h=c.h),s):c},repaint:function(){var e,t,n,r,i,o,a=this,s=0,l=0;o=document.createRange?function(e){return e}:Math.round,e=a.getEl().style,n=a._layoutRect,i=a._lastRepaintRect||{},s=(r=a._borderBox).left+r.right,l=r.top+r.bottom,n.x!==i.x&&(e.left=o(n.x)+"px",i.x=n.x),n.y!==i.y&&(e.top=o(n.y)+"px",i.y=n.y),n.w!==i.w&&(e.width=o(n.w-s)+"px",i.w=n.w),n.h!==i.h&&(e.height=o(n.h-l)+"px",i.h=n.h),a._hasBody&&n.innerW!==i.innerW&&((t=a.getEl("body").style).width=o(n.innerW)+"px",i.innerW=n.innerW),a._hasBody&&n.innerH!==i.innerH&&((t=t||a.getEl("body").style).height=o(n.innerH)+"px",i.innerH=n.innerH),a._lastRepaintRect=i,a.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return function(r){return t||l.parents().each(function(r){var i=r.settings.callbacks;return i&&(t=i[e])?(n=r,!1):void 0}),t.call(n,r)}}var r,o,a,s,l=this;if(t)for("string"==typeof t&&(t=n(t)),s=(a=e.toLowerCase().split(" ")).length;s--;)e=a[s],(r=l._bindings)||(r=l._bindings={}),(o=r[e])||(o=r[e]=[]),o.push(t),i[e]&&(l._nativeEvents?l._nativeEvents[e]=!0:l._nativeEvents={name:!0},l._rendered&&l.bindPendingEvents());return l},off:function(e,t){var n,r,i,o,a,s=this,l=s._bindings;if(l)if(e)for(n=(o=e.toLowerCase().split(" ")).length;n--;){if(r=l[e=o[n]],!e){for(i in l)l[i].length=0;return s}if(r)if(t)for(a=r.length;a--;)r[a]===t&&r.splice(a,1);else r.length=0}else s._bindings=[];return s},fire:function(e,t,n){function r(){return!1}function i(){return!0}var o,a,s,l,c=this;if(e=e.toLowerCase(),(t=t||{}).type||(t.type=e),t.control||(t.control=c),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=i},t.stopPropagation=function(){t.isPropagationStopped=i},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=i},t.isDefaultPrevented=r,t.isPropagationStopped=r,t.isImmediatePropagationStopped=r),c._bindings&&(s=c._bindings[e]))for(o=0,a=s.length;a>o&&(t.isImmediatePropagationStopped()||!1!==s[o].call(c,t));o++);if(!1!==n)for(l=c.parent();l&&!t.isPropagationStopped();)l.fire(e,t,!1),l=l.parent();return t},hasEventListeners:function(e){return e in this._bindings},parents:function(e){var t=this,r=new n;for(t=t.parent();t;t=t.parent())r.add(t);return e&&(r=r.filter(e)),r},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n,r,i=this;return e=this.classPrefix+e,(n=i._classes[t||"control"])||((n=[]).map={},i._classes[t||"control"]=n),n.map[e]||(n.map[e]=e,n.push(e),i._rendered&&((r=i.getEl(t))&&(r.className=n.join(" ")))),i},removeClass:function(e,t){var n,r,i,o=this;if(e=this.classPrefix+e,(n=o._classes[t||"control"])&&n.map[e])for(delete n.map[e],r=n.length;r--;)n[r]===e&&n.splice(r,1);return o._rendered&&((i=o.getEl(t))&&(i.className=n.join(" "))),o},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return r.innerHtml(this.getEl(),e),this},getEl:function(e,t){var n=e?this._id+"-"+e:this._id;return o[n]=(!0===t?null:o[n])||r.get(n)},visible:function(e){var t,n=this;return void 0!==e?(n._visible!==e&&(n._rendered&&(n.getEl().style.display=e?"":"none"),n._visible=e,(t=n.parent())&&(t._lastRect=null),n.fire(e?"show":"hide")),n):n._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl();return void 0===t?n._aria[e]:(n._aria[e]=t,n._rendered&&("label"==e&&r.setAttribute("aria-labeledby",n._id),r.setAttribute("role"==e?e:"aria-"+e,t)),n)},encode:function(e,t){return!1!==t&&l.translate&&(e=l.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,i=n.getEl(),a=n.parent();if(n.items){var s=n.items().toArray();for(t=s.length;t--;)s[t].remove()}if(a&&a.items&&(e=[],a.items().each(function(t){t!==n&&e.push(t)}),a.items().set(e),a._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&r.off(i),delete l.controlIdLookup[n._id],delete o[n._id],i&&i.parentNode){var c=i.getElementsByTagName("*");for(t=c.length;t--;)delete o[c[t].id];i.parentNode.removeChild(i)}return n},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(r.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return(e=e||t.getContainerElm()).appendChild(r.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e,t,n,i,o,a=this,s=a.settings;for(i in s)0===i.indexOf("on")&&a.on(i.substr(2),s[i]);if(a._eventsRoot){for(n=a.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(i in o._nativeEvents)a._nativeEvents[i]=!0}for(var c in a.bindPendingEvents(),s.style&&((e=a.getEl())&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),a._visible||r.css(a.getEl(),"display","none"),a.settings.border&&(t=a.borderBox(),r.css(a.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),l.controlIdLookup[a._id]=a,a._aria)a.aria(c,a._aria[c]);a.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n,r,i,o,a,s,l=this.getEl(),c=l.parentNode,d=t(l,c);return n=d.x,r=d.y,i=l.offsetWidth,o=l.offsetHeight,a=c.clientWidth,s=c.clientHeight,"end"==e?(n-=a-i,r-=s-o):"center"==e&&(n-=a/2-i/2,r-=s/2-o/2),c.scrollLeft=n,c.scrollTop=r,this},bindPendingEvents:function(){function e(e){var t=m.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=d._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),d._lastHoverCtrl=null)}function n(e){var t,n,r,i=m.getParentCtrl(e.target),o=d._lastHoverCtrl,a=0;if(i!==o){if(d._lastHoverCtrl=i,(n=i.parents().toArray().reverse()).push(i),o){for((r=o.parents().toArray().reverse()).push(o),a=0;a<r.length&&n[a]===r[a];a++);for(t=r.length-1;t>=a;t--)(o=r[t]).fire("mouseleave",{target:o.getEl()})}for(t=a;t<n.length;t++)(i=n[t]).fire("mouseenter",{target:i.getEl()})}}function i(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=m.fire("wheel",e)}var o,l,c,d,u,f,m=this;if(m._rendered=!0,u=m._nativeEvents){for((c=m.parents().toArray()).unshift(m),o=0,l=c.length;!d&&l>o;o++)d=c[o]._eventsRoot;for(d||(d=c[c.length-1]||m),m._eventsRoot=d,l=o,o=0;l>o;o++)c[o]._eventsRoot=d;for(f in u){if(!u)return!1;"wheel"!==f||s?("mouseenter"===f||"mouseleave"===f?d._hasMouseEnter||(r.on(d.getEl(),"mouseleave",t),r.on(d.getEl(),"mouseover",n),d._hasMouseEnter=1):d[f]||(r.on(d.getEl(),f,e),d[f]=!0),u[f]=!1):a?r.on(m.getEl(),"mousewheel",i):r.on(m.getEl(),"DOMMouseScroll",i)}}},reflow:function(){return this.repaint(),this}});return l}),r(W,[],function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,r){var i,o,a;if(!e){for(o in a=tinymce.ui)t[o.toLowerCase()]=a[o];e=!0}if("string"==typeof n?(r=r||{}).type=n:n=(r=n).type,n=n.toLowerCase(),!(i=t[n]))throw new Error("Could not find control by type: "+n);return(i=new i(r)).type=n,i}}}),r(V,[z,I,O,W,u,F],function(e,t,n,r,i,o){var a={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.isRtl()&&n.addClass("rtl"),n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=r.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return(e=a[e]=a[e]||new n(e)).find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(){var e=this;return e.keyNav?e.keyNav.focusFirst():e._super(),e},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,o=this,a=[];return i.isArray(t)||(t=[t]),i.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=i.extend({},o.settings.defaults,t),t.type=n.type=n.type||t.type||o.settings.defaultType||(n.defaults?n.defaults.type:null),t=r.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=o.createFragment(t.renderHtml()),r.hasChildNodes()&&n<=r.childNodes.length-1?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r,i,o,a=this;return e=a.create(e),r=a.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(i=r.slice(0,t).toArray(),o=r.slice(t).toArray(),r.set(i.concat(e,o))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e={};return this.find("*").each(function(t){var n=t.name(),r=t.value();n&&void 0!==r&&(e[n]=r)}),e},preRender:function(){},renderHtml:function(){var e=this,t=e._layout;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" role="'+this.settings.role+'"><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t._rendered=!0,t.settings.style&&o.css(t.getEl(),t.settings.style),t.settings.border&&(e=t.borderBox(),o.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(U,[F],function(e){function t(){var e,t,n,r,i,o,a,s=document,l=Math.max;return e=s.documentElement,t=s.body,n=l(e.scrollWidth,t.scrollWidth),r=l(e.clientWidth,t.clientWidth),i=l(e.offsetWidth,t.offsetWidth),o=l(e.scrollHeight,t.scrollHeight),a=l(e.clientHeight,t.clientHeight),{width:i>n?r:n,height:l(e.offsetHeight,t.offsetHeight)>o?a:o}}return function(n,r){function i(){return f.getElementById(r.handle||n)}var o,a,s,l,c,d,u,f=document;r=r||{},s=function(n){var s,m,p=t();n.preventDefault(),a=n.button,s=i(),d=n.screenX,u=n.screenY,m=window.getComputedStyle?window.getComputedStyle(s,null).getPropertyValue("cursor"):s.runtimeStyle.cursor,o=f.createElement("div"),e.css(o,{position:"absolute",top:0,left:0,width:p.width,height:p.height,zIndex:2147483647,opacity:1e-4,background:"red",cursor:m}),f.body.appendChild(o),e.on(f,"mousemove",c),e.on(f,"mouseup",l),r.start(n)},c=function(e){return e.button!==a?l(e):(e.deltaX=e.screenX-d,e.deltaY=e.screenY-u,e.preventDefault(),void r.drag(e))},l=function(t){e.off(f,"mousemove",c),e.off(f,"mouseup",l),o.parentNode.removeChild(o),r.stop&&r.stop(t)},this.destroy=function(){e.off(i())},e.on(i(),"mousedown",s)}}),r(q,[F,U],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,c,d){var u,f,m,p,h,g,v,y;if(f=i.getEl("scroll"+t)){if(v=a.toLowerCase(),y=s.toLowerCase(),i.getEl("absend")&&e.css(i.getEl("absend"),v,i.layoutRect()[l]-1),!c)return void e.css(f,"display","none");e.css(f,"display","block"),u=i.getEl("body"),m=i.getEl("scroll"+t+"t"),p=u["client"+s]-2*o,h=(p-=n&&r?f["client"+d]:0)/u["scroll"+s],(g={})[v]=u["offset"+a]+o,g[y]=p,e.css(f,g),(g={})[v]=u["scroll"+a]*h,g[y]=p*h,e.css(m,g)}}var n,r,a;a=i.getEl("body"),n=a.scrollWidth>a.clientWidth,r=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,a,s,l){var c,d=i._id+"-scroll"+n,u=i.classPrefix;i.getEl().appendChild(e.createFragment('<div id="'+d+'" class="'+u+"scrollbar "+u+"scrollbar-"+n+'"><div id="'+d+'t" class="'+u+'scrollbar-thumb"></div></div>')),i.draghelper=new t(d+"t",{start:function(){c=i.getEl("body")["scroll"+r],e.addClass(e.get(d),u+"active")},drag:function(e){var t,d,u,f,m=i.layoutRect();d=m.contentW>m.innerW,u=m.contentH>m.innerH,f=i.getEl("body")["client"+a]-2*o,t=(f-=d&&u?i.getEl("scroll"+n)["client"+l]:0)/i.getEl("body")["scroll"+a],i.getEl("body")["scroll"+r]=c+e["delta"+s]/t},stop:function(){e.removeClass(e.get(d),u+"active")}})}i.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var i=this,o=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,r(),i.on("wheel",function(e){var t=i.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(i.getEl("body"),"scroll",n)),n())}}}),r(j,[V,q],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e._preBodyHtml||"")+n+"</div>"}})}),r($,[F],function(e){function t(t,n,r){var i,o,a,s,l,c,d,u,f,m;return f=e.getViewPort(),a=(o=e.getPos(n)).x,s=o.y,t._fixed&&(a-=f.x,s-=f.y),i=t.getEl(),l=(m=e.getSize(i)).width,c=m.height,d=(m=e.getSize(n)).width,u=m.height,"b"===(r=(r||"").split(""))[0]&&(s+=u),"r"===r[1]&&(a+=d),"c"===r[0]&&(s+=Math.round(u/2)),"c"===r[1]&&(a+=Math.round(d/2)),"b"===r[3]&&(s-=c),"r"===r[4]&&(a-=l),"c"===r[3]&&(s-=Math.round(c/2)),"c"===r[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:c}}return{testMoveRel:function(n,r){for(var i=e.getViewPort(),o=0;o<r.length;o++){var a=t(this,n,r[o]);if(this._fixed){if(a.x>0&&a.x+a.w<i.w&&a.y>0&&a.y+a.h<i.h)return r[o]}else if(a.x>i.x&&a.x+a.w<i.w+i.x&&a.y>i.y&&a.y+a.h<i.h+i.y)return r[o]}return r[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function r(e,t,n){return 0>e?0:e+n>t?0>(e=t-n)?0:e:e}var i=this;if(i.settings.constrainToViewport){var o=e.getViewPort(window),a=i.layoutRect();t=r(t,o.w+o.x,a.w),n=r(n,o.h+o.y,a.h)}return i._rendered?i.layoutRect({x:t,y:n}).repaint():(i.settings.x=t,i.settings.y=n),i.fire("move",{x:t,y:n}),i}}}),r(K,[F],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(Y,[j,$,K,F],function(e,t,n,r){function i(e){var t;for(t=l.length;t--;)l[t]===e&&l.splice(t,1);for(t=c.length;t--;)c[t]===e&&c.splice(t,1)}var o,a,s,l=[],c=[],d=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t,n=d.zIndex||65535;if(c.length)for(e=0;e<c.length;e++)c[e].modal&&(n++,t=c[e]),c[e].getEl().style.zIndex=n,c[e].zIndex=n,n++;var i=document.getElementById(u.classPrefix+"modal-block");t?r.css(i,"z-index",t.zIndex-1):i&&(i.parentNode.removeChild(i),s=!1),d.currentZIndex=n}function n(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function i(e){function t(t,n){for(var r,i=0;i<l.length;i++)if(l[i]!=e)for(r=l[i].parent();r&&(r=r.parent());)r==e&&l[i].fixed(t).moveBy(0,n).repaint()}var n=r.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}var u=this;u._super(e),u._eventsRoot=u,u.addClass("floatpanel"),e.autohide&&(o||(o=function(e){var t,r=u.getParentCtrl(e.target);for(t=l.length;t--;){var i=l[t];if(i.settings.autohide){if(r&&(n(r,i)||i.parent()===r))continue;(e=i.fire("autohide",{target:e.target})).isDefaultPrevented()||i.hide()}}},r.on(document,"click",o)),l.push(u)),e.autofix&&(a||(a=function(){var e;for(e=l.length;e--;)i(l[e])},r.on(window,"scroll",a)),u.on("move",function(){i(this)})),u.on("postrender show",function(e){if(e.control==u){var n,i=u.classPrefix;u.modal&&!s&&(n=(n=r.createFragment('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>')).firstChild,u.getContainerElm().appendChild(n),setTimeout(function(){r.addClass(n,i+"in"),r.addClass(u.getEl(),i+"in")},0),s=!0),c.push(u),t()}}),u.on("close hide",function(e){if(e.control==u){for(var n=c.length;n--;)c[n]===u&&c.splice(n,1);t()}}),u.on("show",function(){u.parents().each(function(e){return e._fixed?(u.fixed(!0),!1):void 0})}),e.popover&&(u._preBodyHtml='<div class="'+u.classPrefix+'arrow"></div>',u.addClass("popover").addClass("bottom").addClass(u.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e,t=this,n=t._super();for(e=l.length;e--&&l[e]!==t;);return-1===e&&l.push(t),n},hide:function(){return i(this),this._super()},hideAll:function(){d.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){i(this),this._super()}});return d.hideAll=function(){for(var e=l.length;e--;){var t=l[e];t.settings.autohide&&(t.fire("cancel",{},!1),t.hide(),l.splice(e,1))}},d}),r(G,[F],function(e){return function(t){function n(){if(!h)if(h=[],f.find)f.find("*").each(function(e){e.canFocus&&h.push(e.getEl())});else for(var e=f.getEl().getElementsByTagName("*"),t=0;t<e.length;t++)e[t].id&&e[t]&&h.push(e[t])}function r(){return document.getElementById(u)}function i(e){return(e=e||r())&&e.getAttribute("role")}function o(e){for(var t,n=e||r();n=n.parentNode;)if(t=i(n))return t}function a(e){var t=document.getElementById(u);return t?t.getAttribute("aria-"+e):void 0}function s(){var n=r();if(!n||"TEXTAREA"!=n.nodeName&&"text"!=n.type)return t.onAction?t.onAction(u):e.fire(r(),"click",{keyboard:!0}),!0}function l(){var e
;t.onCancel?((e=r())&&e.blur(),t.onCancel()):t.root.fire("cancel")}function c(e){function r(e){for(var t=f?f.getEl():document.body;e&&e!=t;){if("none"==e.style.display)return!1;e=e.parentNode}return!0}var i,o,a=-1,l=[];for(n(),o=l.length,o=0;o<h.length;o++)r(h[o])&&l.push(h[o]);for(o=l.length;o--;)if(l[o].id===u){a=o;break}0>(a+=e)?a=l.length-1:a>=l.length&&(a=0),(i=l[a]).focus(),u=i.id,t.actOnFocus&&s()}function d(){var e,r;for(r=i(t.root.getEl()),n(),e=h.length;e--;)if("toolbar"==r&&h[e].id===u)return void h[e].focus();h[0].focus()}var u,f=t.root,m=!1!==t.enableUpDown,p=!1!==t.enableLeftRight,h=t.items;return f.on("keydown",function(e){var n,r=37,d=39,u=38,f=40,h=27,g=14,v=13,y=32,b=9;switch(e.keyCode){case r:p&&(t.leftAction?t.leftAction():c(-1),n=!0);break;case d:p&&("menuitem"==i()&&"menu"==o()?a("haspopup")&&s():c(1),n=!0);break;case u:m&&(c(-1),n=!0);break;case f:m&&("menuitem"==i()&&"menubar"==o()?s():"button"==i()&&a("haspopup")?s():c(1),n=!0);break;case b:n=!0,e.shiftKey?c(-1):c(1);break;case h:n=!0,l();break;case g:case v:case y:n=s()}n&&(e.stopPropagation(),e.preventDefault())}),f.on("focusin",function(e){n(),u=e.target.id}),{moveFocus:c,focusFirst:d,cancel:l}}}),r(X,[Y,j,F,G,U],function(e,t,n,r,i){return e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.addClass("rtl"),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,r,i,o=this,a=o.statusbar;o._fullscreen&&(o.layoutRect(n.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&((t=e.headerW)>e.w&&(r=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:r}),i=!0)),a&&(a.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=a.layoutRect().minW+e.deltaW)>e.w&&(r=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:r}),i=!0)),i&&o.recalc()},initLayoutRect:function(){var e,t=this,r=t._super(),i=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=n.getSize(e);r.headerW=o.width,r.headerH=o.height,i+=r.headerH}t.statusbar&&(i+=t.statusbar.layoutRect().h),r.deltaH+=i,r.minH+=i,r.h+=i;var a=n.getWindowSize();return r.x=Math.max(0,a.w/2-r.w/2),r.y=Math.max(0,a.h/2-r.h/2),r},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,o="",a="",s=i.html;return e.preRender(),t.preRender(e),i.title&&(o='<div id="'+n+'-head" class="'+r+'window-head"><div class="'+r+'title">'+e.encode(i.title)+'</div><button type="button" class="'+r+'close" aria-hidden="true">&times;</button><div id="'+n+'-dragh" class="'+r+'dragh"></div></div>'),i.url&&(s='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),void 0===s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+o+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+s+"</div>"+a+"</div>"},fullscreen:function(e){var t,r,i=this,o=document.documentElement,a=i.classPrefix;if(e!=i._fullscreen)if(n.on(window,"resize",function(){var e;if(i._fullscreen)if(t)i._timer||(i._timer=setTimeout(function(){var e=n.getWindowSize();i.moveTo(0,0).resizeTo(e.w,e.h),i._timer=0},50));else{e=(new Date).getTime();var r=n.getWindowSize();i.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(t=!0)}}),r=i.layoutRect(),i._fullscreen=e,e){i._initial={x:r.x,y:r.y,w:r.w,h:r.h},i._borderBox=i.parseBox("0"),i.getEl("head").style.display="none",r.deltaH-=r.headerH+2,n.addClass(o,a+"fullscreen"),n.addClass(document.body,a+"fullscreen"),i.addClass("fullscreen");var s=n.getWindowSize();i.moveTo(0,0).resizeTo(s.w,s.h)}else i._borderBox=i.parseBox(i.settings.border),i.getEl("head").style.display="",r.deltaH+=r.headerH,n.removeClass(o,a+"fullscreen"),n.removeClass(document.body,a+"fullscreen"),i.removeClass("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h);return i.reflow()},postRender:function(){var e,t,n,o=this,a=[];setTimeout(function(){o.addClass("in")},0),o.keyboardNavigation=new r({root:o,enableLeftRight:!1,enableUpDown:!1,items:a,onCancel:function(){o.close()}}),o.find("*").each(function(n){n.canFocus&&(t=t||n.settings.autofocus,e=e||n,"filepicker"==n.type?(a.push(n.getEl("inp")),n.getEl("open")&&a.push(n.getEl("open"))):a.push(n.getEl()))}),o.statusbar&&o.statusbar.find("*").each(function(n){n.canFocus&&(t=t||n.settings.autofocus,e=e||n,a.push(n.getEl()))}),o._super(),o.statusbar&&o.statusbar.postRender(),!t&&e&&e.focus(),this.dragHelper=new i(o._id+"-dragh",{start:function(){n={x:o.layoutRect().x,y:o.layoutRect().y}},drag:function(e){o.moveTo(n.x+e.deltaX,n.y+e.deltaY)}}),o.on("submit",function(e){e.isDefaultPrevented()||o.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(n.removeClass(document.documentElement,t+"fullscreen"),n.removeClass(document.body,t+"fullscreen"))}})}),r(J,[X],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),i(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onClose:n.onClose}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(Q,[X,J],function(e,t){return function(n){function r(){return o.length?o[o.length-1]:void 0}var i=this,o=[];i.windows=o,i.open=function(t,r){var i;return n.editorManager.activeEditor=n,t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit(),i.close()}},{text:"Cancel",onclick:function(){i.close()}}]),i=new e(t),o.push(i),i.on("close",function(){for(var e=o.length;e--;)o[e]===i&&o.splice(e,1);n.focus()}),t.data&&i.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),i.features=t||{},i.params=r||{},n.nodeChanged(),i.renderTo(document.body).reflow()},i.alert=function(e,n,r){t.alert(e,function(){n&&n.call(r||this)})},i.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},i.close=function(){r()&&r().close()},i.getParams=function(){return r()?r().params:null},i.setParams=function(e){r()&&(r().params=e)}}}),r(Z,[N,R,y,m,p,u],function(e,t,n,r,i,o){return function(a){function s(e,t){try{a.getDoc().execCommand(e,!1,t)}catch(n){}}function l(){var e=a.getDoc().documentMode;return e||6}function c(e){return e.isDefaultPrevented()}function d(){function t(e){var t=new MutationObserver(function(){});o.each(a.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&a.dom.setAttrib(e,"style",e.getAttribute("style"))}),t.observe(a.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),a.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var n=a.selection.getRng(),r=n.startContainer.parentNode;o.each(t.takeRecords(),function(e){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}o.each(e.addedNodes,function(e){var t,i;"SPAN"!=e.nodeName||e.getAttribute("mce-data-marked")||(e==r&&(t=n.startOffset,i=e.firstChild),z.remove(e,!0),i&&(n.setStart(i,t),n.setEnd(i,t),a.selection.setRng(n)))})}),t.disconnect(),o.each(a.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var n=a.getDoc();window.MutationObserver&&(a.on("keydown",function(n){var r=n.keyCode==F,i=e.metaKeyPressed(n);if(!c(n)&&(r||n.keyCode==I)){var o=a.selection.getRng(),s=o.startContainer,l=o.startOffset;if(!i&&o.collapsed&&3==s.nodeType&&(r?l<s.data.length:l>0))return;n.preventDefault(),i&&a.selection.getSel().modify("extend",r?"forward":"backward","word"),t(r)}}),a.on("keypress",function(e){c(e)||W.isCollapsed()||!e.charCode||(e.preventDefault(),t(!0),a.selection.setContent(String.fromCharCode(e.charCode)))}),a.addCommand("Delete",function(){t()}),a.addCommand("ForwardDelete",function(){t(!0)}),a.on("dragstart",function(e){e.dataTransfer.setData("mce-internal",a.selection.getContent())}),a.on("drop",function(e){if(!c(e)){var r=e.dataTransfer.getData("mce-internal");r&&n.caretRangeFromPoint&&(e.preventDefault(),t(),a.selection.setRng(n.caretRangeFromPoint(e.x,e.y)),a.insertContent(r))}}),a.on("cut",function(e){!c(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",a.selection.getContent()),e.clipboardData.setData("text/plain",a.selection.getContent({format:"text"})),t(!0))}))}function u(){function e(e){var t=z.create("body"),n=e.cloneContents();return t.appendChild(n),W.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var r=n.duplicate();return r.moveToElementText(a.getBody()),t.compareRanges(n,r)}var i=e(n),o=z.createRng();return o.selectNode(a.getBody()),i===e(o)}a.on("keydown",function(e){var t,r,i=e.keyCode;if(!c(e)&&(i==F||i==I)){if(t=a.selection.isCollapsed(),r=a.getBody(),t&&!z.isEmpty(r))return;if(!t&&!n(a.selection.getRng()))return;e.preventDefault(),a.setContent(""),r.firstChild&&z.isBlock(r.firstChild)?a.selection.setCursorLocation(r.firstChild,0):a.selection.setCursorLocation(r,0),a.nodeChanged()}})}function f(){a.on("keydown",function(t){!c(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),a.execCommand("SelectAll"))})}function m(){a.settings.content_editable||(z.bind(a.getDoc(),"focusin",function(){W.setRng(W.getRng())}),z.bind(a.getDoc(),"mousedown",function(e){e.target==a.getDoc().documentElement&&(a.getWin().focus(),W.setRng(W.getRng()))}))}function p(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===I&&W.isCollapsed()&&0===W.getRng(!0).startOffset){var t=W.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return z.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(z.remove(n),e.preventDefault())}})}function h(){window.Range.prototype.getClientRects||a.on("mousedown",function(e){if(!c(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function g(){a.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&W.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&z.hasClass(e,"mce-item-anchor")&&W.select(e),a.nodeChanged()})}function v(){function e(){var e=z.getAttribs(W.getStart().cloneNode(!1));return function(){var t=W.getStart();t!==a.getBody()&&(z.setAttrib(t,"style",null),O(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!W.isCollapsed()&&z.getParent(W.getStart(),z.isBlock)!=z.getParent(W.getEnd(),z.isBlock)}a.on("keypress",function(n){var r;return c(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(r=e(),a.getDoc().execCommand("delete",!1,null),r(),n.preventDefault(),!1)}),z.bind(a.getDoc(),"cut",function(n){var r;!c(n)&&t()&&(r=e(),setTimeout(function(){r()},0))})}function y(){var e,n;a.on("selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=W.getRng();e&&t.compareRanges(n,e)||(a.nodeChanged(),e=n)},50)})}function b(){document.body.setAttribute("role","application")}function C(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===I&&W.isCollapsed()&&0===W.getRng(!0).startOffset){var t=W.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function x(){l()>7||(s("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),z.addClass(a.getBody(),"mceHideBrInPre"),U.addNodeFilter("pre",function(e){for(var t,r,i,o,a=e.length;a--;)for(r=(t=e[a].getAll("br")).length;r--;)(o=(i=t[r]).prev)&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":i.parent.insert(new n("#text",3),i,!0).value="\n"}),q.addNodeFilter("pre",function(e){for(var t,n,r,i=e.length;i--;)for(n=(t=e[i].getAll("br")).length;n--;)(r=t[n].prev)&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))}))}function _(){z.bind(a.getBody(),"mouseup",function(){var e,t=W.getNode();"IMG"==t.nodeName&&((e=z.getStyle(t,"width"))&&(z.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),z.setStyle(t,"width","")),(e=z.getStyle(t,"height"))&&(z.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),z.setStyle(t,"height","")))})}function w(){a.on("keydown",function(t){var n,r,i,o,s;if(!c(t)&&t.keyCode==e.BACKSPACE&&(r=(n=W.getRng()).startContainer,i=n.startOffset,o=z.getRoot(),s=r,n.collapsed&&0===i)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=o;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(a.formatter.toggle("blockquote",null,s),(n=z.createRng()).setStart(r,0),n.setEnd(r,0),W.setRng(n))}})}function k(){function e(){a._refreshContentEditable(),s("StyleWithCSS",!1),s("enableInlineTableEditing",!1),V.object_resizing||s("enableObjectResizing",!1)}V.readonly||a.on("BeforeExecCommand MouseDown",e)}function E(){function e(){O(z.select("a"),function(e){var t=e.parentNode,n=z.getRoot();if(t.lastChild===e){for(;t&&!z.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}z.add(t,"br",{"data-mce-bogus":1})}})}a.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function N(){V.forced_root_block&&a.on("init",function(){s("DefaultParagraphSeparator",V.forced_root_block)})}function S(){a.on("Undo Redo SetContent",function(e){e.initial||a.execCommand("mceRepaint")})}function T(){a.on("keydown",function(e){var t;c(e)||e.keyCode!=I||(t=a.getDoc().selection.createRange())&&t.item&&(e.preventDefault(),a.undoManager.beforeChange(),z.remove(t.item(0)),a.undoManager.add())})}function R(){var e;l()>=10&&(e="",O("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),a.contentStyles.push(e+"{padding-right: 1px !important}"))}function A(){l()<9&&(U.addNodeFilter("noscript",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).firstChild)&&t.attr("data-mce-innertext",n.value)}),q.addNodeFilter("noscript",function(e){for(var t,i,o,a=e.length;a--;)t=e[a],(i=e[a].firstChild)?i.value=r.decode(i.value):(o=t.attributes.map["data-mce-innertext"])&&(t.attr("data-mce-innertext",null),(i=new n("#text",3)).value=o,i.raw=!0,t.append(i))}))}function B(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(a){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y))&&(r.compareEndPoints("StartToStart",i)>0?r.setEndPoint("StartToStart",i):r.setEndPoint("EndToEnd",i),r.select()):n()}function n(){var e=a.selection.createRange();i&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&i.select(),z.unbind(a,"mouseup",n),z.unbind(a,"mousemove",t),i=r=0}var r,i,o,a=z.doc,s=a.body;a.documentElement.unselectable=!0,z.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(r&&n(),(o=a.documentElement).scrollHeight>o.clientHeight)return;r=1,(i=e(s.x,s.y))&&(z.bind(a,"mouseup",n),z.bind(a,"mousemove",t),z.win.focus(),i.select())}})}function H(){a.on("keyup focusin",function(t){65==t.keyCode&&e.metaKeyPressed(t)||W.normalize()})}function L(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function M(){a.inline||a.on("keydown",function(){document.activeElement==document.body&&a.getWin().focus()})}function D(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){"HTML"==e.target.nodeName&&(a.execCommand("SelectAll"),a.selection.collapse(!0),a.nodeChanged())}))}function P(){i.mac&&a.on("keydown",function(t){!e.metaKeyPressed(t)||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),a.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}var O=o.each,I=e.BACKSPACE,F=e.DELETE,z=a.dom,W=a.selection,V=a.settings,U=a.parser,q=a.serializer,j=i.gecko,$=i.ie,K=i.webkit;C(),w(),u(),H(),K&&(d(),m(),g(),N(),i.iOS?(y(),M(),D()):f()),$&&i.ie<11&&(p(),b(),x(),_(),T(),R(),A(),B()),i.ie>=11&&D(),i.ie&&f(),j&&(p(),h(),v(),k(),E(),S(),L(),P())}}),r(ee,[u],function(e){function t(){return!1}function n(){return!0}var r="__bindings",i=e.makeMap("focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave keydown keypress keyup contextmenu dragstart dragend dragover draggesture dragdrop drop drag"," ");return{fire:function(e,i,o){var a,s,l,c,d,u=this;if(e=e.toLowerCase(),(i=i||{}).type=e,i.target||(i.target=u),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=n},i.stopPropagation=function(){i.isPropagationStopped=n},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=n},i.isDefaultPrevented=t,i.isPropagationStopped=t,i.isImmediatePropagationStopped=t),u[r]&&(a=u[r][e]))for(s=0,l=a.length;l>s&&(a[s]=c=a[s],!i.isImmediatePropagationStopped());s++)if(!1===c.call(u,i))return i.preventDefault(),i;if(!1!==o&&u.parent)for(d=u.parent();d&&!i.isPropagationStopped();)d.fire(e,i,!1),d=d.parent();return i},on:function(e,t){var n,o,a,s,l=this;if(!1===t&&(t=function(){return!1}),t)for(s=(a=e.toLowerCase().split(" ")).length;s--;)e=a[s],(n=l[r])||(n=l[r]={}),(o=n[e])||(o=n[e]=[],l.bindNative&&i[e]&&l.bindNative(e)),o.push(t);return l},off:function(e,t){var n,o,a,s,l,c=this,d=c[r];if(d)if(e)for(n=(s=e.toLowerCase().split(" ")).length;n--;){if(o=d[e=s[n]],!e){for(a in d)d[e].length=0;return c}if(o){if(t)for(l=o.length;l--;)o[l]===t&&o.splice(l,1);else o.length=0;!o.length&&c.unbindNative&&i[e]&&(c.unbindNative(e),delete d[e])}}else{if(c.unbindNative)for(e in d)c.unbindNative(e);c[r]=[]}return c},hasEventListeners:function(e){var t=this[r];return e=e.toLowerCase(),!(!t||!t[e]||0===t[e].length)}}}),r(te,[u,p],function(e,t){var n=e.each,r=e.explode,i={f9:120,f10:121,f11:122};return function(o){var a=this,s={};o.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&n(s,function(n){var r=t.mac?e.metaKey:e.ctrlKey;if(n.ctrl==r&&n.alt==e.altKey&&n.shift==e.shiftKey)return e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),a.add=function(t,a,l,c){var d;return d=l,"string"==typeof l?l=function(){o.execCommand(d,!1,null)}:e.isArray(d)&&(l=function(){o.execCommand(d[0],d[1],d[2])}),n(r(t.toLowerCase()),function(e){var t={func:l,scope:c||o,desc:o.translate(a),alt:!1,ctrl:!1,shift:!1};n(r(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:t.charCode=e.charCodeAt(0),t.keyCode=i[e]||e.toUpperCase().charCodeAt(0)}}),s[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),r(ne,[h,v,y,k,w,T,A,B,H,L,M,D,g,c,Q,b,x,Z,p,u,ee,te],function(e,n,r,i,o,a,s,l,c,d,u,f,m,p,h,g,v,y,b,C,x,_){function w(e,t){return"selectionchange"==t||"drop"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu/.test(t)?e.getDoc():e.getBody()}function k(e,t,r){var i,o,a=this;i=a.documentBaseUrl=r.documentBaseURL,o=r.baseURI,a.settings=t=T({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:i,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:a.convertURL,url_converter_scope:a,ie7_compat:!0},t),n.language=t.language||"en",n.languageLoad=t.language_load,n.baseURL=r.baseURL,a.id=t.id=e,a.isNotDirty=!0,a.plugins={},a.documentBaseURI=new f(t.document_base_url||i,{base_uri:o}),a.baseURI=o,a.contentCSS=[],a.contentStyles=[],a.shortcuts=new _(a),a.execCommands={},a.queryStateCommands={},a.queryValueCommands={},a.loadedCSS={},a.suffix=r.suffix,a.editorManager=r,a.inline=t.inline,a.execCallback("setup",a),r.fire("SetupEditor",a)}var E=e.DOM,N=n.ThemeManager,S=n.PluginManager,T=C.extend,R=C.each,A=C.explode,B=C.inArray,H=C.trim,L=C.resolve,M=p.Event,D=b.gecko,P=b.ie;return k.prototype={render:function(){function e(){E.unbind(window,"ready",e),n.render()}function t(){var e=m.ScriptLoader;if(r.language&&"en"!=r.language&&(r.language_url=n.editorManager.baseURL+"/langs/"+r.language+".js"),r.language_url&&e.add(r.language_url),r.theme&&"function"!=typeof r.theme&&"-"!=r.theme.charAt(0)&&!N.urls[r.theme]){var t=r.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+r.theme+"/theme"+o+".js",N.load(r.theme,t)}C.isArray(r.plugins)&&(r.plugins=r.plugins.join(" ")),R(r.external_plugins,function(e,t){S.load(t,e),r.plugins+=" "+t}),R(r.plugins.split(/[ ,]/),function(e){if((e=H(e))&&!S.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=S.dependencies(e);R(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"};e=S.createUrl(t,e),S.load(e.resource,e)})}else S.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,r=n.settings,i=n.id,o=n.suffix;if(M.domLoaded){if(n.getElement()&&b.contentEditable){r.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||E.getParent(i,"form");a&&(n.formElement=a,r.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(E.insertAfter(E.create("input",{type:"hidden",name:i}),i),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},E.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!r.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,a._mceOldSubmit(a)})),n.windowManager=new h(n),"xml"==r.encoding&&n.on("GetContent",function(e){e.save&&(e.content=E.encode(e.content))}),r.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),r.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}}else E.bind(window,"ready",e)},init:function(){function e(t){var n,r,i=S.get(t);n=S.urls[t]||u.documentBaseUrl.replace(/\/$/,""),t=H(t),i&&-1===B(p,t)&&(R(S.dependencies(t),function(t){e(t)}),r=new i(u,n),u.plugins[t]=r,r.init&&(r.init(u,n),p.push(t)))}var t,n,r,i,o,a,s,l,c,d,u=this,f=u.settings,m=u.getElement(),p=[];if(u.rtl=this.editorManager.i18n.rtl,u.editorManager.add(u),f.aria_label=f.aria_label||E.getAttrib(m,"aria-label",u.getLang("aria.rich_text_area")),f.theme&&("function"!=typeof f.theme?(f.theme=f.theme.replace(/-/,""),o=N.get(f.theme),u.theme=new o(u,N.urls[f.theme]),u.theme.init&&u.theme.init(u,N.urls[f.theme]||u.documentBaseUrl.replace(/\/$/,""))):u.theme=f.theme),R(f.plugins.replace(/\-/g,"").split(/[ ,]/),e),f.render_ui&&u.theme&&(u.orgDisplay=m.style.display,"function"!=typeof f.theme?(t=f.width||m.style.width||m.offsetWidth,n=f.height||m.style.height||m.offsetHeight,r=f.min_height||100,(c=/^[0-9\.]+(|px)$/i).test(""+t)&&(t=Math.max(parseInt(t,10)+(o.deltaWidth||0),100)),c.test(""+n)&&(n=Math.max(parseInt(n,10)+(o.deltaHeight||0),r)),o=u.theme.renderUI({targetNode:m,width:t,height:n,deltaWidth:f.delta_width,deltaHeight:f.delta_height}),f.content_editable||(E.setStyles(o.sizeContainer||o.editorContainer,{wi2dth:t,h2eight:n}),r>(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""))&&(n=r))):((o=f.theme(u,m)).editorContainer.nodeType&&(o.editorContainer=o.editorContainer.id=o.editorContainer.id||u.id+"_parent"),o.iframeContainer.nodeType&&(o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||u.id+"_iframecontainer"),n=o.iframeHeight||m.offsetHeight),u.editorContainer=o.editorContainer),f.content_css&&R(A(f.content_css),function(e){u.contentCSS.push(u.documentBaseURI.toAbsolute(e))}),f.content_style&&u.contentStyles.push(f.content_style),f.content_editable)return m=i=o=null,u.initContentBody();for(u.iframeHTML=f.doctype+"<html><head>",f.document_base_url!=u.documentBaseUrl&&(u.iframeHTML+='<base href="'+u.documentBaseURI.getURI()+'" />'),!b.caretAfter&&f.ie7_compat&&(u.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),u.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',d=0;d<u.contentCSS.length;d++){var h=u.contentCSS[d];u.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+h+'" />',u.loadedCSS[h]=!0}-1!=(s=f.body_id||"tinymce").indexOf("=")&&(s=(s=u.getParam("body_id","","hash"))[u.id]||s),-1!=(l=f.body_class||"").indexOf("=")&&(l=(l=u.getParam("body_class","","hash"))[u.id]||""),u.iframeHTML+='</head><body id="'+s+'" class="mce-content-body '+l+'" onload="window.parent.tinymce.get(\''+u.id+"').fire('load');\"><br></body></html>";var g='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+u.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';if(document.domain!=location.hostname&&(a=g),i=E.add(o.iframeContainer,"iframe",{id:u.id+"_ifr",src:a||'javascript:""',frameBorder:"0",allowTransparency:"true",title:u.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:n,display:"block"}}),P)try{u.getDoc()}catch(v){i.src=a=g}u.contentAreaContainer=o.iframeContainer,o.editorContainer&&(E.get(o.editorContainer).style.display=u.orgDisplay),E.get(u.id).style.display="none",E.setAttrib(u.id,"aria-hidden",!0),a||u.initContentBody(),m=i=o=null},initContentBody:function(t){var n,o,f=this,m=f.settings,p=E.get(f.id),h=f.getDoc();m.inline||(f.getElement().style.visibility=f.orgVisibility),t||m.content_editable||(h.open(),h.write(f.iframeHTML),h.close()),m.content_editable&&(f.on("remove",function(){var e=this.getBody();E.removeClass(e,"mce-content-body"),E.removeClass(e,"mce-edit-focus"),E.setAttrib(e,"tabIndex",null),E.setAttrib(e,"contentEditable",null)}),E.addClass(p,"mce-content-body"),p.tabIndex=-1,f.contentDocument=h=m.content_document||document,f.contentWindow=m.content_window||window,f.bodyElement=p,m.content_document=m.content_window=null,m.root_name=p.nodeName.toLowerCase()),(n=f.getBody()).disabled=!0,m.readonly||(f.inline&&"static"==E.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=f.getParam("content_editable_state",!0)),n.disabled=!1,f.schema=new g(m),f.dom=new e(h,{keep_values:!0,url_converter:f.convertURL,url_converter_scope:f,hex_colors:m.force_hex_style_colors,class_filter:m.class_filter,update_styles:!0,root_element:m.content_editable?f.id:null,collect:m.content_editable,schema:f.schema,onSetAttrib:function(e){f.fire("SetAttrib",e)}}),f.parser=new v(m,f.schema),f.parser.addAttributeFilter("src,href,style",function(e,t){for(var n,r,i,o=e.length,a=f.dom;o--;)r=(n=e[o]).attr(t),i="data-mce-"+t,n.attributes.map[i]||("style"===t?n.attr(i,a.serializeStyle(a.parseStyle(r),n.name)):n.attr(i,f.convertURL(r,t,n.name)))}),f.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("type","mce-"+(t.attr("type")||"text/javascript"))}),f.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),f.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,i=f.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(i)&&(t.empty().append(new r("br",1)).shortEnded=!0)}),f.serializer=new i(m,f),f.selection=new a(f.dom,f.getWin(),f.serializer,f),f.formatter=new s(f),f.undoManager=new l(f),f.forceBlocks=new d(f),f.enterKey=new c(f),f.editorCommands=new u(f),f.fire("PreInit"),m.browser_spellcheck||m.gecko_spellcheck||(h.body.spellcheck=!1,E.setAttrib(n,"spellcheck","false")),f.fire("PostRender"),f.quirks=y(f),m.directionality&&(n.dir=m.directionality),m.nowrap&&(n.style.whiteSpace="nowrap"),m.protect&&f.on("BeforeSetContent",function(e){R(m.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),f.on("SetContent",function(){f.addVisual(f.getBody())}),m.padd_empty_editor&&f.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),f.load({initial:!0,format:"html"}),f.startContent=f.getContent({format:"raw"}),f.initialized=!0,R(f._pendingNativeEvents,function(e){f.dom.bind(w(f,e),e,function(e){f.fire(e.type,e)})}),f.fire("init"),f.focus(!0),f.nodeChanged({initial:!0}),f.execCallback("init_instance_callback",f),f.contentStyles.length>0&&(o="",R(f.contentStyles,function(e){o+=e+"\r\n"}),f.dom.addStyle(o)),R(f.contentCSS,function(e){f.loadedCSS[e]||(f.dom.loadCSS(e),f.loadedCSS[e]=!0)}),m.auto_focus&&setTimeout(function(){var e=f.editorManager.get(m.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),p=h=n=null},focus:function(e){var t,n,r,i,o=this,a=o.selection,s=o.settings.content_editable,l=o.getDoc();e||((n=a.getRng()).item&&(r=n.item(0)),o._refreshContentEditable(),s||(b.opera||o.getBody().focus(),o.getWin().focus()),(D||s)&&((i=o.getBody()).setActive&&b.ie<11?i.setActive():i.focus(),s&&a.normalize()),r&&r.ownerDocument==l&&((n=l.body.createControlRange()).addElement(r),n.select())),o.editorManager.activeEditor!=o&&((t=o.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:o}),o.fire("activate",{relatedTarget:t})),o.editorManager.activeEditor=o},execCallback:function(e){var t,n=this,r=n.settings[e];if(r)return n.callbackLookup&&(t=n.callbackLookup[e])&&(r=t.func,t=t.scope),"string"==typeof r&&(t=(t=r.replace(/\.\w+$/,""))?L(t):0,r=L(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:r,scope:t}),r.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r,i=e in this.settings?this.settings[e]:t;return"hash"===n?(r={},"string"==typeof i?R(i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){e=e.split("="),r[H(e[0])]=e.length>1?H(e[1]):H(e)}):r=i,r):i},nodeChanged:function(){var e,t,n,r=this,i=r.selection;r.initialized&&!r.settings.disable_nodechange&&(n=r.getBody(),e=i.getStart()||n,
"IMG"==(e=P&&e.ownerDocument!=r.getDoc()?r.getBody():e).nodeName&&i.isCollapsed()&&(e=e.parentNode),t=[],r.dom.getParent(e,function(e){return e===n||void t.push(e)}),r.fire("NodeChange",{element:e,parents:t}))},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){var i,o=this,a=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus||o.focus(),r=T({},r),!(r=o.fire("BeforeExecCommand",{command:e,ui:t,value:n})).isDefaultPrevented()&&((i=o.execCommands[e])&&!0!==i.func.call(i.scope,t,n)?(o.fire("ExecCommand",{command:e,ui:t,value:n}),!0):(R(o.plugins,function(r){return r.execCommand&&r.execCommand(e,t,n)?(o.fire("ExecCommand",{command:e,ui:t,value:n}),a=!0,!1):void 0}),a||(o.theme&&o.theme.execCommand&&o.theme.execCommand(e,t,n)?(o.fire("ExecCommand",{command:e,ui:t,value:n}),!0):o.editorCommands.execCommand(e,t,n)?(o.fire("ExecCommand",{command:e,ui:t,value:n}),!0):(o.getDoc().execCommand(e,t,n),void o.fire("ExecCommand",{command:e,ui:t,value:n})))))},queryCommandState:function(e){var t,n,r=this;if(!r._isHidden()){if((t=r.queryStateCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(-1!==(n=r.editorCommands.queryCommandState(e)))return n;try{return r.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var n,r,i=this;if(!i._isHidden()){if((n=i.queryValueCommands[e])&&!0!==(r=n.func.call(n.scope)))return r;if((r=i.editorCommands.queryCommandValue(e))!==t)return r;try{return i.getDoc().queryCommandValue(e)}catch(o){}}},show:function(){var e=this;E.show(e.getContainer()),E.hide(e.id),e.load(),e.fire("show")},hide:function(){var e=this,t=e.getDoc();P&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),E.hide(e.getContainer()),E.setStyle(e.id,"display",e.orgDisplay),e.fire("hide")},isHidden:function(){return!E.isHidden(this.id)},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n,r=this,i=r.getElement();return i?((e=e||{}).load=!0,n=r.setContent(i.value!==t?i.value:i.innerHTML,e),e.element=i,e.no_events||r.fire("LoadContent",e),e.element=i=null,n):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized)return(e=e||{}).save=!0,e.element=i,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(i.innerHTML=t,(n=E.getParent(r.id,"form"))&&R(n.elements,function(e){return e.name==r.id?(e.value=t,!1):void 0})),e.element=i=null,!1!==e.set_dirty&&(r.isNotDirty=!0),t},setContent:function(e,t){var n,r=this,i=r.getBody();return(t=t||{}).format=t.format||"html",t.set=!0,t.content=e,t.no_events||r.fire("BeforeSetContent",t),0===(e=t.content).length||/^\s+$/.test(e)?((n=r.settings.forced_root_block)&&r.schema.isValidChild(i.nodeName.toLowerCase(),n.toLowerCase())?(e=P&&11>P?"":'<br data-mce-bogus="1">',e=r.dom.createHTML(n,r.settings.forced_root_block_attrs,e)):(!P||11>P)&&(e='<br data-mce-bogus="1">'),i.innerHTML=e,r.fire("SetContent",t)):("raw"!==t.format&&(e=new o({},r.schema).serialize(r.parser.parse(e,{isRootContent:!0}))),t.content=H(e),r.dom.setHTML(i,t.content),t.no_events||r.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,r=n.getBody();return(e=e||{}).format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:n.serializer.serialize(r,e),e.content="text"!=e.format?H(t):t,e.no_events||n.fire("GetContent",e),e.content},insertContent:function(e){this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=E.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return E.get(this.settings.content_element||this.id)},getWin:function(){var e,t=this;return t.contentWindow||(e=E.get(t.id+"_ifr"))&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n,r=this,i=r.settings,o=r.dom;e=e||r.getBody(),r.hasVisual===t&&(r.hasVisual=i.visual),R(o.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=i.visual_table_class||"mce-item-table",void((t=o.getAttrib(e,"border"))&&"0"!=t||(r.hasVisual?o.addClass(e,n):o.removeClass(e,n)));case"A":return void(o.getAttrib(e,"href",!1)||(t=o.getAttrib(e,"name")||e.id,n="mce-item-anchor",t&&(r.hasVisual?o.addClass(e,n):o.removeClass(e,n))))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){var e=this;if(!e.removed){e.removed=1,e.hasHiddenInput&&E.remove(e.getElement().nextSibling);var t=e.getDoc();P&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),E.setStyle(e.id,"display",e.orgDisplay),e.settings.content_editable||(M.unbind(e.getWin()),M.unbind(e.getDoc()));var n=e.getContainer();M.unbind(e.getBody()),M.unbind(n),e.fire("remove"),e.editorManager.remove(e),E.remove(n),e.destroy()}},bindNative:function(e){var t=this;t.settings.readonly||(t.initialized?t.dom.bind(w(t,e),e,function(n){t.fire(e,n)}):t._pendingNativeEvents?t._pendingNativeEvents.push(e):t._pendingNativeEvents=[e])},unbindNative:function(e){var t=this;t.initialized&&t.dom.unbind(e)},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e&&D&&(M.unbind(n.getDoc()),M.unbind(n.getWin()),M.unbind(n.getBody())),e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),(t=n.formElement)&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),E.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=null,n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&((t=(e=n.getBody()).parentNode).removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return D?!(e=this.selection.getSel())||!e.rangeCount||0===e.rangeCount:0}},T(k.prototype,x),k}),r(re,[],function(){var e={};return{rtl:!1,add:function(t,n){for(var r in n)e[r]=n[r];this.rtl=this.rtl||"rtl"===e._dir},translate:function(t){if(void 0===t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),r(ie,[h,p],function(e,t){function n(r){function i(){try{return document.activeElement}catch(e){return document.body}}function o(e){return e&&e.startContainer?{startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset}:e}function a(e,t){var n;return t.startContainer?((n=e.getDoc().createRange()).setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function s(t){return!!e.DOM.getParent(t,n.isEditorUIElement)}function l(e,t){for(var n=t.getBody();e;){if(e==n)return!0;e=e.parentNode}}function c(n){var c,d=n.editor;d.on("init",function(){"onbeforedeactivate"in document&&t.ie<11?d.dom.bind(d.getBody(),"beforedeactivate",function(){try{d.lastRng=d.selection.getRng()}catch(e){}d.selection.lastFocusBookmark=o(d.lastRng)}):(d.inline||t.ie>10)&&(d.on("nodechange keyup",function(){var e=document.activeElement;e&&e.id==d.id+"_ifr"&&(e=d.getBody()),l(e,d)&&(d.lastRng=d.selection.getRng())}),t.webkit&&(c=function(){var e=d.selection.getRng();e.collapsed||(d.lastRng=e)},e.DOM.bind(document,"selectionchange",c),d.on("remove",function(){e.DOM.unbind(document,"selectionchange",c)})))}),d.on("setcontent",function(){d.lastRng=null}),d.on("mousedown",function(){d.selection.lastFocusBookmark=null}),d.on("focusin",function(){var e=r.focusedEditor;d.selection.lastFocusBookmark&&(d.selection.setRng(a(d,d.selection.lastFocusBookmark)),d.selection.lastFocusBookmark=null),e!=d&&(e&&e.fire("blur",{focusedEditor:d}),r.activeEditor=d,r.focusedEditor=d,d.fire("focus",{blurredEditor:e}),d.focus(!1)),d.lastRng=null}),d.on("focusout",function(){window.setTimeout(function(){var e=r.focusedEditor;s(i())||e!=d||(d.fire("blur",{focusedEditor:null}),r.focusedEditor=null,d.selection.lastFocusBookmark=null)},0)})}e.DOM.bind(document,"focusin",function(e){var t=r.activeEditor;t&&e.target.ownerDocument==document&&(t.selection.lastFocusBookmark=o(t.lastRng),s(e.target)||r.focusedEditor!=t||(t.fire("blur",{focusedEditor:null}),r.focusedEditor=null))}),r.on("AddEditor",c)}return n.isEditorUIElement=function(e){return-1!==e.className.indexOf("mce-")},n}),r(oe,[ne,h,D,p,u,ee,re,ie],function(e,n,r,i,o,a,s,l){var c,d=n.DOM,u=o.explode,f=o.each,m=o.extend,p=0,h={majorVersion:"4",minorVersion:"0.12",releaseDate:"2013-12-18",editors:[],i18n:s,activeEditor:null,setup:function(){var e,t,n,i=this,o="";if(t=document.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/"),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,o=n.suffix;else for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var c=a[s].src;if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(c)){-1!=c.indexOf(".min")&&(o=".min"),e=c.substring(0,c.lastIndexOf("/"));break}}i.baseURL=new r(t).toAbsolute(e),i.documentBaseURL=t,i.baseURI=new r(i.baseURL),i.suffix=o,i.focusManager=new l(i)},init:function(t){function n(e){var t=e.id;return t||(t=(t=e.name)&&!d.get(t)?e.name:d.uniqueId(),e.setAttribute("id",t)),t}function r(e,t,n){var r=e[t];if(r)return r.apply(n||this,Array.prototype.slice.call(arguments,2))}function i(e,t){return t.constructor===RegExp?t.test(e.className):d.hasClass(e,t)}function o(){var c,h;if(d.unbind(window,"ready",o),r(t,"onpageload"),t.types)f(t.types,function(r){f(d.select(r.selector),function(i){var o=new e(n(i),m({},t,r),s);l.push(o),o.render(1)})});else if(t.selector)f(d.select(t.selector),function(r){var i=new e(n(r),t,s);l.push(i),i.render(1)});else{switch(t.mode){case"exact":(c=t.elements||"").length>0&&f(u(c),function(n){d.get(n)?(a=new e(n,t,s),l.push(a),a.render(!0)):f(document.forms,function(r){f(r.elements,function(r){r.name===n&&(n="mce_editor_"+p++,d.setAttrib(r,"id",n),a=new e(n,t,s),l.push(a),a.render(1))})})});break;case"textareas":case"specific_textareas":f(d.select("textarea"),function(r){t.editor_deselector&&i(r,t.editor_deselector)||(!t.editor_selector||i(r,t.editor_selector))&&(a=new e(n(r),t,s),l.push(a),a.render(!0))})}t.oninit&&(c=h=0,f(l,function(e){h++,e.initialized?c++:e.on("init",function(){++c==h&&r(t,"oninit")}),c==h&&r(t,"oninit")}))}}var a,s=this,l=[];s.settings=t,d.bind(window,"ready",o)},get:function(e){return e===t?this.editors:this.editors[e]},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),c||(c=function(){t.fire("BeforeUnload")},d.bind(window,"beforeunload",c)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t,n,r,i=this,o=i.editors;if(e){if("string"==typeof e)return e=e.selector||e,void f(d.select(e),function(e){i.remove(o[e.id])});if(!o[(n=e).id])return null;for(delete o[n.id],t=0;t<o.length;t++)if(o[t]==n){o.splice(t,1),r=!0;break}return i.activeEditor==n&&(i.activeEditor=o[0]),r&&i.fire("RemoveEditor",{editor:n}),o.length||d.unbind(window,"beforeunload",c),n.remove(),n}for(t=o.length-1;t>=0;t--)i.remove(o[t])},execCommand:function(t,n,r){var i=this,o=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||new e(r,i.settings,i).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return!!i.activeEditor&&i.activeEditor.execCommand(t,n,r)},triggerSave:function(){f(this.editors,function(e){e.save()})},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)}};return m(h,a),h.setup(),window.tinymce=window.tinyMCE=h,h}),r(ae,[oe,u],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function i(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){o[e.nodeName.toLowerCase()](s,e)})}var o,a,s,l=t.settings;l.inline_styles&&(a=r(l.font_size_legacy_values),o={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(se,[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||r++>1e4?(e.success&&1e4>r&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),r(le,[],function(){function e(t,n){var r,i,o,a;if(n=n||'"',null===t)return"null";if("string"==(o=typeof t))return i="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t))+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"==o){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";r<t.length;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}for(a in i="{",t)t.hasOwnProperty(a)&&(i+="function"!=typeof t[a]?(i.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),r(ce,[le,se,u],function(e,t,n){function r(e){this.settings=i({},e),this.count=0}var i=n.extend;return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,o=n.success;(n=i(this.settings,n)).success=function(t,i){void 0===(t=e.parse(t))&&(t={error:"JSON Parse error."}),t.error?r.call(n.error_scope||n.scope,t.error,i):o.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),r(de,[h],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,o=n.count!==t?n.count:r.count,a="tinymce_jsonp_"+o;r.callbacks[o]=function(e){i.remove(a),delete r.callbacks[o],n.callback(e)},i.add(i.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),r.count++}}}),r(ue,[],function(){function e(){for(var e in s=[],a)s.push(e);i.length=s.length}function n(){function n(e){var n,r;return-1===(r=e!==t?c+e:i.indexOf(",",c))||r>i.length?null:(n=i.substring(c,r),c=r+1,n)}var r,i,s,c=0;if(a={},d){o.load(l),i=o.getAttribute(l)||"";do{var u=n();if(null===u)break;if(null!==(r=n(parseInt(u,32)||0))){if(null===(u=n()))break;s=n(parseInt(u,32)||0),r&&(a[r]=s)}}while(null!==r);e()}}function r(){var t,n="";if(d){for(var r in a)t=a[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;o.setAttribute(l,n);try{o.save(l)}catch(i){}e()}}var i,o,a,s,l,d;try{if(window.localStorage)return localStorage}catch(c){}return l="tinymce",o=document.documentElement,(d=!!o.addBehavior)&&o.addBehavior("#default#userData"),i={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,r()},removeItem:function(e){delete a[e],r()},clear:function(){a={},r()}},n(),i}),r(fe,[h,c,g,v,u,p],function(e,t,n,r,i,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=r.PluginManager,a.ThemeManager=r.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,i.each(i,function(e,t){a[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),r(me,[P,u],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,n,r,i=this.settings;t=e.items().filter(":visible"),n=i.firstControlClass,r=i.lastControlClass,t.each(function(e){e.removeClass(n).removeClass(r),i.controlClass&&e.addClass(i.controlClass)}),t.eq(0).addClass(n),t.eq(-1).addClass(r)},renderHtml:function(e){var t,n=this.settings,r="";return(t=e.items()).eq(0).addClass(n.firstControlClass),t.eq(-1).addClass(n.lastControlClass),t.each(function(e){n.controlClass&&e.addClass(n.controlClass),r+=e.renderHtml()}),r},recalc:function(){},postRender:function(){}})}),r(pe,[me],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(he,[z,$],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return void 0!==e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),r(ge,[z,he],function(e,t){var n,r=e.extend({init:function(e){var t=this;t._super(e),t.canFocus=!0,e.tooltip&&!1!==r.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.toggleClass("tooltip-n","bc-tc"==i),r.toggleClass("tooltip-nw","bc-tl"==i),r.toggleClass("tooltip-ne","bc-tr"==i),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.tooltip)},tooltip:function(){var e=this;return n||(n=new t({type:"tooltip"})).renderTo(e.getContainerElm()),n},active:function(e){var t,n=this;return e!==t&&(n.aria("pressed",e),n.toggleClass("active",e)),n._super(e)},disabled:function(e){var t,n=this;return e!==t&&(n.aria("disabled",e),n.toggleClass("disabled",e)),n._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&setTimeout(function(){e.focus()},0)},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),r(ve,[ge],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n.on("click mousedown",function(e){e.preventDefault()}),n._super(e),t=e.size,e.subtype&&n.addClass(e.subtype),t&&n.addClass("btn-"+t)},icon:function(e){var t=this,n=t.classPrefix;if(void 0===e)return t.settings.icon;if(t.settings.icon=e,e=e?n+"ico "+n+"i-"+t.settings.icon:"",t._rendered){var r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0];e?(i&&i==r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=e):i&&r.removeChild(i),t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i="";return e.settings.image&&(r="none",i=" style=\"background-image: url('"+e.settings.image+"')\""),r=e.settings.icon?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1"><button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+(e._text?(r?"\xa0":"")+e.encode(e._text):"")+"</button></div>"}})}),r(ye,[V],function(e){return e.extend({Defaults:{defaultType:"button",role:"toolbar"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(be,[ge],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return void 0!==e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labeledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span></div>"}})}),r(Ce,[ve,Y],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var r=n.panel;r.type&&(r={layout:"grid",items:r}),r.popover=!0,r.autohide=!0,e.panel=new t(r).on("hide",function(){e.active(!1)}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():e.showPanel())}),e._super()}})}),r(xe,[Ce,h],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'"><button role="presentation" hidefocus type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),r(_e,[ge,F],function(e,t){return e.extend({init:function(e){var n=this;n._super(e),n.addClass("combobox"),n.on("click",function(e){for(var t=e.target;t;)t.id&&-1!=t.id.indexOf("-open")&&n.fire("action"),t=t.parentNode}),n.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&n.parents().reverse().each(function(t){return e.preventDefault(),n.fire("change"),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})}),e.placeholder&&(n.addClass("placeholder"),n.on("focusin",function(){n._hasOnChange||(t.on(n.getEl("inp"),"change",function(){n.fire("change")}),n._hasOnChange=!0),n.hasClass("placeholder")&&(n.getEl("inp").value="",n.removeClass("placeholder"))}),n.on("focusout",function(){0===n.value().length&&(n.getEl("inp").value=e.placeholder,n.addClass("placeholder"))}))},value:function(e){var t=this;return void 0!==e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value)!=t.settings.placeholder?e:"":t._value},disabled:function(e){var t=this;return t._rendered&&void 0!==e&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,n,r=this,i=r.getEl(),o=r.getEl("open"),a=r.layoutRect();e=o?a.w-t.getSize(o).width-10:a.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(n=r.layoutRect().h-2+"px"),t.css(i.firstChild,{width:e,lineHeight:n}),r._super(),r},postRender:function(){var e=this;return t.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){t.off(this.getEl("inp")),this._super()},renderHtml:function(){var e,t,n=this,r=n._id,i=n.settings,o=n.classPrefix,a=i.value||i.placeholder||"",s="";return e=i.icon?o+"ico "+o+"i-"+i.icon:"",t=n._text,(e||t)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1"><button id="'+r+'-action" type="button" hidefocus tabindex="-1">'+(e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.addClass("has-open")),'<div id="'+r+'" class="'+n.classes()+'"><input id="'+r+'-inp" class="'+o+"textbox "+o+'placeholder" value="'+a+'" hidefocus="true"'+(n.disabled()?' disabled="disabled"':"")+">"+s+"</div>"}})}),r(we,[ge,G],function(e,t){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="\xbb"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.keyNav=new t({root:e,enableLeftRight:!0}),e.keyNav.focusFirst(),e},data:function(e){var t=this;return void 0!==e?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,n=this,r=n._data||[],i="",o=n.classPrefix;for(e=0,t=r.length;t>e;e++)i+=(e>0?'<div class="'+o+'divider" aria-hidden="true"> '+n.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(e==t-1?" "+o+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+n._id+"-"+e+'">'+r[e].name+"</div>";return i||(i='<div class="'+o+'path-item">&nbsp;</div>'),i}})}),r(ke,[we,oe],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,r=t.activeEditor;return n.on("select",function(t){var n,i=[],o=r.getBody();for(r.focus(),n=r.selection.getStart();n&&n!=o;)e(n)||i.push(n),n=n.parentNode;r.selection.select(i[i.length-1-t.index]),r.nodeChanged()}),r.on("nodeChange",function(t){for(var i=[],o=t.parents,a=o.length;a--;)if(1==o[a].nodeType&&!e(o[a])){var s=r.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});i.push({name:s.name})}n.data(i)}),n._super()}})}),r(Ee,[V],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(Ne,[V,Ee],function(e,t){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this;e.items().each(function(n){var r,i=n.settings.label;i&&((r=new t({layout:"flex",autoResize:"overflow",defaults:{flex:1},items:[{type:"label",text:i,flex:0,forId:n._id}]})).type="formitem","undefined"==typeof n.settings.flex&&(n.settings.flex=1),e.replace(n,r),r.add(n))})},recalcLabels:function(){var e,t,n=this,r=0,i=[];if(!1!==n.settings.labelGapCalc)for(n.items().filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,i.push(t)}),t=n.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=r+t},visible:function(e){var t=this._super(e);return!0===e&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),r(Se,[Ne],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),r(Te,[_e],function(e){return e.extend({init:function(e){var t,n=this,r=tinymce.activeEditor;e.spellcheck=!1,(t=r.settings.file_browser_callback)&&(e.icon="browse",e.onaction=function(){t(n.getEl("inp").id,n.getEl("inp").value,e.filetype,window)}),n._super(e)}})}),r(Re,[pe],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(Ae,[pe],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,d,u,f,m,p,h,g,v,y,b,C,x,_,w,k,E,N,S,T,R,A,B,H,L,M,D,P,O,I=[],F=Math.max,z=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),o=e._paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,("row-reversed"==f||"column-reverse"==f)&&(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"==f?(k="y",_="h",w="minH",E="maxH",S="innerH",N="top","bottom",T="deltaH",R="contentH",M="left",H="w",A="x",B="innerW",L="minW","maxW",D="right",P="deltaW",O="contentW"):(k="x",_="w",w="minW",E="maxW",S="innerW",N="left","right",T="deltaW",R="contentW",M="top",H="h",A="y",B="innerH",L="minH","maxH",D="bottom",P="deltaH",O="contentH"),u=i[S]-o[N]-o[N],x=d=0,t=0,n=r.length;n>t;t++)p=(m=r[t]).layoutRect(),u-=n-1>t?c:0,(h=m.settings.flex)>0&&(d+=h,p[E]&&I.push(m),p.flex=h),u-=p[w],(g=o[M]+p[L]+o[D])>x&&(x=g);if((b={})[w]=0>u?i[w]-u+i[T]:i[S]-u+i[T],b[L]=x+i[P],b[R]=i[S]-u,b[O]=x,b.minW=z(b.minW,i.maxW),b.minH=z(b.minH,i.maxH),b.minW=F(b.minW,i.startMinWidth),b.minH=F(b.minH,i.startMinHeight),!i.autoResize||b.minW==i.minW&&b.minH==i.minH){for(y=u/d,t=0,n=I.length;n>t;t++)v=(p=(m=I[t]).layoutRect())[E],(g=p[w]+p.flex*y)>v?(u-=p[E]-p[w],d-=p.flex,p.flex=0,p.maxFlexSize=v):p.maxFlexSize=0;for(y=u/d,C=o[N],b={},0===d&&("end"==l?C=u+o[N]:"center"==l?0>(C=Math.round(i[S]/2-(i[S]-u)/2)+o[N])&&(C=o[N]):"justify"==l&&(C=o[N],c=Math.floor(u/(r.length-1)))),b[A]=o[M],t=0,n=r.length;n>t;t++)g=(p=(m=r[t]).layoutRect()).maxFlexSize||p[w],"center"===s?b[A]=Math.round(i[B]/2-p[H]/2):"stretch"===s?(b[H]=F(p[L]||0,i[B]-o[M]-o[D]),b[A]=o[M]):"end"===s&&(b[A]=i[B]-p[H]-o.top),p.flex>0&&(g+=p.flex*y),b[_]=g,b[k]=C,m.layoutRect(b),m.recalc&&m.recalc(),C+=g+c}else if(b.w=b.minW,b.h=b.minH,e.layoutRect(b),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}})}),r(Be,[me],function(e){return e.extend({Defaults:{
containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),r(He,[z,ge,Y,u,oe,p],function(e,t,n,r,i,o){function a(e){function t(t){function n(e){return e.replace(/%(\w+)/g,"")}var r,i,o,a,l=e.dom,c="";return!1===(a=e.settings.preview_styles)?"":(a||(a="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius"),(t=e.formatter.get(t))?(r=(t=t[0]).block||t.inline||"span",i=l.create(r),s(t.styles,function(e,t){(e=n(e))&&l.setStyle(i,t,e)}),s(t.attributes,function(e,t){(e=n(e))&&l.setAttrib(i,t,e)}),s(t.classes,function(e){e=n(e),l.hasClass(i,e)||l.addClass(i,e)}),e.fire("PreviewFormats"),l.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),o=l.getStyle(e.getBody(),"fontSize",!0),o=/px$/.test(o)?parseInt(o,10):0,s(a.split(" "),function(t){var n=l.getStyle(i,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=l.getStyle(e.getBody(),t,!0),"#ffffff"==l.toHex(n).toLowerCase())||"color"==t&&"#000000"==l.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===o)return;n=(n=parseFloat(n,10)/(/%$/.test(n)?100:1))*o+"px"}"border"==t&&n&&(c+="padding:0 2px;"),c+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),l.remove(i),c):void 0)}function r(t,n){return function(){var r=this;e.on("nodeChange",function(i){var o=e.formatter,a=null;s(i.parents,function(e){return s(t,function(t){return n?o.matchNode(e,n,{value:t.value})&&(a=t.value):o.matchNode(e,t.value)&&(a=t.value),!a&&void 0}),!a&&void 0}),r.value(a)})}}function i(e){for(var t=(e=e.split(";")).length;t--;)e[t]=e[t].split("=");return e}function o(){function n(e){var t=[];if(e)return s(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=n(e.items);else{var a=e.format||"custom"+r++;e.format||(e.name=a,i.push(e)),o.format=a}t.push(o)}),t}var r=0,i=[],o=[{title:"Headers",items:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];e.on("init",function(){s(i,function(t){e.formatter.register(t.name,t)})});var a=n(e.settings.style_formats||o);return{type:"menu",items:a,onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?t(this.settings.format):void 0},onPostRender:function(){var t=this,n=this.settings.format;n&&t.parent().on("show",function(){t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))})},onclick:function(){this.settings.format&&f(this.settings.format)}}}}function a(){return!!e.undoManager&&e.undoManager.hasUndo()}function l(){return!!e.undoManager&&e.undoManager.hasRedo()}function c(){var t=this;t.disabled(!a()),e.on("Undo Redo AddUndo TypingUndo",function(){t.disabled(!a())})}function d(){var t=this;t.disabled(!l()),e.on("Undo Redo AddUndo TypingUndo",function(){t.disabled(!l())})}function u(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function f(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var m;m=o(),s({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})},onclick:function(){f(n)}})}),s({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),s({blockquote:["Toggle blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:c,cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:d,cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:c,cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:d,cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:u,cmd:"mceToggleVisualAid"}),s({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:m}),e.addButton("formatselect",function(){var n=[],o=i(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6");return s(o,function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t(e[1])}})}),{type:"listbox",text:o[0][0],values:n,fixedWidth:!0,onselect:f,onPostRender:r(n)}}),e.addButton("fontselect",function(){var t="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=[],o=i(e.settings.font_formats||t);return s(o,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:r(n,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",i=e.settings.fontsize_formats||n;return s(i.split(" "),function(e){t.push({text:e,value:e})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:r(t,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:m})}var s=r.each;i.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),a(t.editor)}),e.translate=function(e){return i.translate(e)},t.tooltips=!o.iOS}),r(Le,[pe],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,d,u,f,m,p,h,g,v,y,b,C,x,_,w,k,E,N,S=e.settings,T=[],R=[];for(S=e.settings,r=e.items().filter(":visible"),i=e.layoutRect(),n=S.columns||Math.ceil(Math.sqrt(r.length)),t=Math.ceil(r.length/n),v=S.spacingH||S.spacing||0,y=S.spacingV||S.spacing||0,b=S.alignH||S.align,C=S.alignV||S.align,h=e._paddingBox,b&&"string"==typeof b&&(b=[b]),C&&"string"==typeof C&&(C=[C]),d=0;n>d;d++)T.push(0);for(u=0;t>u;u++)R.push(0);for(u=0;t>u;u++)for(d=0;n>d&&(c=r[u*n+d]);d++)w=(l=c.layoutRect()).minW,k=l.minH,T[d]=w>T[d]?w:T[d],R[u]=k>R[u]?k:R[u];for(E=i.innerW-h.left-h.right,x=0,d=0;n>d;d++)x+=T[d]+(d>0?v:0),E-=(d>0?v:0)+T[d];for(N=i.innerH-h.top-h.bottom,_=0,u=0;t>u;u++)_+=R[u]+(u>0?y:0),N-=(u>0?y:0)+R[u];if(x+=h.left+h.right,_+=h.top+h.bottom,(s={}).minW=x+(i.w-i.innerW),s.minH=_+(i.h-i.innerH),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH,s.minW=Math.min(s.minW,i.maxW),s.minH=Math.min(s.minH,i.maxH),s.minW=Math.max(s.minW,i.startMinWidth),s.minH=Math.max(s.minH,i.startMinHeight),!i.autoResize||s.minW==i.minW&&s.minH==i.minH){var A;i.autoResize&&((s=e.layoutRect(s)).contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH),A="start"==S.packV?0:N>0?Math.floor(N/t):0;var B=0,H=S.flexWidths;if(H)for(d=0;d<H.length;d++)B+=H[d];else B=n;var L=E/B;for(d=0;n>d;d++)T[d]+=H?H[d]*L:L;for(m=h.top,u=0;t>u;u++){for(f=h.left,a=R[u]+A,d=0;n>d&&(c=r[u*n+d]);d++)p=c.settings,l=c.layoutRect(),o=Math.max(T[d],l.startMinWidth),0,l.x=f,l.y=m,"center"==(g=p.alignH||(b?b[d]||b[0]:null))?l.x=f+o/2-l.w/2:"right"==g?l.x=f+o-l.w:"stretch"==g&&(l.w=o),"center"==(g=p.alignV||(C?C[d]||C[0]:null))?l.y=m+a/2-l.h/2:"bottom"==g?l.y=m+a-l.h:"stretch"==g&&(l.h=a),c.layoutRect(l),f+=o+v,c.recalc&&c.recalc();m+=a+y}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var M=e.parent();M&&(M._lastRect=null,M.recalc())}}})}),r(Me,[ge],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):setTimeout(function(){n.html(e)},0),this}})}),r(De,[ge,F],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();e.settings.multiline&&(t.getSize(e.getEl()).width>n.maxW&&(n.minW=n.maxW,e.addClass("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height));return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t:"")+'">'+e.encode(e._text)+"</label>"}})}),r(Pe,[V,G],function(e,t){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e.keyNav=new t({root:e,enableLeftRight:!0}),e._super()}})}),r(Oe,[Pe],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",defaults:{type:"menubutton"}}})}),r(Ie,[ve,W,Oe],function(e,t,n){function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e,n=this,r=n.settings;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||((e=r.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type)}).fire("show"),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1))},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon?r+"ico "+r+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+"<span>"+(e._text?(i?"\xa0":"")+e.encode(e._text):"")+'</span> <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.keyboard&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof i&&r.parent()==o&&(o.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},text:function(e){var t,n,r=this;if(r._rendered)for(n=r.getEl("open").getElementsByTagName("span"),t=0;t<n.length;t++)n[t].innerHTML=(r.settings.icon&&e?"\xa0":"")+r.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(Fe,[Ie],function(e){return e.extend({init:function(e){var t,n,r,i,o=this;if(o._values=t=e.values,t){for(n=0;n<t.length;n++)(t[n].selected||e.value===t[n].value)&&(r=r||t[n].text,o._value=t[n].value);e.menu=t}e.text=e.text||r||t[0].text,o._super(e),o.addClass("listbox"),o.on("select",function(t){var n=t.control;i&&(t.lastControl=i),e.multiple?n.active(!n.active()):o.value(t.control.settings.value),i=n})},value:function(e){function t(e,i){e.items().each(function(e){(n=e.value()===i)&&(r=r||e.text()),e.active(n),e.menu&&t(e.menu,i)})}var n,r,i,o,a=this;if(void 0!==e){if(a.menu)t(a.menu,e);else for(i=a.settings.menu,o=0;o<i.length;o++)(n=i[o].value==e)&&(r=r||i[o].text),i[o].active=n;a.text(r||this.settings.text)}return a._super(e)}})}),r(ze,[ge,W,p],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t.canFocus=!1,t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.aria("checked",!0),t.addClass("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.keyboard&&setTimeout(function(){t.menu.items()[0].focus()},0)):(t.parent().hideAll(),t.fire("cancel"),t.fire("select")))}),e.menu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,r=n.settings,i=n.parent();if(i.items().each(function(e){e!==n&&e.hideMenu()}),r.menu){(e=n.menu)?e.show():((e=r.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",i.settings.itemDefaults&&(e.itemDefaults=i.settings.itemDefaults),(e=n.menu=t.create(e).parent(n).renderTo(n.getContainerElm())).reflow(),e.fire("show"),e.on("cancel",function(){n.focus()}),e.on("hide",function(t){t.control===e&&n.removeClass("selected")})),e._parentMenu=i,e.addClass("menu-sub");var o=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),o),e.rel=o,o="menu-sub-"+o,e.removeClass(e._lastRel),e.addClass(o),e._lastRel=o,n.addClass("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,r=e.settings,i=e.classPrefix,o=e.encode(e._text),a=e.settings.icon,s="",l=r.shortcut;return a&&e.parent().addClass("menu-has-icons"),r.image&&(a="none",s=" style=\"background-image: url('"+r.image+"')\""),l&&n.mac&&(l=(l=(l=(l=l.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;")).replace(/ctrl\+/i,"&#x2318;")).replace(/alt\+/i,"&#x2325;")).replace(/shift\+/i,"&#x21E7;")),a=i+"ico "+i+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==o?'<i class="'+a+'"'+s+"></i>&nbsp;":"")+("-"!==o?'<span id="'+t+'-text" class="'+i+'text">'+o+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+i+'menu-shortcut">'+l+"</div>":"")+(r.menu?'<div class="'+i+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings.textStyle;if("function"==typeof t&&(t=t.call(this)),t){var n=e.getEl("text");n&&n.setAttribute("style",t)}return e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(We,[Y,G,ze,u],function(e,t,n,r){return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"menu"},init:function(e){var i=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var o=e.items,a=o.length;a--;)o[a]=r.extend({},e.itemDefaults,o[a]);i._super(e),i.addClass("menu"),i.keyNav=new t({root:i,enableUpDown:!0,enableLeftRight:!0,leftAction:function(){i.parent()instanceof n&&i.keyNav.cancel()},onCancel:function(){i.fire("cancel",{},!1),i.hide()}})},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("cancel"),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}})}),r(Ve,[be],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r(Ue,[ge,U],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},end:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),r(qe,[ge],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),r(je,[Ie,F],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"splitbutton"},repaint:function(){var e,n,r=this,i=r.getEl(),o=r.layoutRect();return r._super(),e=i.firstChild,n=i.lastChild,t.css(e,{width:o.w-t.getSize(n).width,height:o.h-2}),t.css(n,{height:o.h-2}),r},activeMenu:function(e){var n=this;t.toggleClass(n.getEl().lastChild,n.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'"><button type="button" hidefocus tabindex="-1">'+(r?'<i class="'+r+'"></i>':"")+(e._text?(r?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus tabindex="-1">'+(e._menuBtnText?(r?"\xa0":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if("BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void t.call(this,e);n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),r($e,[Be],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),r(Ke,[j,F],function(e,t){return e.extend({lastIdx:0,Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){this.activeTabId&&t.removeClass(this.getEl(this.activeTabId),this.classPrefix+"active"),this.activeTabId="t"+e,t.addClass(this.getEl("t"+e),this.classPrefix+"active"),e!=this.lastIdx&&(this.items()[this.lastIdx].hide(),this.lastIdx=e),this.items()[e].show().fire("showtab"),this.reflow()},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){n+='<div id="'+e._id+"-t"+i+'" class="'+r+'tab" unselectable="on">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1"><div id="'+e._id+'-head" class="'+r+'tabs">'+n+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,n,r,i=this;n=0>(n=t.getSize(i.getEl("head")).width)?0:n,r=0,i.items().each(function(e,t){n=Math.max(n,e.layoutRect().minW),r=Math.max(r,e.layoutRect().minH),i.settings.activeTab!=t&&e.hide()}),i.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=r,e.layoutRect({x:0,y:0,w:n,h:r})});var o=t.getSize(i.getEl("head")).height;return i.settings.minWidth=n,i.settings.minHeight=r+o,(e=i._super()).deltaH+=o,e.innerH=e.h-e.deltaH,e}})}),r(Ye,[ge,F],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(e){var t=this;return t._rendered&&void 0!==e&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return void 0!==e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e,t,n,r,i=this,o=0,a=0;e=i.getEl().style,t=i._layoutRect,r=i._lastRepaintRect||{};var s=document;return!i.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),o=(n=i._borderBox).left+n.right+8,a=n.top+n.bottom+(i.settings.multiline?8:0),t.x!==r.x&&(e.left=t.x+"px",r.x=t.x),t.y!==r.y&&(e.top=t.y+"px",r.y=t.y),t.w!==r.w&&(e.width=t.w-o+"px",r.w=t.w),t.h!==r.h&&(e.height=t.h-a+"px",r.h=t.h),i._lastRepaintRect=r,i.fire("repaint",{},!1),i},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),e.disabled()&&(i+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="true"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="true"'+i+">"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),r(Ge,[F],function(e){return function(t){var n,r=this;r.show=function(i){return r.hide(),n=!0,window.setTimeout(function(){n&&t.appendChild(e.createFragment('<div class="mce-throbber"></div>'))},i||0),r},r.hide=function(){var e=t.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),n=!1,r}}}),o([s,l,c,d,u,f,m,p,h,g,v,y,b,C,x,_,w,k,E,N,S,T,R,A,B,H,L,M,D,P,O,I,F,z,W,V,U,q,j,$,K,Y,G,X,J,Q,Z,ee,te,ne,re,ie,oe,ae,se,le,ce,de,ue,fe,me,pe,he,ge,ve,ye,be,Ce,xe,_e,we,ke,Ee,Ne,Se,Te,Re,Ae,Be,He,Le,Me,De,Pe,Oe,Ie,Fe,ze,We,Ve,Ue,qe,je,$e,Ke,Ye,Ge])}(this);