<style>
    #map {
        width: 100%;
        height: 277px;
    }
</style>
<style>
	 #map img { max-width: none; }
</style>

<nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><%= link_to 'レジストリ', admin_index_path %></li>
    <li class="breadcrumb-item active" aria-current="page"><%= model_name(@item) %></li>
  </ol>
</nav>

<!-- === Masthead === -->
<header class="subhead" id="overview">
	<h3><%= model_name(@item) %>&nbsp;<small><%= model_alt_id(@item) %></h3>
</header>

<ul class="nav nav-tabs">
	<li class="nav-item">
		<a class="nav-link active" href="<%= url_for(:controller=>'admin', :action=>'company_show',:id=>@item) %>">レジストリー</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" href="<%= url_for(:controller=>'admin', :action=>'company_list_shop',:id=>@item) %>">登録店舗</a>
	<li class="nav-item">
	</li>
	<li class="nav-item">
		<a class="nav-link" href="<%= url_for(:controller=>'admin', :action=>'company_list_user', :id=>@item) %>">オーナー・ユーザー</a>
	</li>
</ul>
<br/>

<h4>
	<% if current_user.role==User::ROLE_SUPER %>
		<p class="float-right">
			<button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalEdit">
				<%= edit_icon('編集') %>&nbsp;編集
			</button>
		</p>
	<% end %>
	レジストリー情報
</h4>

<table class="table table-bordered">
	<tbody>
		<tr>
			<td width='30%'>レジストリーID</td>
			<td width='70%'><%= model_alt_id(@item) %></td>
		</tr>
		<tr>
			<td>レジストリー名称</td>
			<td><%= model_name(@item) %></td>
		</tr>
		<tr>
			<td>電話番号</td><td><%= @item.telephone_1 %></td>
		</tr>
		<tr>
			<td>郵便番号</td><td><%= @item.postal %> </td>
		</tr>
		<tr>
			<td>住所</td><td><%= @item.address_1 %></td>
		</tr>
	</tbody>
</table>

<% if current_user.has_permission?(User::ROLE_SUPER) %>
	<p class="text-right">
		<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalDelete">
			<%= trash_icon('削除') %>&nbsp;削除確認
		</button>
	</p>
<% end %>

<!-- modalEdit -->
<div class="modal fade" id="modalEdit" tabindex="-1" aria-labelledby="modalEdit" aria-hidden="true">
  <div class="modal-dialog">
		<div class="modal-content">
			<%= form_for @item, url: admin_company_update_path(id: @item), method: :patch do |f| -%>
				<div class="modal-header">
					<h5 class="modal-title">レジストリー編集</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<%= render partial: "form_company", locals: {f: f, item: @item } %>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-success"><%= update_icon('更新') %>&nbsp;更新</button>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
				</div>
			<% end %>
		</div>
	</div>
</div>

<!-- modalDelete -->
<div class="modal fade" id="modalDelete" tabindex="-1" aria-labelledby="modalDelete" aria-hidden="true">
  <div class="modal-dialog">
		<div class="modal-content">
			<%= form_for @item, url: admin_company_delete_path(id: @item), method: :delete do |f| -%>
				<div class="modal-header">
					<h5 class="modal-title">レジストリー削除</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p>
						「<%= model_name(@item) %>」を削除します。<br/>
						このレジストリーに関連するすべての情報が削除されます。<br/>
						よろしいですか？
					</p>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-danger"><%= trash_icon('削除') %>&nbsp;削除</button>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
				</div>
			<% end %>
		</div>
	</div>
</div>
